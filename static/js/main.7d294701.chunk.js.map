{"version":3,"sources":["components/_primitives/ListItem.js","util/childrenExist.js","components/_primitives/List.js","components/_common/PanelComponent.js","components/_common/ButtonComponent.js","components/_common/BaseComponent.js","DefaultContext.js","util/mapExists.js","components/AddData/importer/index.js","components/AddData/AddData.js","components/_common/AlertModal.js","components/Map/Map.js","components/_primitives/RadioGroupItem.js","components/_primitives/RadioGroup.js","components/_primitives/ButtonGroup.js","components/BasemapSwitcher/BasemapSwitcher.js","util/mockMapOptions.js","config.js","components/_common/ElementsProvider.js","components/ScaleBar/ScaleBar.js","components/Draw/LabelMaker.js","components/Draw/textDrawMode.js","components/Draw/allowMapInteractions.js","components/Draw/staticDrawMode.js","components/Draw/Draw.js","components/Bookmarks/util/bookmarkActions.js","components/Bookmarks/Bookmarks.js","ESPON-logo.png","sidebar.js","components/_primitives/Switch.js","components/LayerList/Legend.js","components/LayerList/util/toggleLayerVisibility.js","components/LayerList/LayerActionsMenu.js","components/LayerList/LayerListItem.js","components/LayerList/GroupLayerItem.js","components/LayerList/GroupLayer.js","components/LayerList/LayerList.js","App.js","index.js"],"names":["ListItem","props","children","selectable","sx","style","padding","cursor","bg","color","as","childrenExist","undefined","isNaN","Array","isArray","length","List","items","rest","listStyleType","className","map","item","PanelComponent","closable","onClose","theme","useThemeUI","width","borderRadius","boxShadow","paddingTop","justifyContent","marginRight","space","height","onClick","ButtonComponent","buttonOptions","ref","useRef","triggerRect","useRect","useState","showPanel","setShowPanel","title","testId","variant","intercept","err","console","error","icon","zIndex","targetRef","position","left","right","top","window","scrollY","fontFamily","BaseComponent","baseType","open","topPos","leftPos","bottom","baseStyle","panelStyle","buttonStyle","minWidth","minHeight","p","m","defaultType","DefaultContext","createContext","mapExists","Object","keys","config","importer","this","reader","FileReader","onload","handleFile","bind","file","cb","Error","fileExt","getExtension","fileDetails","fileSize","size","fileName","name","toLowerCase","readAsArrayBuffer","readAsText","fArr","split","evt","handleCSV","handleKML","handleJSON","handleGPX","handleSHP","notRecognized","handleGeoJSON","toString","latitude","longitude","latitudes","longitudes","csv","target","result","forEach","column","indexOf","trim","csv2geojson","latfield","lonfield","data","xml","DOMParser","parseFromString","geojson","togeojson","kml","JSON","parse","gpx","shpjs","parseZip","log","AddData","useContext","Context","tab","setTab","tmpLayers","setTmpLayers","addMapSource","sourceId","addSource","type","setType","geomType","setPaint","paint","setFilter","filter","geomTypes","features","feature","geometry","push","layerId","addLayer","id","source","layout","visibility","bounds","bbox","fitBounds","zoomToLayer","Desc","Tabs","paddingBottom","borderStyle","borderWidth","ManageLayers","textAlign","FileBody","supportedFileExt","subtitle","join","fontSize","border","onChange","e","load","files","warn","loadFile","supported","UrlBody","placeholder","TabBody","styles","LayerBody","textDecoration","backgroundColor","preventDefault","marginTop","content","isVisible","getLayoutProperty","i","setLayoutProperty","handleChange","defaultChecked","pt","Body","AlertModal","message","show","setShow","flexDirection","Map","mapOptions","mapLayers","supportMessage","setMap","useEffect","layers","mapboxgl","on","l","el","container","RadioGroupItem","checkedChanged","value","label","RadioGroup","checkedValueChange","display","checked","ButtonGroup","buttons","alignItems","borderColor","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","BasemapSwitcher","switcherStyle","basemaps","preserveLayers","basemapValue","setBasemapValue","didMountRef","current","setStyle","waiting","isStyleLoaded","getSource","layer","setTimeout","switcher","basemapOptions","key","center","zoom","accessToken","ElementsProvider","context","mapOverride","ctx","ContextProvider","Provider","provider","ScaleBar","maxWidth","unit","ScaleControl","scale","ctrlPosition","addControl","LabelMaker","x","y","textShadow","hidden","setHidden","textColor","setTextColor","setBackgroundColor","colorPickerActive","setColorPickerActive","currentColorPicker","setCurrentColorPicker","handle","colors","primary","fonts","body","margin","htmlFor","innerHTML","toUpperCase","mb","replace","fontWeight","hex","gap","columns","href","confirm","parentNode","removeChild","GetTextMode","TextMode","htmlToElement","html","template","document","createElement","firstChild","onSetup","state","point","newFeature","coordinates","lngLat","lng","lat","marker","Marker","element","draggable","getElement","addEventListener","clickEvent","exists","getElementById","appendChild","ReactDOM","render","clientX","clientY","setLngLat","addTo","fire","toGeoJSON","changeMode","onKeyUp","keyCode","toDisplayFeatures","allowMapInteractions","allow","boxZoom","enable","scrollZoom","dragPan","dragRotate","keyboard","doubleClickZoom","touchZoomRotate","disable","StaticMode","setActionableState","Draw","drawControl","setDrawControl","nextMode","setNextMode","startDraw","drawType","a","then","MapboxDraw","default","displayControlsDefault","modes","assign","draw_text","static","draw","nm","hideTextArea","textEl","textStroke","webkitTextStroke","resize","getElementsByClassName","focus","getMode","deleteAll","remove","clearDrawings","loadBookmarks","localStorage","getItem","goToBookmark","bookmark","easeTo","saveBookmark","setBookmarks","existingBookmarks","newItem","getZoom","getCenter","existingArray","newArray","setItem","stringify","array","deleteBookmark","bookmarks","Bookmarks","_goToBookmark","hasOwnProperty","call","_loadBookmarks","_deleteBookmark","_saveBookmark","bookmarkName","setBookmarkName","bookmarkListItems","setBookmarkListItems","listItems","bkmk","flex","toolText","form","opacity","currentTarget","marginLeft","Sidebar","overflow","src","logo","Switch","React","forwardRef","__themeKey","css","__css","SIZE","mr","transform","transition","buildStyle","lyr","fc","foc","fcValue","get","focValue","foValue","_parameters","prototype","stops","_styleExpression","flattened","expression","cases","k","outputs","otherwise","svgs","splice","s","rx","ry","fill","stroke","strokeWidth","fillOpacity","strokeOpacity","cr","flexGrow","cc","crValue","kind","cSize","cx","cy","r","lineHeight","circle","lc","lcValue","px","line","toggleLayerVisibility","LayerActionsMenu","layerActions","action","onSelect","LayerListItem","actionMenuSlot","layerInfo","legend","showActions","itemActions","checkboxStyle","isChecked","setIsChecked","checkbox","setCheckbox","legendVisibility","setLegendVisibility","layerIds","layerVisibility","setCurrentState","legendStyle","getLayer","TypeError","once","LegendListItem","layerName","GroupLayerItem","group","callback","activeOnLoad","handleRadioChange","GroupLayer","showOnLoad","flat","toggleGroupLayers","layerArray","onLayers","includes","offLayers","layerItems","idx","actions","groupName","LayerList","groupLayers","groupItems","Description","App","panel","Component"],"mappings":"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","file":"static/js/main.7d294701.chunk.js","sourcesContent":["import React from 'react';\nimport { Box } from 'theme-ui';\n\nconst ListItem = props => {\n  const { children, selectable, sx } = props;\n\n  const style = selectable\n    ? {\n        padding: 2,\n        ':hover': {\n          cursor: 'pointer',\n          bg: 'primary',\n          color: 'background'\n        },\n        ...sx\n      }\n    : { padding: 2, ...sx };\n\n  return (\n    <Box {...props} as=\"li\" sx={style}>\n      {children}\n    </Box>\n  );\n};\n\nexport default ListItem;\n","/**\n * Tests if children exist in React.\n * @param {Object} children The children prop of a component.\n * @returns {Boolean}\n */\n\nconst childrenExist = (children) => {\n  if (children === null || children === undefined) return false;\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof children === 'number') return !isNaN(children);\n\n  if (Array.isArray(children)) return children.length > 0;\n\n  return !!children;\n};\n\nexport default childrenExist;\n","import React from 'react';\nimport { Box } from 'theme-ui';\nimport ListItem from \"./ListItem\";\nimport childrenExist from '../../util/childrenExist';\n\nconst List = ({ items, children, sx, ...rest }) => {\n  const style = { listStyleType: 'none', padding: 1, ...sx };\n\n  if (childrenExist(children)) {\n    return (\n      <Box {...rest} as=\"ul\" className=\"cl-list\" sx={style}>\n        {children}\n      </Box>\n    );\n  }\n\n  if (items && items.length > 0) {\n    return (\n      <Box {...rest} as=\"ul\" className=\"cl-list\" sx={style}>\n        {items.map(item => (\n          <ListItem>{item}</ListItem>\n        ))}\n      </Box>\n    );\n  } \n    return false;\n  \n};\n\nexport default List;\n","import React from 'react';\nimport { Card, Close, Flex, useThemeUI } from 'theme-ui';\n\nconst PanelComponent = ({ closable, onClose, sx, children, ...rest }) => {\n  const { theme } = useThemeUI();\n\n  return (\n    <Card\n      className=\"cl-panel-component\"\n      color=\"text\"\n      sx={{\n        padding: 3,\n        width: '300px',\n        borderRadius: '4px',\n        boxShadow: '0 0 4px rgba(0, 0, 0, .6)',\n        bg: 'background',\n        ...sx,\n        paddingTop: closable ? 0 : 3\n        // paddingRight: closable ? 0 : 3\n      }}\n      {...rest}\n    >\n      {closable && (\n        <Flex\n          sx={{\n            justifyContent: 'flex-end',\n            marginRight: `-${theme.space ? theme.space[3] : 16}px`\n          }}\n        >\n          <Close\n            sx={{\n              color: 'text',\n              height: '24px',\n              width: '24px',\n              ':hover': { cursor: 'pointer' }\n            }}\n            onClick={onClose}\n          />\n        </Flex>\n      )}\n      {children}\n    </Card>\n  );\n};\n\nexport default PanelComponent;\n","import Popover from '@reach/popover';\nimport { useRect } from '@reach/rect';\nimport React, { useRef, useState } from 'react';\nimport { Button } from 'theme-ui';\nimport Panel from './PanelComponent';\n\nconst ButtonComponent = ({ children, buttonOptions, sx, ...rest }) => {\n  const ref = useRef(null);\n  const triggerRect = useRect(ref);\n  const [showPanel, setShowPanel] = useState(false);\n  return (\n    <>\n      <Button\n        ref={ref}\n        title={buttonOptions?.title}\n        className={rest?.className ?? 'cl-btn'}\n        data-testid={buttonOptions?.testId ?? 'cl-btn'}\n        variant={buttonOptions?.variant ?? 'primary'}\n        onClick={() => {\n          if (buttonOptions?.intercept) {\n            try {\n              buttonOptions.intercept();\n            } catch (err) {\n              // eslint-disable-next-line no-console\n              console.error(err);\n            }\n          } else {\n            setShowPanel(!showPanel);\n          }\n        }}\n        sx={{\n          ...sx\n        }}\n      >\n        {buttonOptions?.icon}\n      </Button>\n\n      {showPanel && (\n        <Popover\n        style={{zIndex: sx.zIndex || 2}}\n          targetRef={ref}\n          position={() => ({\n            left: triggerRect?.right + 10,\n            top: triggerRect?.top + window.scrollY\n          })}\n        >\n          <Panel\n            closable\n            onClose={() => setShowPanel(false)}\n            sx={{\n              fontFamily: 'body',\n\n              // bg: 'transparent'\n            }}\n          >\n            {children}\n          </Panel>\n        </Popover>\n      )}\n    </>\n  );\n};\n\nexport default ButtonComponent;\n","// Base Component to give structure to all other major components\n\nimport React from 'react';\nimport { Box } from 'theme-ui';\nimport ButtonComponent from './ButtonComponent';\nimport Panel from './PanelComponent';\n\nconst BaseComponent = ({\n  baseType, // 'none', 'panel', 'button'\n  buttonOptions, // optional\n  children,\n  open,\n  sx,\n  ...rest\n}) => {\n  let topPos = sx?.top ?? '1rem';\n  let leftPos = sx?.left ?? '1rem';\n\n  if (sx?.bottom) {\n    topPos = null;\n  }\n\n  if (sx?.right) {\n    leftPos = null;\n  }\n\n  const baseStyle = {\n    fontFamily: 'body',\n    bg: 'transparent',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    ...sx\n  };\n\n  const panelStyle = {\n    fontFamily: 'body',\n    bg: 'background',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    ...sx\n  };\n\n  const buttonStyle = {\n    fontFamily: 'body',\n    bg: sx?.bg || 'primary',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    width: '32px',\n    height: '32px',\n    minWidth: '25px',\n    minHeight: '25px',\n    p: 0,\n    m: 1,\n    boxShadow: '1 1 4px rgba(0, 0, 0, 1)',\n    ...sx\n  };\n\n  const defaultType = (\n    <Box {...rest} sx={baseStyle}>\n      {children}\n    </Box>\n  );\n\n  switch (baseType) {\n    case 'none':\n      return defaultType;\n    case 'panel':\n      return (\n        <Panel {...rest} sx={panelStyle}>\n          {children}\n        </Panel>\n      );\n    case 'button':\n      return (\n        <ButtonComponent\n          // eslint-disable-next-line react/no-children-prop\n          children={children}\n          buttonOptions={buttonOptions}\n          sx={buttonStyle}\n          {...rest}\n        />\n      );\n    default:\n      return defaultType;\n  }\n};\n\nexport default BaseComponent;\n","import { createContext } from 'react';\n\nconst DefaultContext = createContext({});\n\nexport default DefaultContext;\n","function mapExists(map) {\n  if (map && Object.keys(map).length > 0) {\n    if (map.style && Object.keys(map.style).length > 0) {\n      return true;\n    } \n      return false;\n    \n  } \n    return false;\n  \n}\n\nexport default mapExists;\n","// @description Load various file format\n// returns GeoJSON\nimport csv2geojson from 'csv2geojson'; // csv\nimport togeojson from '@mapbox/togeojson'; // kml, gpx\nimport shpjs from 'shpjs'; // zipped shapefile\n\nconst config = {\n  maxFileSize: 10e7 // in bytes, 100 mb\n};\n\nclass Importer {\n  constructor() {\n    this.reader = new FileReader();\n    this.reader.onload = this.handleFile.bind(this);\n  }\n\n  load(file, cb) {\n    if (!file) throw new Error('File Required');\n    if (!cb) throw new Error('Callback Required');\n    this.cb = cb;\n    this.file = file;\n    this.fileExt = this.getExtension();\n    this.fileDetails = {\n      fileSize: this.file.size,\n      fileName: this.file.name,\n      fileExt: this.fileExt\n    };\n    if (this.file.size >= config.maxFileSize) {\n      cb({\n        error: 'File must be less than 20mb',\n        fileDetails: this.fileDetails\n      });\n    } else if (this.fileExt.toLowerCase() === 'zip') {\n      this.reader.readAsArrayBuffer(this.file);\n    } else {\n      this.reader.readAsText(this.file, 'UTF-8');\n    }\n  }\n\n  getExtension() {\n    const fArr = this.file.name.split('.');\n    return fArr[fArr.length - 1];\n  }\n\n  handleFile(evt) {\n    switch (this.fileExt.toLowerCase()) {\n      case 'csv':\n        this.handleCSV(evt);\n        break;\n      case 'kml':\n        this.handleKML(evt);\n        break;\n      // case 'topojson':\n      case 'geojson':\n      case 'json':\n        this.handleJSON(evt);\n        break;\n      case 'gpx':\n        this.handleGPX(evt);\n        break;\n      // case 'igc':\n      //   this.handleIGC(evt);\n      //   break;\n      case 'zip':\n        this.handleSHP(evt);\n        break;\n      default:\n        this.notRecognized();\n        break;\n    }\n  }\n\n  handleJSON(evt) {\n    try {\n      /* const res = JSON.parse(evt.target.result);\n             if (res.type && res.type.toLowerCase() === 'topology') {\n        this.handleTopoJSON(evt);\n      } else {\n        this.handleGeoJSON(evt);\n      } */\n      this.handleGeoJSON(evt);\n    } catch (err) {\n      this.cb({\n        error: `Problem parsing JSON (${err.toString()})`,\n        fileDetails: this.fileDetails\n      });\n    }\n  }\n\n  handleCSV(evt) {\n    const latitudes = ['y', 'lat', 'latitude'];\n    const longitudes = ['x', 'lng', 'lon', 'long', 'longitude'];\n    let latitude;\n    let longitude;\n    const csv = evt.target.result;\n    const header = csv.split('\\n')[0].split(',');\n    header.forEach((column) => {\n      if (latitudes.indexOf(column.toLowerCase().trim()) !== -1) {\n        latitude = column.trim();\n      }\n      if (longitudes.indexOf(column.toLowerCase().trim()) !== -1) {\n        longitude = column.trim();\n      }\n    });\n    if (!longitude || !latitude) {\n      throw new Error(\n        'no latitude (y, lat, latitude) or longitude (x, lng, long, longitude) field found'\n      );\n    }\n    csv2geojson.csv2geojson(\n      csv,\n      {\n        latfield: latitude,\n        lonfield: longitude\n      },\n      (err, data) => {\n        if (err) throw err;\n        this.cb(this.fileDetails, data);\n      }\n    );\n  }\n\n  handleKML(evt) {\n    const xml = new window.DOMParser().parseFromString(\n      evt.target.result,\n      'application/xml'\n    );\n    const geojson = togeojson.kml(xml, { style: true });\n    this.cb(this.fileDetails, geojson);\n  }\n\n  handleGeoJSON(evt) {\n    this.cb(this.fileDetails, JSON.parse(evt.target.result));\n  }\n\n  // handleTopoJSON(evt) {\n  //   console.log('handle as topojson');\n  // }\n\n  handleGPX(evt) {\n    const xml = new window.DOMParser().parseFromString(\n      evt.target.result,\n      'application/xml'\n    );\n    const geojson = togeojson.gpx(xml);\n    this.cb(this.fileDetails, geojson);\n  }\n\n  // handleIGC(evt) {\n  //   console.log('handle as igc');\n  // }\n\n  handleSHP(evt) {\n    const geojson = shpjs.parseZip(evt.target.result);\n    this.cb(this.fileDetails, geojson);\n  }\n\n  notRecognized() {\n    // eslint-disable-next-line no-console\n    console.log('sorry, i didnt recognize this format');\n    this.cb({\n      error: `File format ${this.fileExt} not recognized.`,\n      fileDetails: this.fileDetails\n    });\n  }\n}\n\nexport default Importer;\n","import React, { useContext, useState } from 'react';\nimport {\n  Button,\n  Flex,\n  Box,\n  // Link,\n  Text,\n  Input,\n  Checkbox,\n  Label\n} from 'theme-ui';\nimport bbox from '@turf/bbox';\nimport { MdLibraryAdd } from 'react-icons/md';\nimport List from '../_primitives/List';\nimport ListItem from '../_primitives/ListItem';\nimport BaseComponent from '../_common/BaseComponent';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport Importer from './importer/index';\n\nconst importer = new Importer();\n\nconst AddData = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const config = useContext(Context);\n  const { map } = config;\n\n  // state\n  const [tab, setTab] = useState('file'); // file, url, layers\n  const [tmpLayers, setTmpLayers] = useState([]); // added layers\n  // const [file, setFile] = useState(null); // file to upload\n\n  const addLayer = (sourceId, geojson) => {\n    // add multiple layers based on source geometry\n    // Point, MultiPoint\n    // LineString, MultiLineString\n    // Polygon, MultiPolygon\n\n    function setType(geomType) {\n      let type;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          type = 'circle';\n          break;\n        case 'LineString':\n        case 'MultiLineString':\n          type = 'line';\n          break;\n        case 'Polygon':\n        case 'MultiPolygon':\n          type = 'fill';\n          break;\n        default:\n          return '';\n      }\n      return type;\n    }\n\n    function setPaint(geomType) {\n      let paint;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          paint = {\n            'circle-radius': 6,\n            'circle-color': '#B42222',\n            'circle-opacity': 0.6\n          };\n          break;\n\n        case 'LineString':\n        case 'MultiLineString':\n          paint = {\n            'line-color': '#888',\n            'line-width': 8\n          };\n          break;\n\n        case 'Polygon':\n        case 'MultiPolygon':\n          paint = {\n            'fill-color': '#088',\n            'fill-opacity': 0.8\n          };\n          break;\n        default:\n          return null;\n      }\n      return paint;\n    }\n\n    function setFilter(geomType) {\n      let filter;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          filter = ['==', '$type', 'Point'];\n          break;\n        case 'LineString':\n        case 'MultiLineString':\n          filter = ['==', '$type', 'LineString'];\n          break;\n        case 'Polygon':\n        case 'MultiPolygon':\n          filter = ['==', '$type', 'Polygon'];\n          break;\n        default:\n          return null;\n      }\n      return filter;\n    }\n    const geomTypes = [];\n    /* eslint-disable array-callback-return */\n    geojson.features.map((feature) => {\n      if (geomTypes.indexOf(feature.geometry.type) === -1)\n        geomTypes.push(feature.geometry.type);\n    });\n    /* eslint-enable array-callback-return */\n\n    geomTypes.forEach((type) => {\n      const layerId = `${sourceId}-${type}`;\n      map.addLayer({\n        id: layerId,\n        type: setType(type),\n        source: sourceId,\n        paint: setPaint(type),\n        filter: setFilter(type),\n        layout: {\n          visibility: 'visible'\n        }\n      });\n      setTmpLayers([...tmpLayers, layerId]);\n    });\n  };\n\n  const zoomToLayer = (geojson) => {\n    const bounds = bbox(geojson);\n    map.fitBounds(bounds);\n  };\n\n  const addMapSource = (fileDetails, geojson) => {\n    if (!geojson || !fileDetails) return;\n    const sourceId = fileDetails.fileName;\n    map.addSource(sourceId, {\n      type: 'geojson',\n      data: geojson\n    });\n    addLayer(sourceId, geojson);\n    zoomToLayer(geojson);\n  };\n\n  const loadFile = (e) => {\n    try {\n      importer.load(e.target.files[0], addMapSource);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.warn(err);\n    }\n  };\n  const Desc = () =>{\n    return(\n    <Text>\n      Upload your dataset\n    </Text>\n    )\n  }\n  const Tabs = () => {\n    return (\n      <Flex\n        sx={{\n          justifyContent: 'center',\n          paddingBottom: '0.5rem',\n          \n        }}\n      >\n        <Button\n          sx={{\n            width: '50%',\n            bg: 'transparent',\n            color: 'blue',\n            cursor: 'pointer',\n            borderStyle: 'solid',\n            borderRadius: 0,\n            borderWidth: 1,\n            boxShadow: 'none',\n            ':hover': {\n              bg: 'primary',\n              color: 'background'\n            }\n          }}\n          onClick={() => {\n            setTab('file');\n          }}\n        >\n          File\n        </Button>\n\n        <Button\n          sx={{\n            width: '50%',\n            bg: 'transparent',\n            cursor: 'pointer',\n            color: 'blue',\n            borderStyle: 'solid',\n            borderRadius: 0,\n            borderWidth: 1,\n            boxShadow: 'none',\n            ':hover': {\n              bg: 'primary',\n              color: 'background'\n            }\n          }}\n          onClick={() => {\n            setTab('url');\n          }}\n        >\n          URL\n        </Button>\n      </Flex>\n    );\n  };\n\n  const ManageLayers = () => {\n    const content = () => {\n      return (\n        <Flex sx={{ justifyContent: 'flex-end' }}>\n          {/* <Button\n            sx={{\n              fontSize: 0,\n              cursor: 'pointer',\n              textDecoration: 'underline',\n              color: 'primary',\n              backgroundColor: 'blue',\n              ':hover': {\n                backgroundColor: 'blue'\n              }\n            }}\n            onClick={(e) => {\n              e.preventDefault();\n              setTab('layers');\n            }}\n          >\n            Manage Layers\n          </Button> */}\n        </Flex>\n      );\n    };\n    return (\n      <Box\n        sx={{\n          textAlign: 'center',\n        }}\n      >\n        {content()}\n      </Box>\n    );\n  };\n\n  const FileBody = () => {\n    const supportedFileExt = ['.geojson', '.kml', '.gpx', '.csv', '.zip (shp)'];\n    const supported = () => {\n      const title = 'Supported File Extensions:';\n      const subtitle = supportedFileExt.join(', ');\n      return (\n        <Box>\n          <Text sx={{ fontSize: 0 }}>{title}</Text>\n          <Text sx={{ fontSize: 0 }}>{subtitle}</Text>\n          <Input\n            sx={{\n              textAlign: 'center',\n              paddingTop: 1,\n              border: 'none',\n              '>button': {\n                boxShadow: 'none'\n              }\n            }}\n            type=\"file\"\n            className=\"file-upload\"\n            onChange={(e) => {\n              loadFile(e);\n            }}\n          />\n          {/* <Flex sx={{ justifyContent: 'flex-end' }}>\n            <Button\n              onClick={e => {\n                loadFile(file);\n              }}\n              variant=\"outline\"\n            >\n              Add Data\n            </Button>\n          </Flex> */}\n        </Box>\n      );\n    };\n    return (\n      <div>\n        <Box\n          sx={{\n            textAlign: 'left'\n          }}\n        >\n          {supported()}\n        </Box>\n        <ManageLayers />\n      </div>\n    );\n  };\n\n  const UrlBody = () => {\n    return (\n      <div>\n        <Input /* fluid */ \n        \n        placeholder=\"Paste URL Here\" />\n        {/* <Button\n\n          css={{ marginTop: '0.5rem' }}\n          onChange={(e) => {\n            loadFile(e);\n          }}\n        >\n          Add Layer\n        </Button> */}\n        <ManageLayers />\n      </div>\n    );\n  };\n\n  const TabBody = () => {\n    return (\n      <div styles={{ width: '100%' }}>\n        <Tabs />\n        {tab === 'file' ? <FileBody /> : <UrlBody />}\n      </div>\n    );\n  };\n\n  const LayerBody = () => {\n    const items = () => {\n      const isVisible = (layerId) => {\n        const layerVisibility = map.getLayoutProperty(layerId, 'visibility');\n        const checked = layerVisibility !== 'none';\n        return checked;\n      };\n\n      const handleChange = (layerId) => {\n        const checked = isVisible(layerId);\n        if (checked) {\n          map.setLayoutProperty(layerId, 'visibility', 'none');\n        } else {\n          map.setLayoutProperty(layerId, 'visibility', 'visible');\n        }\n      };\n      return tmpLayers.map((layerId, i) => {\n        return (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${layerId}-${i}`}\n          >\n            {' '}\n            <Label>\n              <Checkbox\n                onChange={() => {\n                  handleChange(layerId);\n                }}\n                defaultChecked={isVisible(layerId)}\n              />\n              <Text pt={1}>{layerId}</Text>\n            </Label>\n          </ListItem>\n        );\n      });\n    };\n\n    return (\n      <div style={{ width: '100%' }}>\n        <Button\n          sx={{\n            fontSize: 0,\n            textDecoration: 'underline',\n            color: 'primary',\n            cursor: 'pointer',\n            backgroundColor: 'blue',\n            ':hover': {\n              backgroundColor: 'blue'\n            }\n          }}\n          onClick={(e) => {\n            e.preventDefault();\n            setTab('file');\n          }}\n        >\n          &lt;&lt; Back\n        </Button>\n        <Box sx={{ marginTop: '' }} content={<List>{items()}</List>} />\n      </div>\n    );\n  };\n\n  const Body = () => {\n    return (\n      <div style={{ width: '100%' }}>\n        {tab === 'layers' ? <LayerBody /> : <TabBody />}\n      </div>\n    );\n  };\n\n  if (!mapExists(map)) return null;\n\n  return (\n    <BaseComponent\n    className=\"add-tools\"\n      baseType={baseType}\n      buttonOptions={{\n        icon: <MdLibraryAdd />,\n        title: 'Add Data',\n        testId: 'add-data-btn',\n        ...buttonOptions\n      }}\n      \n      sx={{\n        minWidth: '400px',\n        paddingTop: '10px',\n        borderRadius: '5px',\n        marginTop:'18vh',\n        backgroundColor: 'white'\n      }}\n      {...rest}\n    >\n      <Desc />\n      <Body />\n    </BaseComponent>\n  );\n};\n\nexport default AddData;\n","import React, { useState } from 'react';\n\nimport { Alert, Button, Flex } from 'theme-ui';\n\nconst AlertModal = ({ message }) => {\n  const [show, setShow] = useState(true);\n\n  if (!show) return null;\n  return (\n    <Alert variant=\"modal\">\n      <Flex sx={{ flexDirection: 'column' }}>\n        <Flex sx={{ width: '100%', position: 'relative' }}>\n          <p style={{ padding: 1 }}>{message}</p>\n        </Flex>\n        <Flex sx={{ justifyContent: 'flex-end' }}>\n          <Button\n            variant=\"secondary\"\n            onClick={() => {\n              setShow(false);\n            }}\n          >\n            OK\n          </Button>\n        </Flex>\n      </Flex>\n    </Alert>\n  );\n};\n\nexport default AlertModal;\n","import React, { useEffect, useContext } from 'react';\nimport { Box } from 'theme-ui';\nimport mapboxgl from '!mapbox-gl';  // eslint-disable-line import/no-webpack-loader-syntax\nimport DefaultContext from '../../DefaultContext';\nimport AlertModal from '../_common/AlertModal';\n\n\n\nconst Map = ({ mapOptions, mapLayers, supportMessage, sx, ...rest }) => {\n  let map;\n  const config = useContext(DefaultContext);\n  const { setMap } = config;\n\n  \n  const addLayers = (layers) => {\n    if (!layers) return;\n    map.on('load', () => {\n      layers.forEach((l) => {\n        map.addLayer(l);\n      });\n    });\n  };\n\n  useEffect(() => {\n    // init the map\n    map = new mapboxgl.Map(mapOptions);\n    setMap(map);\n\n    addLayers(mapLayers);\n  }, []);\n\n  if (!mapboxgl.supported()) {\n    return (\n      <AlertModal\n        message={\n          supportMessage ||\n          `WARNING! Your browser does not currently support this application, which requires MapboxGL. \n    Please ensure you are using the latest version of Chrome, Firefox, or Edge.\n    Additionally, check https://get.webgl.org/ for compatibility with your system.`\n        }\n      />\n    );\n  }\n\n  return (\n    <Box\n      {...rest}\n      sx={{ width: '100vw', height: '100vh', ...sx }}\n      ref={(el) => {\n        // eslint-disable-next-line no-param-reassign\n        mapOptions.container = el;\n      }}\n      className=\"cl-map-container\"\n    />\n  );\n};\n\nexport default Map;\n","import React from 'react';\nimport { Label, Radio } from 'theme-ui';\n\nconst RadioGroupItem = (props) => {\n  const { name, item, defaultChecked, checkedChanged } = props;\n\n  return (\n    <Label\n      className=\"cl-radio-group-item\"\n      {...props}\n      sx={{\n        // color: 'text',\n        fontSize: '12px',\n        marginRight: '2px',\n        '>span': {\n          paddingTop: '3px'\n        }\n      }}\n    >\n      <Radio\n        color=\"primary\"\n        name={name}\n        id={item.name}\n        value={item.value}\n        defaultChecked={defaultChecked}\n        sx={{\n          'input:checked ~ &': {\n            color: 'primary'\n          },\n          'input:focus ~ &': {\n            bg: 'highlight'\n          }\n        }}\n        onChange={(e) => checkedChanged(e, item)}\n      />\n      <span>{item.label}</span>\n    </Label>\n  );\n};\n\nexport default RadioGroupItem;\n","import React from 'react';\nimport { Box } from 'theme-ui';\nimport RadioGroupItem from './RadioGroupItem';\nimport childrenExist from '../../util/childrenExist';\n\n/**\n * @class RadioGroup\n * @param {Array} items\n * @param {String} name\n * @param {String} checkedValue\n * @param {Func} checkedValueChange\n */\n\nconst RadioGroup = (props) => {\n  const {\n    children,\n    items,\n    name,\n    /* checkedValue, */ checkedValueChange\n  } = props;\n  const style = {\n    bg: 'transparent',\n    color: 'primary',\n    display: 'flex',\n    padding: 0\n  };\n\n  if (childrenExist(children)) {\n    return (\n      <Box {...props} className=\"cl-radio-group\" sx={style}>\n        {children}\n      </Box>\n    );\n  }\n\n  return (\n    <Box {...props} className=\"cl-radio-group\" sx={style}>\n      {items.map((item) => {\n        return (\n          <RadioGroupItem\n            key={item.value}\n            name={name}\n            item={item}\n            defaultChecked={item.checked}\n            checkedChanged={checkedValueChange}\n            sx={{\n              cursor: 'pointer'\n            }}\n          />\n        );\n      })}\n    </Box>\n  );\n};\n\nexport default RadioGroup;\n","import React from 'react';\nimport { Flex } from 'theme-ui';\n\nconst ButtonGroup = ({ buttons, sx, children, ...rest }) => {\n  let content;\n  if (buttons) {\n    content = buttons;\n  } else {\n    content = children;\n  }\n  return (\n    <Flex\n      alignItems=\"center\"\n      {...rest}\n      className=\"cl-button-group\"\n      sx={{\n        ...sx,\n        '> button': {\n          height: '32px',\n          minWidth: '80px',\n          cursor: 'pointer',\n          backgroundColor: 'blue',\n          color: 'white',\n          borderWidth: '0.25px',\n          borderColor: 'muted',\n          borderStyle: 'solid',\n          ':first-of-type': {\n            borderTopLeftRadius: 'default',\n            borderBottomLeftRadius: 'default',\n            borderWidth: '0.5px',\n            borderColor: 'muted',\n            borderStyle: 'solid'\n          },\n          ':last-child': {\n            borderTopRightRadius: 'default',\n            borderBottomRightRadius: 'default',\n            borderWidth: '0.5px',\n            borderColor: 'muted',\n            borderStyle: 'solid'\n          }\n        }\n      }}\n    >\n      {content}\n    </Flex>\n  );\n};\n\nexport default ButtonGroup;\n","// BasemapSwitcher  Component for changing basemaps\n\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport { Button, Text } from 'theme-ui';\nimport { FaMap } from 'react-icons/fa';\nimport DefaultContext from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport RadioGroup from '../_primitives/RadioGroup';\nimport ButtonGroup from '../_primitives/ButtonGroup';\nimport BaseComponent from '../_common/BaseComponent';\n/**\n * @class BasemapSwitcher\n */\n\nconst BasemapSwitcher = ({\n  switcherStyle,\n  basemaps,\n  preserveLayers, // array of objects, each with 'source' and 'layer' properties. see https://bl.ocks.org/ryanbaumann/7f9a353d0a1ae898ce4e30f336200483/96bea34be408290c161589dcebe26e8ccfa132d7\n  baseType,\n  buttonOptions,\n  sx,\n  ...rest\n}) => {\n  const [basemapValue, setBasemapValue] = useState(\n    basemaps ? basemaps[0].value : 'light-v10'\n  );\n  const config = useContext(DefaultContext);\n  const { map } = config;\n\n  const didMountRef = useRef(false);\n\n  const handleChange = (e, props) => {\n    setBasemapValue(props.value);\n  };\n\n  useEffect(() => {\n    if (didMountRef.current) {\n      map.setStyle(`mapbox://styles/mapbox/${basemapValue}`);\n    } else {\n      didMountRef.current = true;\n    }\n  }, [basemapValue]);\n\n  useEffect(() => {\n    if (mapExists(map)) {\n      map.on('load', () => {\n        map.setStyle(`mapbox://styles/mapbox/${basemapValue}`);\n\n        map.on('styledata', () => {\n          const waiting = () => {\n            if (!map.isStyleLoaded()) {\n              setTimeout(waiting, 200);\n            } else {\n              for (let i = 0; i < preserveLayers?.length; i += 1) {\n                const p = preserveLayers[i];\n                if (!map.getSource(p.layer.source)) {\n                  map.addSource(p.layer.source, p.source);\n                  map.addLayer(p.layer);\n                }\n              }\n            }\n          };\n          waiting();\n        });\n      });\n    }\n  }, [map]);\n\n  const basemapOptions = basemaps || [\n    {\n      name: 'Light',\n      key: 'Light',\n      label: 'Light',\n      value: 'light-v10',\n      checked: true\n    },\n    {\n      name: 'Dark',\n      key: 'Dark',\n      label: 'Dark',\n      value: 'dark-v10'\n    },\n    {\n      name: 'satellite',\n      key: 'satellite',\n      label: 'Satellite',\n      value: 'satellite-streets-v9',\n\n    }\n  ];\n\n  let switcher;\n\n  switch (switcherStyle) {\n    case 'radio':\n      switcher = (\n        <RadioGroup\n          items={basemapOptions}\n          name=\"basemaps\"\n          checkedValueChange={handleChange}\n        />\n      );\n      break;\n\n    case 'buttons':\n      // eslint-disable-next-line no-case-declarations\n      const buttons = basemapOptions.map((item) => {\n        return (\n          <Button key={item.label} onClick={(e) => handleChange(e, item)}>\n            {item.label}\n          </Button>\n        );\n      });\n\n      switcher = <ButtonGroup buttons={buttons} />;\n      break;\n    default:\n      switcher = (\n        <RadioGroup\n          items={basemapOptions}\n          name=\"basemaps\"\n          checkedValueChange={handleChange}\n        />\n      );\n      break;\n  }\n\n  return (\n    <BaseComponent\n    sx={{marginTop: '50vh'}}\n      baseType={baseType}\n      buttonOptions={{\n        icon: <FaMap />,\n        title: 'Basemap Switcher',\n        testId: 'cl-basemap-btn',\n        ...buttonOptions\n      }}\n      {...rest}\n      // type={switcherStyle === 'buttons' ? 'none' : 'panel'}\n      className=\"cl-basemap-switcher\"\n    >\n      <Text>\n      Choose basemap layer:\n      </Text>\n      {switcher}\n    </BaseComponent>\n  );\n};\n\nexport default BasemapSwitcher;\n","import config from '../config';\n\nconst mapOptions = {\n  container: 'map',\n  style: 'mapbox://styles/mapbox/light-v10',\n  center: [12, 50],\n  zoom: 3,\n  accessToken: config.mapboxToken\n};\n\nexport default mapOptions;\n","export default {\n  mapboxToken: 'pk.eyJ1IjoiZWxrYWxvbmFyaXMiLCJhIjoiY2twbXExOHcwMDg3ZzJvbnc0dXhyOWszOSJ9.AetSK7t4L_aaFVsCuNQmHg'\n};\n","import React, { useState } from 'react';\n// import { ThemeProvider as EmotionProvider } from 'emotion-theming';\nimport { ThemeProvider as ThemeUIProvider } from 'theme-ui';\nimport DefaultContext from '../../DefaultContext';\n\nconst ElementsProvider = ({\n  children,\n  context,\n  theme,\n  // themeUI,\n  mapOverride\n}) => {\n  const ctx = context || DefaultContext;\n  const ContextProvider = ctx.Provider || ctx;\n  const [map, setMap] = useState(null);\n\n  const value = {\n    map: mapOverride || map,\n    setMap\n  };\n\n  // let provider = (\n  //   <EmotionProvider theme={theme || {}}>{children}</EmotionProvider>\n  // );\n\n  // if (themeUI === true) {\n  //   provider = (\n  //     <ThemeUIProvider theme={theme || {}}>{children}</ThemeUIProvider>\n  //   );\n  // }\n\n  const provider = (\n    <ThemeUIProvider theme={theme || {}}>{children}</ThemeUIProvider>\n  );\n\n  return <ContextProvider value={value}>{provider}</ContextProvider>;\n};\n\nexport default ElementsProvider;\n","import { /* React, */ useContext, useState } from 'react';\nimport { ScaleControl } from 'mapbox-gl';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\n\nconst ScaleBar = (props) => {\n  const { position, maxWidth, unit } = props;\n  const [scale /* setScale */] = useState(\n    new ScaleControl({\n      maxWidth: maxWidth || 100,\n      unit: unit || 'metric'\n    })\n  );\n  const config = useContext(Context);\n  const { map } = config;\n\n  if (!mapExists(map)) {\n    return null;\n  }\n\n  const ctrlPosition = position || 'bottom-left';\n\n  // if we don't limit the addition to the map load event, we can\n  // end up adding a lot of controls. For example, without this, the knobs\n  // in Storybook added multiple versions of the component. I've tinkered with\n  // trying to remove controls after comparing state, but so far no luck\n  map.on('load', () => {\n    map.addControl(scale, ctrlPosition);\n  });\n\n  return null; // no component returned for mapbox controls\n};\n\nexport default ScaleBar;\n","/** @jsxImportSource theme-ui */\nimport {\n  Container,\n  Label,\n  Select,\n  Input,\n  Grid,\n  Box,\n  Text,\n  Close,\n  Link\n} from 'theme-ui';\nimport { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport { CompactPicker } from 'react-color';\n\nconst LabelMaker = ({ x, y, target, theme }) => {\n  target.style.padding = '4px';\n  target.style.textShadow = 'none';\n\n  const [hidden, setHidden] = useState(false);\n\n  const [textColor, setTextColor] = useState(target.style.color || 'black');\n  const [backgroundColor, setBackgroundColor] = useState(\n    target.style.backgroundColor || 'white'\n  );\n\n  const [colorPickerActive, setColorPickerActive] = useState(false);\n  const [currentColorPicker, setCurrentColorPicker] = useState(false);\n\n  const updateText = (e) => {\n    target.innerHTML = e.target.value.toUpperCase();\n  };\n\n  const updateFontSize = (e) => {\n    target.style.fontSize = `${e.target.value}px`;\n  };\n\n  const updateFontFamily = (e) => {\n    target.style.fontFamily = e.target.value;\n  };\n\n  const updateFontWeight = (e) => {\n    target.style.fontWeight = e.target.value;\n  };\n\n  const updateColors = (color) => {\n    const { hex } = color;\n    if (currentColorPicker === 'fg') {\n      target.style.color = hex;\n      setTextColor(hex);\n    } else if (currentColorPicker === 'bg') {\n      target.style.backgroundColor = hex;\n      setBackgroundColor(hex);\n    }\n  };\n\n  return (\n    <Draggable handle=\".handle\">\n      <Box\n        sx={{\n          position: 'absolute',\n          top: `${y}px`,\n          left: `${x}px`,\n          zIndex: 99,\n          backgroundColor: 'white',\n          width: '280px',\n          borderRadius: '9px',\n          display: hidden ? 'none' : ''\n        }}\n      >\n        <Container\n          className=\"handle\"\n          sx={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            backgroundColor: theme.colors.primary,\n            borderTopLeftRadius: '9px',\n            borderTopRightRadius: '9px',\n            padding: '5px'\n          }}\n        >\n          <Text sx={{ color: 'white', fontFamily: theme.fonts.body }}>\n            Label Editor\n          </Text>\n          <Close\n            sx={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              color: 'white',\n              cursor: 'pointer'\n            }}\n            onClick={() => {\n              setHidden(true);\n            }}\n          />\n        </Container>\n\n        <Container>\n          <Box sx={{ margin: '2.5px' }}>\n            <Label sx={{ fontFamily: theme.fonts.body }} htmlFor=\"label-edit\">\n              Label\n            </Label>\n            <Input\n              placeholder={target.innerHTML}\n              name=\"label-edit\"\n              id=\"label-edit\"\n              onChange={updateText}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-size-edit\"\n            >\n              Font Size\n            </Label>\n            <Input\n              placeholder={target.style.fontSize.replace('px', '') || '12'}\n              name=\"font-size-edit\"\n              id=\"font-size-edit\"\n              onChange={updateFontSize}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-family-edit\"\n            >\n              Font Family\n            </Label>\n            <Select\n              name=\"font-family-edit\"\n              id=\"font-family-edit\"\n              mb={1}\n              onChange={updateFontFamily}\n              sx={{ padding: '2px' }}\n            >\n              <option value=\"serif\">Serif</option>\n              <option value=\"sans-serif\">Sans-Serif</option>\n              <option value=\"cursive\">Cursive</option>\n              <option value=\"monospace\">Monospace</option>\n              <option value=\"fantasy\">Fantasy</option>\n            </Select>\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-weight-edit\"\n            >\n              Font Weight\n            </Label>\n            <Input\n              placeholder={target.style.fontWeight || 200}\n              name=\"font-weight-edit\"\n              id=\"font-weight-edit\"\n              onChange={updateFontWeight}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Box\n              sx={{ textAlign: currentColorPicker === 'fg' ? 'left' : 'right' }}\n              mb={1}\n            >\n              {colorPickerActive ? (\n                <CompactPicker onChange={updateColors} />\n              ) : (\n                ''\n              )}\n            </Box>\n\n            <Grid gap={2} mb={1} columns={[2, '1fr 1fr']}>\n              <Box\n                bg={textColor}\n                onClick={() => {\n                  if (currentColorPicker === 'fg') {\n                    setColorPickerActive(false);\n                    setCurrentColorPicker(false);\n                  } else {\n                    setColorPickerActive(true);\n                    setCurrentColorPicker('fg');\n                  }\n                }}\n                sx={{\n                  color: 'white',\n                  cursor: 'pointer',\n                  border:\n                    currentColorPicker === 'fg' ? 'solid greenyellow 3px' : ''\n                }}\n              >\n                FG\n              </Box>\n              <Box\n                bg={backgroundColor}\n                onClick={() => {\n                  if (currentColorPicker === 'bg') {\n                    setColorPickerActive(false);\n                    setCurrentColorPicker(false);\n                  } else {\n                    setColorPickerActive(true);\n                    setCurrentColorPicker('bg');\n                  }\n                }}\n                sx={{\n                  cursor: 'pointer',\n                  border:\n                    currentColorPicker === 'bg' ? 'solid greenyellow 3px' : ''\n                }}\n              >\n                BG\n              </Box>\n            </Grid>\n\n            <Box p={2} sx={{ textAlign: 'center' }}>\n              <Link\n                sx={{ color: '#a70000', fontFamily: theme.fonts.body }}\n                href=\"#!\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  const choice = window.confirm('are you sure');\n                  if (choice) {\n                    target.parentNode.removeChild(target);\n                    setHidden(true);\n                  }\n                }}\n              >\n                Delete Label\n              </Link>\n            </Box>\n          </Box>\n        </Container>\n      </Box>\n    </Draggable>\n  );\n};\n\nexport default LabelMaker;\n","// custom text mode for mapbox draw\nimport mapboxgl from 'mapbox-gl';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport LabelMaker from './LabelMaker';\n\nconst GetTextMode = (theme) => {\n  const TextMode = {};\n\n  // /**\n  //  * @param {String} HTML representing a single element\n  //  * @return {Element}\n  //  */\n  function htmlToElement(html) {\n    const template = document.createElement('template');\n    template.innerHTML = html.trim(); // Never return a text node of whitespace as the result\n    return template.content.firstChild;\n  }\n\n  // When the mode starts this function will be called.\n  // The `opts` argument comes from `draw.changeMode('lotsofpoints', {count:7})`.\n  // The value returned should be an object and will be passed to all other lifecycle functions\n  TextMode.onSetup = function (/* opts */) {\n    const state = {};\n    // state.count = opts.count || 0;\n    return state;\n  };\n\n  // Whenever a user clicks on the map, Draw will call `onClick`\n  TextMode.onClick = function (state, e) {\n    // `this.newFeature` takes geojson and makes a DrawFeature\n    const point = this.newFeature({\n      type: 'Feature',\n      // properties: {\n      //   count: state.count\n      // },\n      geometry: {\n        type: 'Point',\n        coordinates: [e.lngLat.lng, e.lngLat.lat]\n      }\n    });\n    // this.addFeature(point); // puts the point on the map\n\n    const marker = new mapboxgl.Marker({\n      element: htmlToElement(\n        // `<input class='cc-draw-text' style='text-align: center;' onkeypress=\"this.style.width = ((this.value.length + 1) * 8) + 'px';\" />`\n        `<p class=\"cl-draw-text\" style=\"text-shadow:0 0 4px #FFFFFF;text-stroke: .1em #FFFFFF; webkit-text-stroke = .1em #FFFFFF; cursor: context-menu\" title=\"Right click to edit label style\">New Label</p>`\n      ),\n      // element: document.createElement('input'),\n      draggable: true\n    });\n\n    marker.getElement().addEventListener('contextmenu', (clickEvent) => {\n      const exists = document.getElementById('label-maker');\n      if (exists) {\n        exists.parentNode.removeChild(exists);\n      }\n      const container = document.createElement('div');\n      container.id = 'label-maker';\n      document.body.appendChild(container);\n      ReactDOM.render(\n        <LabelMaker\n          x={clickEvent.clientX + 50}\n          y={clickEvent.clientY + 25}\n          target={clickEvent.target}\n          theme={theme}\n        />,\n        container\n      );\n    });\n\n    marker.setLngLat(e.lngLat);\n    marker.addTo(this.map);\n\n    this.map.fire('draw.create', {\n      features: [point.toGeoJSON()]\n    });\n\n    this.changeMode('simple_select');\n  };\n\n  // Whenever a user clicks on a key while focused on the map, it will be sent here\n  TextMode.onKeyUp = function (state, e) {\n    if (e.keyCode === 27) return this.changeMode('simple_select');\n    return false;\n  };\n\n  // This is the only required function for a mode.\n  // It decides which features currently in Draw's data store will be rendered on the map.\n  // All features passed to `display` will be rendered, so you can pass multiple display features per internal feature.\n  // See `styling-draw` in `API.md` for advice on making display features\n  TextMode.toDisplayFeatures = function (state, geojson, display) {\n    display(geojson);\n  };\n\n  return TextMode;\n};\n\nexport default GetTextMode;\n","export default function allowMapInteractions(map, allow) {\n  // console.log(map, allow);\n  if (allow) {\n    map.boxZoom.enable();\n    map.scrollZoom.enable();\n    map.dragPan.enable();\n    map.dragRotate.enable();\n    map.keyboard.enable();\n    map.doubleClickZoom.enable();\n    map.touchZoomRotate.enable();\n  } else {\n    map.boxZoom.disable();\n    map.scrollZoom.disable();\n    map.dragPan.disable();\n    map.dragRotate.disable();\n    map.keyboard.disable();\n    map.doubleClickZoom.disable();\n    map.touchZoomRotate.disable();\n  }\n  // console.log(map.dragPan);\n}\n","import allowMapInteractions from './allowMapInteractions';\n\nconst StaticMode = {};\n\nStaticMode.onSetup = function() {\n  this.setActionableState(); // default actionable state is false for all actions\n  allowMapInteractions(this.map, false);\n  return {};\n};\n\nStaticMode.toDisplayFeatures = function(state, geojson, display) {\n  display(geojson);\n};\n\nexport default StaticMode;\n","/* eslint-disable no-param-reassign */\n\nimport React, { useState, useContext } from 'react';\nimport { Button, useThemeUI, Text } from 'theme-ui';\nimport {\n  MdDelete as DeleteIcon,\n  MdPlace as PointIcon,\n  MdTimeline as LineIcon,\n  MdTextFormat as TextIcon\n} from 'react-icons/md';\nimport { FaDrawPolygon as PolygonIcon, FaPencilAlt } from 'react-icons/fa';\n\n// import { useTheme } from 'emotion-theming';\nimport ButtonGroup from '../_primitives/ButtonGroup';\nimport Context from '../../DefaultContext';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport mapExists from '../../util/mapExists';\nimport GetTextMode from './textDrawMode';\nimport StaticMode from './staticDrawMode';\nimport allowMapInteractions from './allowMapInteractions';\nimport BaseComponent from '../_common/BaseComponent';\n\nconst Draw = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const {theme} = useThemeUI();\n\n  const config = useContext(Context);\n  const { map } = config;\n  const [drawControl, setDrawControl] = useState(null);\n  const [nextMode, setNextMode] = useState(null);\n\n  if (!mapExists(map)) {\n    return null;\n  }\n\n  async function startDraw(drawType) {\n    // console.log(`start drawing ${drawType}`);\n\n    const draw =\n      drawControl ||\n      (await import('@mapbox/mapbox-gl-draw').then(\n        ({ default: MapboxDraw }) =>\n          new MapboxDraw({\n            displayControlsDefault: false,\n            // eslint-disable-next-line prefer-object-spread\n            modes: Object.assign(\n              {\n                draw_text: GetTextMode(theme),\n                static: StaticMode\n              },\n              MapboxDraw.modes\n            )\n          })\n      ));\n\n    if (!drawControl) {\n      setDrawControl(draw);\n      map.addControl(draw);\n    }\n\n    const nm = drawType || 'simple_select';\n    setNextMode(nm);\n    draw.changeMode(nm);\n  }\n\n  function clearDrawings() {\n    if (drawControl) {\n      drawControl.deleteAll();\n      const el = document.getElementsByClassName('cl-draw-text');\n      while (el.length > 0) {\n        el[0].remove();\n      }\n    }\n  }\n\n  function hideTextArea(textEl) {\n    textEl.addEventListener('click', (/* e */) => {\n      allowMapInteractions(map, false);\n    });\n    textEl.style.backgroundColor = 'rgba(0, 0, 0, 0)';\n    textEl.style.borderStyle = 'none';\n    textEl.style.fontSize = '14px';\n    textEl.style.textShadow = '0 0 2px #FFFFFF';\n    textEl.style.textStroke = '.02em #FFFFFF';\n    textEl.style.webkitTextStroke = '.02em #FFFFFF';\n    textEl.style.resize = 'none';\n  }\n\n  function showTextArea(textEl) {\n    textEl.style.backgroundColor = '#FFFFFF';\n    textEl.style.borderStyle = 'inset';\n    // textEl.style.resize = 'both';\n    textEl.focus();\n  }\n\n  map.on('draw.create', (/* e */) => {\n    // console.log(nextMode);\n    if (nextMode === 'draw_text') {\n      // console.log('show text!');\n      const el = document.getElementsByClassName('cc-draw-text');\n      // console.log(el);\n\n      for (let i = 0; i < el.length; i += 1) {\n        el[i].focus();\n        el[i].addEventListener('click', () => {\n          // console.log('click');\n          drawControl.changeMode('static');\n          showTextArea(el[i]);\n        });\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      addEventListener('keyup', (e) => {\n        if (e.keyCode === 13) {\n          if (drawControl.getMode() === 'static') {\n            drawControl.changeMode('simple_select');\n            allowMapInteractions(map, true);\n          }\n          hideTextArea(el[el.length - 1]);\n        }\n      });\n      // eslint-disable-next-line no-restricted-globals\n      addEventListener('dblclick', () => {\n        if (drawControl.getMode() === 'static') {\n          drawControl.changeMode('simple_select');\n          allowMapInteractions(map, true);\n        }\n        hideTextArea(el[el.length - 1]);\n      });\n    }\n  });\n\n  return (\n    <BaseComponent\n    style={{zIndex:'9999999'}}\n      className=\"draw-tools\"\n      baseType={baseType || 'none'}\n      buttonOptions={{\n        icon: <FaPencilAlt />,\n        title: 'Draw',\n        testId: 'cl-draw-btn',\n        ...buttonOptions\n      }}\n      sx={{marginTop: '38vh',\n      minWidth: '400px'    }}\n      {...rest}\n    >\n        <Text>\n         Add markers, polygons and label positions on the map.\n        </Text>\n      <ButtonGroup\n      >\n\n        <Button\n          title=\"Draw Point\"\n          className=\"draw-tool draw-tool--point\"\n          onClick={() => startDraw('draw_point')}\n        >\n          <PointIcon />\n        </Button>\n        <Button\n          title=\"Draw Line\"\n          className=\"draw-tool draw-tool--line\"\n          onClick={() => startDraw('draw_line_string')}\n        >\n          <LineIcon />\n        </Button>\n        <Button\n          title=\"Draw Polygon\"\n          className=\"draw-tool draw-tool--polygon\"\n          onClick={() => startDraw('draw_polygon')}\n        >\n          <PolygonIcon />\n        </Button>\n        <Button\n          title=\"Draw Text\"\n          className=\"draw-tool draw-tool--text\"\n          onClick={() => {\n            startDraw('draw_text');\n          }}\n        >\n          <TextIcon />\n        </Button>\n        <Button\n          title=\"Delete Drawing\"\n          className=\"draw-tool draw-tool--delete\"\n          onClick={() => {\n            clearDrawings();\n          }}\n        >\n          <DeleteIcon />\n        </Button>\n      </ButtonGroup>\n    </BaseComponent>\n  );\n};\n\nexport default Draw;\n","import mapExists from '../../../util/mapExists';\n\nfunction loadBookmarks() {\n  return window.localStorage.getItem('ccBookmarks');\n}\n\nfunction goToBookmark(map, bookmark) {\n  if (!mapExists(map)) return false;\n  map.easeTo({\n    center: bookmark.center,\n    zoom: bookmark.zoom\n  });\n  return true;\n}\n\nfunction saveBookmark(map, name, setBookmarks) {\n  const existingBookmarks = loadBookmarks();\n\n  if (mapExists(map) && name) {\n    if (!existingBookmarks) {\n      const array = [\n        {\n          name,\n          // style: map.getStyle(),\n          zoom: map.getZoom(),\n          center: map.getCenter()\n        }\n      ];\n      window.localStorage.setItem('ccBookmarks', JSON.stringify(array));\n      setBookmarks(array);\n    } else {\n      const newItem = {\n        name,\n        // style: map.getStyle(),\n        zoom: map.getZoom(),\n        center: map.getCenter()\n      };\n      const existingArray = JSON.parse(existingBookmarks);\n      const newArray = [...existingArray, newItem];\n      window.localStorage.setItem('ccBookmarks', JSON.stringify(newArray));\n      setBookmarks(newArray);\n    }\n  }\n}\n\nfunction deleteBookmark(name, setBookmarks) {\n  const bookmarks = JSON.parse(loadBookmarks()).filter((bookmark) => {\n    return JSON.stringify(bookmark) !== JSON.stringify(name);\n  });\n  window.localStorage.setItem('ccBookmarks', JSON.stringify(bookmarks));\n  setBookmarks(bookmarks);\n}\n\nexport { goToBookmark, loadBookmarks, saveBookmark, deleteBookmark }\n","/* Bookmarks component. Allows users to save and recall map position (zoom, center) information */\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Button, Flex, Box, Text, Input } from 'theme-ui';\nimport { FaBookmark, FaTrashAlt } from 'react-icons/fa';\nimport BaseComponent from '../_common/BaseComponent';\nimport Context from '../../DefaultContext';\nimport {\n  goToBookmark,\n  loadBookmarks,\n  deleteBookmark,\n  saveBookmark\n} from './util/bookmarkActions';\nimport ListItem from '../_primitives/ListItem';\nimport List from '../_primitives/List';\n\nconst Bookmarks = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const { _goToBookmark, _loadBookmarks, _deleteBookmark, _saveBookmark } = {\n    _goToBookmark: Object.hasOwnProperty.call(rest, 'goToBookmark')\n      ? rest.goToBookmark\n      : goToBookmark,\n    _loadBookmarks: Object.hasOwnProperty.call(rest, 'loadBookmarks')\n      ? rest.loadBookmarks\n      : loadBookmarks,\n    _deleteBookmark: Object.hasOwnProperty.call(rest, 'deleteBookmark')\n      ? rest.deleteBookmark\n      : deleteBookmark,\n    _saveBookmark: Object.hasOwnProperty.call(rest, 'saveBookmark')\n      ? rest.saveBookmark\n      : saveBookmark\n  };\n\n  const config = useContext(Context);\n  const { map } = config;\n  const existingBookmarks = JSON.parse(_loadBookmarks()) || [];\n  const [bookmarkName, setBookmarkName] = useState('');\n  const [bookmarks, setBookmarks] = useState(existingBookmarks);\n  const [bookmarkListItems, setBookmarkListItems] = useState([]);\n\n  useEffect(() => {\n    const listItems = bookmarks.map((bkmk) => {\n      return (\n        <ListItem selectable key={bkmk.name}>\n          <Flex>\n            <Box\n              onClick={() => {\n                _goToBookmark(map, bkmk);\n              }}\n              sx={{ flex: '1 1 auto' }}\n            >\n              <FaBookmark />\n              {bkmk.name}\n            </Box>\n            <Box>\n              <FaTrashAlt\n                onClick={() => {\n                  _deleteBookmark(bkmk, setBookmarks);\n                }}\n              />\n            </Box>\n          </Flex>\n        </ListItem>\n      );\n    });\n    setBookmarkListItems(listItems);\n  }, [map, bookmarks]);\n\n  // let bookmarksComponent;\n  const toolText = (\n    <Text>\n      Save view as bookmark\n    </Text>\n  );\n  const form = (\n    <Flex>\n      <Input\n      sx ={{\n        backgroundColor: 'white',\n        opacity: 0.4,\n        color: 'blue'\n      }}\n      className='input-book'\n      placeholder='Save view as bookmark'\n        value={bookmarkName}\n        onChange={(e) => {\n          setBookmarkName(e.currentTarget.value);\n        }}\n      />\n      <Button\n      className= 'bookmark-button'\n        sx={{\n          borderTopLeftRadius: 0,\n          borderBottomLeftRadius: 0,\n          marginLeft: '-0.175rem',\n          backgroundColor: 'blue'\n        }}\n        onClick={() => {\n          _saveBookmark(map, bookmarkName, setBookmarks);\n\n          setBookmarkName('');\n        }}\n      >\n        Save\n      </Button>\n    </Flex>\n  );\n\n  return (\n    <BaseComponent\n    className=\"cl-bookmark-field\"\n      baseType={baseType}\n      buttonOptions={{\n        icon: <FaBookmark />,\n        title: 'Bookmarks',\n        testId: 'bookmark-btn',\n        ...buttonOptions\n      }}\n      sx={{minWidth: '400px',\n    marginTop:'75vh'}}\n      {...rest}\n    >\n      <Box>\n        {toolText}\n        {form}\n        <List>{bookmarkListItems}</List>\n      </Box>\n    </BaseComponent>\n  );\n};\n\nexport default Bookmarks;\n","export default __webpack_public_path__ + \"static/media/ESPON-logo.235f1bc5.png\";","import React from 'react';\nimport { Box, Image, Heading } from '@theme-ui/components';\nimport BaseComponent from './components/_common/BaseComponent';\nimport logo from './ESPON-logo.png'\n\nconst Sidebar = (props) =>{\n\nreturn(\n    <BaseComponent>\n    <Box\n    sx={{\n        minHeight: '120vh',\n        overflow: 'auto',\n        width: '430px',\n        backgroundColor: 'white',\n        position: 'fixed',\n        top: 0,\n        left: 0\n            }}>\n            <Image \n            src={logo}\n            sx={{\n                width: '200px',\n                padding: '10px'\n            }}\n            />\n            <Heading sx={{padding: '14px', fontFamily: 'sans-serif'}}>\n                ESPON Portal: Data playground\n            </Heading>\n    </Box>\n    \n    </BaseComponent>\n)\n        }\nexport default Sidebar;","// Copying this, until ThemeUI merges this PR https://github.com/system-ui/theme-ui/pull/1035\n\nimport React from 'react';\nimport { Box } from 'theme-ui';\n\nconst GUTTER = 2;\nconst SIZE = 18;\n\nconst Switch = React.forwardRef(\n  ({ className, sx, variant = 'switch', ...props }, ref) => {\n    return (\n      <Box>\n        <Box\n          ref={ref}\n          as=\"input\"\n          type=\"checkbox\"\n          __themeKey=\"forms\"\n          {...props}\n          sx={{\n            position: 'absolute',\n            opacity: 0,\n            zIndex: -1,\n            width: 1,\n            height: 1,\n            overflow: 'hidden'\n          }}\n        />\n        <Box\n          css={{\n            padding: GUTTER\n          }}\n          __themeKey=\"forms\"\n          variant={variant}\n          className={className}\n          sx={sx}\n          __css={{\n            position: 'relative',\n            bg: 'gray',\n            borderRadius: SIZE,\n            height: SIZE + GUTTER * 2,\n            width: SIZE * 2 + GUTTER * 2,\n            mr: 2,\n            cursor: 'pointer',\n\n            'input:disabled ~ &': {\n              opacity: 0.5,\n              cursor: 'not-allowed'\n            },\n\n            '& > div': {\n              display: 'flex',\n              alignItems: 'center',\n              borderRadius: '50%',\n              height: SIZE,\n              width: SIZE,\n              bg: 'white',\n              boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n              position: 'relative',\n              transform: 'translateX(0%)',\n              transition: `transform 240ms cubic-bezier(0.165, 0.840, 0.440, 1.000)`\n            },\n\n            'input:checked ~ &': {\n              bg: 'primary',\n              '> div': {\n                transform: 'translateX(100%)'\n              }\n            }\n          }}\n          {...props}\n        >\n          <Box />\n        </Box>\n      </Box>\n    );\n  }\n);\n\nexport default Switch;\n","/** @jsxImportSource theme-ui */\n/*  eslint-disable no-underscore-dangle */\nimport { Box, Text } from 'theme-ui';\nimport List from '../_primitives/List';\nimport ListItem from '../_primitives/ListItem';\n\nconst buildStyle = (lyr) => {\n  const { type } = lyr;\n  \n  // fill-color, fill-opacity, fill-outline-color, fill-pattern\n  function fill(paint) {\n    let fc;\n    let foc;\n    const fcValue = paint.get('fill-color').value;\n    const focValue = paint.get('fill-outline-color').value;\n    const foValue = paint.get('fill-opacity').value?.value || 1;\n    // Is this a data driven paint style?\n    if (\n      fcValue._parameters &&\n      Object.prototype.hasOwnProperty.call(fcValue._parameters, 'stops')\n      // fcValue._parameters.hasOwnProperty('stops')\n    ) {\n      // fc = fcValue._parameters.stops.map((s) => {\n      //   return [s[0], s[1]];\n      // });\n      fc = fcValue._parameters.stops;\n      if (fcValue._parameters.default) {\n        fc = [...fc, ['', fcValue._parameters.default]];\n      }\n    } else if  (\n      fcValue._styleExpression\n    ) {\n      const flattened = [];\n      Object.keys(fcValue._styleExpression.expression.cases).forEach(k => {\n        const value = fcValue._styleExpression.expression\n          .outputs[+fcValue._styleExpression.expression.cases[k]].value.toString();\n        const item = [k, value];\n        flattened.push(item);\n      });\n      if(fcValue._styleExpression.expression.otherwise) {\n        flattened.push(['', fcValue._styleExpression.expression.otherwise.value.toString()]);\n      }\n      fc = flattened;\n    } else {\n      fc = [fcValue.value.toString()];\n    }\n\n    if (\n      focValue._parameters &&\n      Object.prototype.hasOwnProperty.call(focValue._parameters, 'stops')\n    ) {\n      // foc = focValue._parameters.stops.map((s) => {\n      //   return [s[0], s[1]];\n      // });\n      foc = focValue._parameters.stops;\n      if (focValue._parameters.default) {\n        foc = [...fc, ['', focValue._parameters.default]];\n      }\n    } else if  (\n      focValue._styleExpression\n    ) {\n      const flattened = [];\n      Object.keys(focValue._styleExpression.expression.cases).forEach(k => {\n        const value = focValue._styleExpression.expression\n          .outputs[+focValue._styleExpression.expression.cases[k]].value.toString();\n        const item = [k, value];\n        flattened.push(item);\n      });\n      if(focValue._styleExpression.expression.otherwise) {\n        flattened.push(['', focValue._styleExpression.expression.otherwise.value.toString()]);\n      }\n      foc = flattened;\n    } else {\n      foc = [focValue.value.toString()];\n    }\n\n    const Items = () => {\n      let styles = [];\n      if (fc.length > 1) {\n        styles = fc.map((l) => {\n          return [...l, foc[0]];\n        });\n      } else if (foc.length > 1) {\n        styles = foc.map((l) => {\n          l.splice(1,0,fc[0]);\n          return l;\n        });\n      } else {\n        styles = [[null, fc[0], foc[0]]];\n      }\n\n      const svgs = styles.map((s, i) => {\n        return (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            sx={{\n              margin: 0,\n              marginLeft: 4,\n              padding: 0,\n              display: 'flex'\n            }}\n          >\n            <Box>\n              <svg width=\"25\" height=\"25\">\n                <rect\n                  x=\"0\"\n                  y=\"0\"\n                  rx=\"0\"\n                  ry=\"0\"\n                  width=\"25\"\n                  height=\"25\"\n                  sx={{\n                    fill: s[1],\n                    stroke: s[2],\n                    strokeWidth: 3,\n                    fillOpacity: foValue,\n                    strokeOpacity: foValue\n                  }}\n                />\n              </svg>\n            </Box>\n            <Box>\n              <Text sx={{ padding: '3px' }}>{s[0]}</Text>\n            </Box>\n          </ListItem>\n        );\n      });\n\n      return <Box>{svgs}</Box>;\n    };\n\n    return (\n      <List\n        sx={{\n          margin: 0,\n          padding: 0\n        }}\n      >\n        <Items />\n      </List>\n    );\n  }\n\n  // circle-color, circle-opacity, circle-stroke-color, circle-stroke-opacity, circle-radius\n  function circle(paint) {\n    // circle-color, circle-stroke-color, circle-radius\n    /* csc, */ let cr;\n    let flexGrow;\n    let textAlign;\n\n    // Is circle-color a data driven paint style?\n    const cc = paint.get('circle-color').value.value.toString();\n    // if(paint.get('circle-color').value._parameters && paint.get('circle-color').value._parameters.hasOwnProperty('stops')) {\n    //   cc = paint.get('circle-color').value._parameters.stops;\n    // } else {\n    //   cc = [paint.get('circle-color').value.value.toString()];\n    // }\n\n    // Is circle-stroke-color a data driven paint style?\n    // csc = paint.get('circle-stroke-color').value.value.toString()\n    // if(paint.get('circle-stroke-color').value._parameters && paint.get('circle-stroke-color').value._parameters.hasOwnProperty('stops')) {\n    //   csc = paint.get('circle-color').value._parameters.stops;\n    // } else {\n    //   csc = [paint.get('circle-stroke-color').value.value.toString()];\n    // }\n    const crValue = paint.get('circle-radius').value;\n    // Is circle-radius a data driven paint style?\n    if (\n      crValue._parameters &&\n      Object.prototype.hasOwnProperty.call(crValue._parameters, 'stops') &&\n      crValue.kind === 'source'\n    ) {\n      flexGrow = 6;\n      textAlign = 'center';\n      cr = crValue._parameters.stops;\n      if (crValue._parameters.default) {\n        cr = [...cr, ['', crValue._parameters.default]];\n      }\n    } else {\n      flexGrow = 1;\n      textAlign = 'left';\n      cr = [crValue.value.toString()];\n      if (+cr[0] < 8) {\n        cr = ['8'];\n      }\n    }\n\n    const Items = () => {\n      let styles = [];\n      if (cr.length > 1) {\n        styles = cr.map((l) => {\n          return [...l];\n        });\n      } else {\n        styles = [[null, cr[0]]];\n      }\n\n      const svgs = styles.map((s, i) => {\n        const cSize = +s[1] + +s[1] * 0.75;\n        return (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            sx={{\n              margin: 0,\n              marginLeft: 4,\n              padding: 0,\n              display: 'flex'\n            }}\n          >\n            <Box sx={{ flexGrow, textAlign }}>\n              <svg width={cSize} height={cSize}>\n                <circle\n                  cx={cSize / 2.0}\n                  cy={cSize / 2.0}\n                  r={cSize / 2.0 - 0.5}\n                  sx={{\n                    fill: cc\n                  }}\n                />\n              </svg>\n            </Box>\n            <Box\n              sx={{\n                flexGrow: 1,\n                lineHeight: s[1] >= 10 ? `${+s[1] * 1.8388 - 7.5}px` : '15px'\n              }}\n            >\n              <Text sx={{ padding: '3px' }}>{s[0]}</Text>\n            </Box>\n          </ListItem>\n        );\n      });\n\n      return <Box>{svgs}</Box>;\n    };\n\n    return (\n      <List\n        sx={{\n          margin: 0,\n          padding: 0\n        }}\n      >\n        <Items />\n      </List>\n    );\n  }\n\n  // line-cap, line-join, line-opacity, line-color, line-width, line-dasharray, line-gradient\n  function line(paint) {\n    let lc;\n    const lcValue = paint.get('line-color').value;\n    const { kind } = lcValue;\n    if (kind === 'source' || kind === 'constant') {\n      // is it a data-driven style?\n      if (\n        lcValue._parameters &&\n        Object.prototype.hasOwnProperty.call(lcValue._parameters, 'stops')\n      ) {\n        lc = lcValue._parameters.stops;\n        if (lcValue._parameters.default) {\n          lc = [...lc, ['', lcValue._parameters.default]]\n        }\n      } else if  (\n        lcValue._styleExpression\n      ) {\n        const flattened = [];\n        Object.keys(lcValue._styleExpression.expression.cases).forEach(k => {\n          const value = lcValue._styleExpression.expression\n            .outputs[+lcValue._styleExpression.expression.cases[k]].value.toString();\n          const item = [k, value];\n          flattened.push(item);\n        });\n        if(lcValue._styleExpression.expression.otherwise) {\n          flattened.push(['', lcValue._styleExpression.expression.otherwise.value.toString()]);\n        }\n        lc = flattened;\n      } else {\n        lc = [lcValue.value.toString()];\n      }\n\n      const Items = () => {\n        let styles = [];\n        if (lc.length > 1) {\n          styles = lc.map((l) => {\n            return [...l];\n          });\n        } else {\n          styles = [[null, lc[0]]];\n        }\n\n        const svgs = styles.map((s, i) => {\n          return (\n            <ListItem\n              // eslint-disable-next-line react/no-array-index-key\n              key={i}\n              sx={{\n                margin: 0,\n                marginLeft: 4,\n                padding: 0,\n                display: 'flex',\n                alignItems: 'flex-start',\n                justifyContent: 'flex-start'\n              }}\n            >\n              <Box>\n                <svg width=\"25\" height=\"25\">\n                  <rect\n                    x=\"0\"\n                    y=\"3.75\"\n                    rx=\"0\"\n                    ry=\"0\"\n                    width=\"25\"\n                    height=\"7.5\"\n                    sx={{ fill: s, strokeWidth: 2 }}\n                  />\n                </svg>\n              </Box>\n              <Box px={1}>\n                <Text>{s[0]}</Text>\n              </Box>\n            </ListItem>\n          );\n        });\n\n        return <Box>{svgs}</Box>;\n      };\n\n      return (\n        <List\n          sx={{\n            margin: 0,\n            padding: 0\n          }}\n        >\n          <Items />\n        </List>\n      );\n    }\n    if (paint.get('line-color').value.kind === 'composite') {\n      try {\n        lc = paint\n          .get('line-color')\n          .value._styleExpression.expression.outputs[0].outputs[0].value.toString();\n        return (\n          <List\n            sx={{\n              margin: 0,\n              marginLeft: 4,\n              padding: 0\n            }}\n          >\n            <ListItem sx={{ margin: 0, marginLeft: 4, padding: 0 }}>\n              <svg width=\"25\" height=\"25\">\n                <rect\n                  x=\"0\"\n                  y=\"0\"\n                  rx=\"0\"\n                  ry=\"0\"\n                  width=\"25\"\n                  height=\"7.5\"\n                  sx={{ fill: lc, strokeWidth: 2 }}\n                />\n              </svg>\n            </ListItem>\n          </List>\n        );\n      } catch (err) {\n        console.error(err);\n        return false;\n      }\n    } else {\n      // todo: determine color from other line types\n      return false;\n    }\n  }\n\n  function symbol(/* val */) {\n    console.log('legend cannot render symbol yet');\n    return false;\n  }\n\n  function heatmap(/* val */) {\n    console.log('legend cannot render heatmap yet');\n    return false;\n  }\n\n  function fillExtrusion(/* val */) {\n    console.log('legend cannot render fill-extrusion yet');\n    return false;\n  }\n\n  function raster(/* val */) {\n    console.log('legend cannot render raster yet');\n    return false;\n  }\n\n  function hillshade(/* val */) {\n    console.log('legend cannot render hillshade yet');\n    return false;\n  }\n\n  function background(/* val */) {\n    console.log('legend cannot render background yet');\n    return false;\n  }\n\n  // https://docs.mapbox.com/mapbox-gl-js/style-spec/#layers\n  try {\n    switch (type) {\n      case 'fill':\n        return fill(lyr.paint);\n      case 'circle':\n        return circle(lyr.paint);\n      case 'line':\n        return line(lyr.paint);\n      case 'symbol':\n        return symbol(lyr.paint);\n      case 'heatmap':\n        return heatmap(lyr.paint);\n      case 'fill-extrusion':\n        return fillExtrusion(lyr.paint);\n      case 'raster':\n        return raster(lyr.paint);\n      case 'hillshade':\n        return hillshade(lyr.paint);\n      case 'background':\n        return background(lyr.paint);\n      default:\n        return false;\n    }\n  } catch (err) {\n    // top level error handling.... better just to render nothing\n    console.warn(err);\n    return false;\n  }\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport { buildStyle };\n/*  eslint-enable no-underscore-dangle */\n","import mapExists from '../../../util/mapExists';\n\nexport default function toggleLayerVisibility(map, layerId, checked) {\n  if (!mapExists(map)) return false;\n  if (checked) {\n    map.setLayoutProperty(layerId, 'visibility', 'visible');\n  } else {\n    map.setLayoutProperty(layerId, 'visibility', 'none');\n  }\n  return true;\n}\n","/** @jsxImportSource theme-ui */\nimport {\n  Menu,\n  MenuButton,\n  MenuItem,\n  MenuPopover,\n  MenuItems\n} from '@reach/menu-button';\nimport '@reach/menu-button/styles.css';\n\nconst LayerActionsMenu = ({ layerActions }) => {\n  if (layerActions && layerActions.length > 0) {\n    return (\n      <Menu className=\"cl-layer-list-action-menu\">\n        <MenuButton\n          sx={{\n            color: 'text',\n            bg: 'background',\n            borderStyle: 'none',\n            fontSize: 1,\n            ':hover': {\n              cursor: 'pointer'\n            }\n          }}\n        >\n          ...\n        </MenuButton>\n        <MenuPopover sx={{ zIndex: 3, fontFamily: 'body' }}>\n          <MenuItems>\n            {layerActions.map((action) => {\n              return (\n                <MenuItem\n                  key={action.title}\n                  onSelect={() => {\n                    action.action();\n                  }}\n                >\n                  {action.title}\n                </MenuItem>\n              );\n            })}\n          </MenuItems>\n        </MenuPopover>\n      </Menu>\n    );\n  }\n  return null;\n};\n\nexport default LayerActionsMenu;\n","import React, { useState, useEffect } from 'react';\nimport { Flex, Box, Text, Label, Checkbox, IconButton } from 'theme-ui';\nimport { FaEye, FaEyeSlash } from 'react-icons/fa';\nimport Switch from '../_primitives/Switch';\nimport ListItem from '../_primitives/ListItem';\nimport mapExists from '../../util/mapExists';\nimport { buildStyle } from './Legend';\nimport toggleLayerVisibility from './util/toggleLayerVisibility';\nimport LayerActionsMenu from './LayerActionsMenu';\n\nconst LayerListItem = ({\n  layerInfo,\n  map,\n  legend,\n  showActions,\n  itemActions,\n  checkboxStyle,\n  baseType\n}) => {\n  const [isChecked, setIsChecked] = useState(false);\n  const [checkbox, setCheckbox] = useState(null);\n  const [style, setStyle] = useState();\n  const [legendVisibility, setLegendVisibility] = useState(!!legend);\n\n  const { layerIds } = layerInfo;\n\n  const handleChange = (e) => {\n    const { checked } = e.currentTarget;\n    layerIds.map((layerId) => {\n      if (checked || !isChecked) {\n        setIsChecked(true);\n        toggleLayerVisibility(map, layerId, true);\n      } else {\n        setIsChecked(false);\n        toggleLayerVisibility(map, layerId, false);\n      }\n      return true;\n    });\n  };\n\n  const showHideLegend = (e) => {\n    if (legend) {\n      e.preventDefault();\n    } else {\n      return;\n    }\n    setLegendVisibility(!legendVisibility);\n  };\n\n  useEffect(() => {\n    switch (checkboxStyle) {\n      case 'check':\n        setCheckbox(<Checkbox onChange={handleChange} checked={isChecked} />);\n        break;\n      case 'switch':\n        setCheckbox(<Switch checked={isChecked} onChange={handleChange} />);\n        break;\n      case 'eye':\n        if (isChecked) {\n          setCheckbox(\n            <IconButton\n              onClick={handleChange}\n              sx={{\n                alignItems: 'baseline'\n              }}\n            >\n              <FaEye />\n            </IconButton>\n          );\n        } else {\n          setCheckbox(\n            <IconButton\n              onClick={handleChange}\n              sx={{\n                alignItems: 'baseline'\n              }}\n            >\n              <FaEyeSlash />\n            </IconButton>\n          );\n        }\n\n        break;\n      default:\n        setCheckbox(<Checkbox checked={isChecked} onChange={handleChange} />);\n        break;\n    }\n  }, [checkboxStyle, isChecked]);\n\n  useEffect(() => {\n    let layerVisibility;\n    let checked;\n    if (mapExists(map)) {\n      const setCurrentState = () => {\n        layerVisibility = map.getLayoutProperty(layerIds[0], 'visibility');\n        checked = layerVisibility !== 'none';\n        setIsChecked(checked);\n        if (legend) {\n          setStyle(\n            layerInfo.legendStyle\n              ? layerInfo.legendStyle()\n              : buildStyle(map.getLayer(layerIds[0]))\n          );\n        }\n      };\n      if (Object.keys(map).length > 0) {\n        if (baseType && baseType === 'button') {\n          try {\n            setCurrentState();\n          } catch (e) {\n            if (e instanceof TypeError) {\n              map.once('idle', () => {\n                setCurrentState();\n              });\n            }\n          }\n        } else {\n          map.once('idle', () => {\n            setCurrentState();\n          });\n        }\n      }\n    }\n  }, [map, layerInfo]);\n\n  let actionMenuSlot;\n\n  if (showActions) {\n    actionMenuSlot = <LayerActionsMenu layerActions={itemActions} />;\n  } else {\n    actionMenuSlot = null;\n  }\n\n  const LegendListItem = () => {\n    return (\n      <Box sx={{ display: legendVisibility ? '' : 'none' }}>\n        <ListItem\n          css={{ display: legend && style ? '' : 'none' }}\n          key={`${layerInfo.layerName}-legend`}\n        >\n          {style}\n        </ListItem>\n      </Box>\n    );\n  };\n\n  return (\n    <Box className=\"listItem\">\n      <ListItem key={layerInfo.layerName}>\n        <Flex>\n          <Label>\n            {checkbox}\n            <Text\n              pt={1}\n              sx={{\n                fontWeight: 'bold',\n                cursor: 'pointer',\n                ':hover': { textDecoration: 'underline' }\n              }}\n              onClick={showHideLegend}\n            >\n              {layerInfo.layerName}\n            </Text>\n          </Label>\n          {actionMenuSlot}\n        </Flex>\n      </ListItem>\n      {legend ? <LegendListItem /> : null}\n    </Box>\n  );\n};\n\nexport default LayerListItem;\n","import React, { useState, useEffect } from 'react';\nimport { Flex, Box, Text, Label, Radio } from 'theme-ui';\nimport ListItem from '../_primitives/ListItem';\nimport mapExists from '../../util/mapExists';\nimport { buildStyle } from './Legend';\nimport LayerActionsMenu from './LayerActionsMenu';\n\nconst GroupLayerItem = ({\n  layerInfo,\n  map,\n  legend,\n  showActions,\n  itemActions,\n  group,\n  callback, // toggleGroupLayers,\n  activeOnLoad\n}) => {\n  const [style, setStyle] = useState();\n\n  const { layerIds } = layerInfo;\n\n  const handleRadioChange = (e) => {\n    const value = e.currentTarget.value.split(',');\n    callback(value);\n  };\n\n  useEffect(() => {\n    // let layerVisibility;\n    // let checked;\n    if (mapExists(map)) {\n      if (Object.keys(map).length > 0) {\n        map.once('idle', () => {\n          // const layerVisibility = map.getLayoutProperty(\n          //   layerIds[0],\n          //   'visibility'\n          // );\n          // checked = layerVisibility !== 'none';\n          if (legend) {\n            setStyle(\n              layerInfo.legendStyle\n                ? layerInfo.legendStyle()\n                : buildStyle(map.getLayer(layerIds[0]))\n            );\n          }\n        });\n      }\n    }\n  }, [map, layerInfo]);\n\n  let actionMenuSlot;\n\n  if (showActions) {\n    actionMenuSlot = <LayerActionsMenu layerActions={itemActions} />;\n  } else {\n    actionMenuSlot = null;\n  }\n\n  const LegendListItem = () => {\n    return (\n      <Box>\n        <ListItem\n          css={{ display: legend && style ? '' : 'none' }}\n          key={`${layerInfo.layerName}-legend`}\n        >\n          {style}\n        </ListItem>\n      </Box>\n    );\n  };\n\n  return (\n    <Box className=\"listItem\">\n      <ListItem key={layerInfo.layerName}>\n        <Flex>\n          <Label>\n            <Radio\n              name={group}\n              onChange={(e) => {\n                handleRadioChange(e);\n              }}\n              value={layerInfo.layerIds}\n              defaultChecked={activeOnLoad}\n            />\n            <Text pt={1}>{layerInfo.layerName}</Text>\n          </Label>\n          {actionMenuSlot}\n        </Flex>\n      </ListItem>\n      {legend ? <LegendListItem /> : null}\n    </Box>\n  );\n};\n\nexport default GroupLayerItem;\n","import React, { useState } from 'react';\nimport { Checkbox, Flex, Text, Label, Box } from 'theme-ui';\nimport ListItem from '../_primitives/ListItem';\nimport List from '../_primitives/List';\nimport toggleLayerVisibility from './util/toggleLayerVisibility';\nimport GroupLayerItem from './GroupLayerItem';\n// import mapExists from '../../util/mapExists';\n\nconst GroupLayer = ({ group, map, legend, showOnLoad = true }) => {\n  const [isChecked, setIsChecked] = useState(showOnLoad);\n\n  let layers = group.layers.map((layer) => {\n    const ids = layer.layerIds.map((id) => {\n      return id;\n    });\n    return ids;\n  });\n\n  layers = layers.flat();\n\n  /* TO DO: figure out how to configure whether the group is visible or not on load */\n  // useEffect(() => {\n  //   let layerVisibility, checked;\n  //   if (mapExists(map)) {\n  //     if (Object.keys(map).length > 0) {\n  //       map.once('idle', () => {\n\n  //         layerVisibility = map.getLayoutProperty(layerIds[0], 'visibility');\n  //         checked = layerVisibility === 'none' ? false : true;\n  //         setIsChecked(checked);\n  //         if (legend) {\n  //           setStyle(\n  //             layerInfo.legendStyle\n  //               ? layerInfo.legendStyle()\n  //               : buildStyle(map.getLayer(layerIds[0]))\n  //           );\n  //         }\n  //       });\n  //     }\n  //   }\n  // }, [map, layerInfo]);\n\n  const handleChange = (e) => {\n    const { checked } = e.currentTarget;\n    if (checked) {\n      setIsChecked(true);\n      layers.map((layerId) => {\n        toggleLayerVisibility(map, layerId, true);\n        return true;\n      });\n    } else {\n      setIsChecked(false);\n      layers.map((layerId) => {\n        toggleLayerVisibility(map, layerId, false);\n        return true;\n      });\n    }\n  };\n\n  const toggleGroupLayers = (layerArray) => {\n    // make sure layers sent in are in the group\n    const onLayers = layers.filter((layer) => {\n      return layerArray.includes(layer);\n    });\n\n    const offLayers = layers.filter((layer) => {\n      return !layerArray.includes(layer);\n    });\n\n    if (isChecked) {\n      onLayers.map((layerId) => {\n        toggleLayerVisibility(map, layerId, true);\n        return true;\n      });\n      offLayers.map((layerId) => {\n        toggleLayerVisibility(map, layerId, false);\n        return true;\n      });\n    } else {\n      layers.map((layerId) => {\n        toggleLayerVisibility(map, layerId, false);\n        return true;\n      });\n    }\n  };\n\n  const layerItems = group.layers.map((item, idx) => {\n    return (\n      <GroupLayerItem\n        key={item.layerName}\n        layerInfo={item}\n        map={map}\n        legend={legend}\n        itemActions={item.actions}\n        // showActions={item.showActions}\n        group={group.groupName}\n        callback={toggleGroupLayers}\n        activeOnLoad={idx === 0}\n      />\n    );\n  });\n\n  return (\n    <ListItem>\n      <Box>\n        <Flex sx={{ flexDirection: 'column' }}>\n          <Label>\n            <Checkbox checked={isChecked} onChange={handleChange} />\n            <Text pt={1} sx={{ fontWeight: 'bold' }}>\n              {group.groupName}\n            </Text>\n          </Label>\n          <List>{layerItems}</List>\n        </Flex>\n      </Box>\n    </ListItem>\n  );\n};\n\nexport default GroupLayer;\n","import React, { useContext } from 'react';\nimport { FaLayerGroup } from 'react-icons/fa';\nimport List from '../_primitives/List';\nimport BaseComponent from '../_common/BaseComponent';\nimport LayerListItem from './LayerListItem';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport GroupLayer from './GroupLayer';\nimport { Text } from '@theme-ui/components';\n\nconst LayerList = ({\n  layers,\n  groupLayers,\n  legend = false,\n  showActions,\n  checkboxStyle,\n  baseType,\n  buttonOptions,\n  sx,\n  ...rest\n}) => {\n  const config = useContext(Context);\n  const { map } = config;\n\n  if (!mapExists(map)) return null;\nconst Description = () => {\n  return(\n  <Text>\n    Toggle layers:\n    </Text>\n  )\n}\n  const listItems = layers.map((item) => {\n    return (\n      <LayerListItem\n        key={item.layerName}\n        layerInfo={item}\n        map={map}\n        legend={legend}\n        itemActions={item.actions}\n        showActions={showActions}\n        checkboxStyle={checkboxStyle}\n        baseType={baseType}\n      />\n    );\n  });\n\n  let groupItems;\n  if (groupLayers && groupLayers.length > 0) {\n    groupItems = groupLayers.map((group) => {\n      return <GroupLayer group={group} map={map} legend={legend} />;\n    });\n  }\n\n  return (\n    <BaseComponent\n      baseType={baseType}\n      buttonOptions={{\n        icon: <FaLayerGroup />,\n        title: 'Layer List',\n        testId: 'cl-layerlist-btn',\n        ...buttonOptions\n      }}\n      sx={sx}\n      {...rest}\n    >\n      <Description/>\n      <List>{listItems}</List>\n      <List> {groupItems}</List>\n    </BaseComponent>\n  );\n};\n\nexport default LayerList;\n","import React, { Component } from 'react';\nimport AddData from './components/AddData/AddData';\nimport Map from './components/Map/Map';\nimport BasemapSwitcher from './components/BasemapSwitcher/BasemapSwitcher';\nimport mapOptions from './util/mockMapOptions';\nimport ElementsProvider from './components/_common/ElementsProvider';\nimport ScaleBar from './components/ScaleBar/ScaleBar'\nimport Draw from './components/Draw/Draw'\nimport { loadBookmarks,  deleteBookmark, saveBookmark, goToBookmark } from './components/Bookmarks/util/bookmarkActions';\nimport Bookmarks from './components/Bookmarks/Bookmarks';\nimport Sidebar from './sidebar';\nimport LayerList from './components/LayerList/LayerList';\n\n\n\nclass App extends Component {\n  render(){\n    return (\n      <ElementsProvider>\n      <Map mapOptions={mapOptions}>\n        <Sidebar />\n      <AddData/>\n        <BasemapSwitcher/>\n        <ScaleBar/>\n        <Draw />\n\n        <Bookmarks \n        goToBookmark={goToBookmark}\n        loadBookmarks={loadBookmarks}\n        deleteBookmark={deleteBookmark}\n        saveBookmark={saveBookmark}\n        />\n   <LayerList\n      sx={{marginTop: '60vh'}}\n        panel={true}\n        layers={[\n          {\n            layerIds: ['water', 'water-shadow'], //fill\n            layerName: 'Water'\n          },\n          {\n            layerIds: ['road-motorway-trunk'], //line\n            layerName: 'Motorway'\n          }\n        ]}\n      />\n      </Map>\n      </ElementsProvider>\n    );\n  }\n}\nexport default App;\n\n// export default function App() {\n// const mapContainer = useRef(null);\n// const map = useRef(null);\n// const [lng, setLng] = useState(-70.9);\n// const [lat, setLat] = useState(42.35);\n// const [zoom, setZoom] = useState(9);\n \n// useEffect(() => {\n// if (map.current) return; // initialize map only once\n// map.current = new mapboxgl.Map({\n// container: mapContainer.current,\n// style: 'mapbox://styles/mapbox/streets-v11',\n// center: [lng, lat],\n// zoom: zoom\n// });\n// });\n \n// useEffect(() => {\n// if (!map.current) return; // wait for map to initialize\n// map.current.on('move', () => {\n// setLng(map.current.getCenter().lng.toFixed(4));\n// setLat(map.current.getCenter().lat.toFixed(4));\n// setZoom(map.current.getZoom().toFixed(2));\n// });\n// });\n\n\n// return (\n// <div>\n// <div className=\"sidebar\">\n// Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\n// </div>\n// <div ref={mapContainer} className=\"map-container\" />\n// </div>\n// );\n// }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport App from './App';\n \nReactDOM.render(\n\n<App />,\ndocument.getElementById('root')\n);"],"sourceRoot":""}