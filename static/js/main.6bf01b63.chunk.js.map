{"version":3,"sources":["util/childrenExist.js","components/_common/PanelComponent.js","components/_common/ButtonComponent.js","components/_common/BaseComponent.js","DefaultContext.js","util/mapExists.js","components/AddData/importer/index.js","components/AddData/AddData.js","components/_common/AlertModal.js","components/Map/Map.js","components/_primitives/RadioGroupItem.js","components/_primitives/RadioGroup.js","components/_primitives/ButtonGroup.js","components/BasemapSwitcher/BasemapSwitcher.js","util/mockMapOptions.js","config.js","components/_common/ElementsProvider.js","components/ScaleBar/ScaleBar.js","components/Measure/calculateMeasurements.js","components/Measure/Measure.js","components/Draw/LabelMaker.js","components/Draw/textDrawMode.js","components/Draw/allowMapInteractions.js","components/Draw/staticDrawMode.js","components/Draw/Draw.js","App.js","index.js"],"names":["childrenExist","children","undefined","isNaN","Array","isArray","length","PanelComponent","closable","onClose","sx","rest","theme","useThemeUI","className","color","padding","width","borderRadius","boxShadow","bg","paddingTop","justifyContent","marginRight","space","height","cursor","onClick","ButtonComponent","buttonOptions","ref","useRef","triggerRect","useRect","useState","showPanel","setShowPanel","title","testId","variant","intercept","err","console","error","icon","style","zIndex","targetRef","position","left","right","top","window","scrollY","fontFamily","BaseComponent","baseType","open","topPos","leftPos","bottom","baseStyle","panelStyle","buttonStyle","minWidth","minHeight","p","m","defaultType","DefaultContext","createContext","mapExists","map","Object","keys","config","this","reader","FileReader","onload","handleFile","bind","file","cb","Error","fileExt","getExtension","fileDetails","fileSize","size","fileName","name","toLowerCase","readAsArrayBuffer","readAsText","fArr","split","evt","handleCSV","handleKML","handleJSON","handleGPX","handleSHP","notRecognized","handleGeoJSON","toString","latitude","longitude","latitudes","longitudes","csv","target","result","forEach","column","indexOf","trim","csv2geojson","latfield","lonfield","data","xml","DOMParser","parseFromString","geojson","togeojson","kml","JSON","parse","gpx","shpjs","parseZip","log","AlertModal","message","show","setShow","flexDirection","Map","mapOptions","mapLayers","supportMessage","setMap","useContext","useEffect","layers","mapboxgl","on","l","addLayer","supported","el","container","RadioGroupItem","props","item","defaultChecked","checkedChanged","fontSize","id","value","onChange","e","label","RadioGroup","items","checkedValueChange","display","checked","ButtonGroup","content","buttons","alignItems","borderWidth","borderColor","borderStyle","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","BasemapSwitcher","switcherStyle","basemaps","preserveLayers","basemapValue","setBasemapValue","didMountRef","handleChange","current","setStyle","waiting","isStyleLoaded","i","getSource","layer","source","addSource","setTimeout","switcher","basemapOptions","key","center","zoom","accessToken","ElementsProvider","context","mapOverride","ctx","ContextProvider","Provider","provider","ScaleBar","maxWidth","unit","ScaleControl","scale","Context","ctrlPosition","addControl","calculateMeasurements","feature","units","a","area","default","drawnLength","drawnArea","measurement","Measure","measureControl","setMeasureControl","areaPopupOpen","setAreaPopupOpen","linePopupOpen","setLinePopupOpen","setMeasurement","setUnits","showDelete","setShowDelete","lengthOptions","areaOptions","handleMeasurement","getAll","features","drawnMeasurements","deleteButton","changeUnits","currentTarget","startDraw","type","measure","then","MapboxDraw","displayControlsDefault","changeMode","deleteAll","displayContent","numeral","format","border","defaultValue","option","LabelMaker","x","y","textShadow","hidden","setHidden","textColor","setTextColor","backgroundColor","setBackgroundColor","colorPickerActive","setColorPickerActive","currentColorPicker","setCurrentColorPicker","handle","textAlign","colors","primary","fonts","body","margin","htmlFor","placeholder","innerHTML","toUpperCase","mb","replace","fontWeight","hex","gap","columns","href","preventDefault","confirm","parentNode","removeChild","GetTextMode","TextMode","htmlToElement","html","template","document","createElement","firstChild","onSetup","state","point","newFeature","geometry","coordinates","lngLat","lng","lat","marker","Marker","element","draggable","getElement","addEventListener","clickEvent","exists","getElementById","appendChild","ReactDOM","render","clientX","clientY","setLngLat","addTo","fire","toGeoJSON","onKeyUp","keyCode","toDisplayFeatures","allowMapInteractions","allow","boxZoom","enable","scrollZoom","dragPan","dragRotate","keyboard","doubleClickZoom","touchZoomRotate","disable","StaticMode","setActionableState","Draw","drawControl","setDrawControl","nextMode","setNextMode","drawType","modes","assign","draw_text","static","draw","nm","hideTextArea","textEl","textStroke","webkitTextStroke","resize","getElementsByClassName","focus","getMode","remove","clearDrawings","App","Component"],"mappings":"6UAgBeA,EAVO,SAACC,GACrB,OAAiB,OAAbA,QAAkCC,IAAbD,IAED,kBAAbA,GAA+BE,MAAMF,GAE5CG,MAAMC,QAAQJ,GAAkBA,EAASK,OAAS,IAE7CL,I,iECgCIM,EA1CQ,SAAC,GAAkD,IAAhDC,EAA+C,EAA/CA,SAAUC,EAAqC,EAArCA,QAASC,EAA4B,EAA5BA,GAAIT,EAAwB,EAAxBA,SAAaU,EAAW,iBAC/DC,EAAUC,cAAVD,MAER,OACE,eAAC,IAAD,yBACEE,UAAU,qBACVC,MAAM,OACNL,GAAE,yBACAM,QAAS,EACTC,MAAO,QACPC,aAAc,MACdC,UAAW,4BACXC,GAAI,cACDV,GANH,IAOAW,WAAYb,EAAW,EAAI,KAGzBG,GAbN,cAeGH,GACC,cAAC,IAAD,CACEE,GAAI,CACFY,eAAgB,WAChBC,YAAY,IAAD,OAAMX,EAAMY,MAAQZ,EAAMY,MAAM,GAAK,GAArC,OAHf,SAME,cAAC,IAAD,CACEd,GAAI,CACFK,MAAO,OACPU,OAAQ,OACRR,MAAO,OACP,SAAU,CAAES,OAAQ,YAEtBC,QAASlB,MAIdR,O,oCCuBQ2B,EAzDS,SAAC,GAA8C,IAAD,MAA3C3B,EAA2C,EAA3CA,SAAU4B,EAAiC,EAAjCA,cAAenB,EAAkB,EAAlBA,GAAOC,EAAW,iBAC9DmB,EAAMC,iBAAO,MACbC,EAAcC,YAAQH,GAC5B,EAAkCI,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,OACE,qCACE,cAAC,IAAD,CACEN,IAAKA,EACLO,MAAK,OAAER,QAAF,IAAEA,OAAF,EAAEA,EAAeQ,MACtBvB,UAAS,iBAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAMG,iBAAR,QAAqB,SAC9B,+BAAae,QAAb,IAAaA,OAAb,EAAaA,EAAeS,cAA5B,QAAsC,SACtCC,QAAO,iBAAEV,QAAF,IAAEA,OAAF,EAAEA,EAAeU,eAAjB,QAA4B,UACnCZ,QAAS,WACP,UAAIE,QAAJ,IAAIA,OAAJ,EAAIA,EAAeW,UACjB,IACEX,EAAcW,YACd,MAAOC,GAEPC,QAAQC,MAAMF,QAGhBL,GAAcD,IAGlBzB,GAAE,eACGA,GAnBP,gBAsBGmB,QAtBH,IAsBGA,OAtBH,EAsBGA,EAAee,OAGjBT,GACC,cAAC,IAAD,CACAU,MAAO,CAACC,OAAQpC,EAAGoC,QAAU,GAC3BC,UAAWjB,EACXkB,SAAU,iBAAO,CACfC,MAAiB,OAAXjB,QAAW,IAAXA,OAAA,EAAAA,EAAakB,OAAQ,GAC3BC,KAAgB,OAAXnB,QAAW,IAAXA,OAAA,EAAAA,EAAamB,KAAMC,OAAOC,UALnC,SAQE,cAAC,EAAD,CACE7C,UAAQ,EACRC,QAAS,kBAAM2B,GAAa,IAC5B1B,GAAI,CACF4C,WAAY,QAJhB,SASGrD,U,sDC4CEsD,EA5FO,SAAC,GAOhB,IAAD,UANJC,EAMI,EANJA,SACA3B,EAKI,EALJA,cACA5B,EAII,EAJJA,SAEAS,GAEI,EAHJ+C,KAGI,EAFJ/C,IACGC,EACC,iBACA+C,EAAM,iBAAGhD,QAAH,IAAGA,OAAH,EAAGA,EAAIyC,WAAP,QAAc,OACpBQ,EAAO,iBAAGjD,QAAH,IAAGA,OAAH,EAAGA,EAAIuC,YAAP,QAAe,QAE1B,OAAIvC,QAAJ,IAAIA,OAAJ,EAAIA,EAAIkD,UACNF,EAAS,OAGX,OAAIhD,QAAJ,IAAIA,OAAJ,EAAIA,EAAIwC,SACNS,EAAU,MAGZ,IAAME,EAAS,aACbP,WAAY,OACZlC,GAAI,cACJ4B,UAAY,OAAFtC,QAAE,IAAFA,OAAA,EAAAA,EAAIsC,WAAY,WAC1BG,IAAKO,EACLT,KAAMU,EACNC,OAAM,OAAElD,QAAF,IAAEA,OAAF,EAAEA,EAAIkD,OACZV,MAAK,OAAExC,QAAF,IAAEA,OAAF,EAAEA,EAAIwC,MACXJ,OAAM,iBAAEpC,QAAF,IAAEA,OAAF,EAAEA,EAAIoC,cAAN,QAAgB,GACnBpC,GAGCoD,EAAU,aACdR,WAAY,OACZlC,GAAI,aACJ4B,UAAY,OAAFtC,QAAE,IAAFA,OAAA,EAAAA,EAAIsC,WAAY,WAC1BG,IAAKO,EACLT,KAAMU,EACNC,OAAM,OAAElD,QAAF,IAAEA,OAAF,EAAEA,EAAIkD,OACZV,MAAK,OAAExC,QAAF,IAAEA,OAAF,EAAEA,EAAIwC,MACXJ,OAAM,iBAAEpC,QAAF,IAAEA,OAAF,EAAEA,EAAIoC,cAAN,QAAgB,GACnBpC,GAGCqD,EAAW,aACfT,WAAY,OACZlC,IAAM,OAAFV,QAAE,IAAFA,OAAA,EAAAA,EAAIU,KAAM,UACd4B,UAAY,OAAFtC,QAAE,IAAFA,OAAA,EAAAA,EAAIsC,WAAY,WAC1BG,IAAKO,EACLT,KAAMU,EACNC,OAAM,OAAElD,QAAF,IAAEA,OAAF,EAAEA,EAAIkD,OACZV,MAAK,OAAExC,QAAF,IAAEA,OAAF,EAAEA,EAAIwC,MACXJ,OAAM,iBAAEpC,QAAF,IAAEA,OAAF,EAAEA,EAAIoC,cAAN,QAAgB,EACtB7B,MAAO,OACPQ,OAAQ,OACRuC,SAAU,OACVC,UAAW,OACXC,EAAG,EACHC,EAAG,EACHhD,UAAW,6BACRT,GAGC0D,EACJ,cAAC,IAAD,2BAASzD,GAAT,IAAeD,GAAImD,EAAnB,SACG5D,KAIL,OAAQuD,GACN,IAAK,OACH,OAAOY,EACT,IAAK,QACH,OACE,cAAC,EAAD,2BAAWzD,GAAX,IAAiBD,GAAIoD,EAArB,SACG7D,KAGP,IAAK,SACH,OACE,cAAC,EAAD,aAEEA,SAAUA,EACV4B,cAAeA,EACfnB,GAAIqD,GACApD,IAGV,QACE,OAAOyD,IC3FEC,EAFQC,wBAAc,ICUtBC,MAZf,SAAmBC,GACjB,SAAIA,GAAOC,OAAOC,KAAKF,GAAKlE,OAAS,OAC/BkE,EAAI3B,OAAS4B,OAAOC,KAAKF,EAAI3B,OAAOvC,OAAS,I,sDCI/CqE,EACS,I,GCaE,I,WDTf,aAAe,oBACbC,KAAKC,OAAS,IAAIC,WAClBF,KAAKC,OAAOE,OAASH,KAAKI,WAAWC,KAAKL,M,wCAG5C,SAAKM,EAAMC,GACT,IAAKD,EAAM,MAAM,IAAIE,MAAM,iBAC3B,IAAKD,EAAI,MAAM,IAAIC,MAAM,qBACzBR,KAAKO,GAAKA,EACVP,KAAKM,KAAOA,EACZN,KAAKS,QAAUT,KAAKU,eACpBV,KAAKW,YAAc,CACjBC,SAAUZ,KAAKM,KAAKO,KACpBC,SAAUd,KAAKM,KAAKS,KACpBN,QAAST,KAAKS,SAEZT,KAAKM,KAAKO,MAAQd,EACpBQ,EAAG,CACDxC,MAAO,8BACP4C,YAAaX,KAAKW,cAEoB,QAA/BX,KAAKS,QAAQO,cACtBhB,KAAKC,OAAOgB,kBAAkBjB,KAAKM,MAEnCN,KAAKC,OAAOiB,WAAWlB,KAAKM,KAAM,W,0BAItC,WACE,IAAMa,EAAOnB,KAAKM,KAAKS,KAAKK,MAAM,KAClC,OAAOD,EAAKA,EAAKzF,OAAS,K,wBAG5B,SAAW2F,GACT,OAAQrB,KAAKS,QAAQO,eACnB,IAAK,MACHhB,KAAKsB,UAAUD,GACf,MACF,IAAK,MACHrB,KAAKuB,UAAUF,GACf,MAEF,IAAK,UACL,IAAK,OACHrB,KAAKwB,WAAWH,GAChB,MACF,IAAK,MACHrB,KAAKyB,UAAUJ,GACf,MAIF,IAAK,MACHrB,KAAK0B,UAAUL,GACf,MACF,QACErB,KAAK2B,mB,wBAKX,SAAWN,GACT,IAOErB,KAAK4B,cAAcP,GACnB,MAAOxD,GACPmC,KAAKO,GAAG,CACNxC,MAAM,yBAAD,OAA2BF,EAAIgE,WAA/B,KACLlB,YAAaX,KAAKW,iB,uBAKxB,SAAUU,GAAM,IAGVS,EACAC,EAJS,OACPC,EAAY,CAAC,IAAK,MAAO,YACzBC,EAAa,CAAC,IAAK,MAAO,MAAO,OAAQ,aAGzCC,EAAMb,EAAIc,OAAOC,OAUvB,GATeF,EAAId,MAAM,MAAM,GAAGA,MAAM,KACjCiB,SAAQ,SAACC,IAC0C,IAApDN,EAAUO,QAAQD,EAAOtB,cAAcwB,UACzCV,EAAWQ,EAAOE,SAEqC,IAArDP,EAAWM,QAAQD,EAAOtB,cAAcwB,UAC1CT,EAAYO,EAAOE,YAGlBT,IAAcD,EACjB,MAAM,IAAItB,MACR,qFAGJiC,IAAYA,YACVP,EACA,CACEQ,SAAUZ,EACVa,SAAUZ,IAEZ,SAAClE,EAAK+E,GACJ,GAAI/E,EAAK,MAAMA,EACf,EAAK0C,GAAG,EAAKI,YAAaiC,Q,uBAKhC,SAAUvB,GACR,IAAMwB,GAAM,IAAIrE,OAAOsE,WAAYC,gBACjC1B,EAAIc,OAAOC,OACX,mBAEIY,EAAUC,IAAUC,IAAIL,EAAK,CAAE5E,OAAO,IAC5C+B,KAAKO,GAAGP,KAAKW,YAAaqC,K,2BAG5B,SAAc3B,GACZrB,KAAKO,GAAGP,KAAKW,YAAawC,KAAKC,MAAM/B,EAAIc,OAAOC,W,uBAOlD,SAAUf,GACR,IAAMwB,GAAM,IAAIrE,OAAOsE,WAAYC,gBACjC1B,EAAIc,OAAOC,OACX,mBAEIY,EAAUC,IAAUI,IAAIR,GAC9B7C,KAAKO,GAAGP,KAAKW,YAAaqC,K,uBAO5B,SAAU3B,GACR,IAAM2B,EAAUM,IAAMC,SAASlC,EAAIc,OAAOC,QAC1CpC,KAAKO,GAAGP,KAAKW,YAAaqC,K,2BAG5B,WAEElF,QAAQ0F,IAAI,wCACZxD,KAAKO,GAAG,CACNxC,MAAM,eAAD,OAAiBiC,KAAKS,QAAtB,oBACLE,YAAaX,KAAKW,kB,sBErIT8C,EAzBI,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACpB,EAAwBpG,oBAAS,GAAjC,mBAAOqG,EAAP,KAAaC,EAAb,KAEA,OAAKD,EAEH,cAAC,IAAD,CAAOhG,QAAQ,QAAf,SACE,eAAC,IAAD,CAAM7B,GAAI,CAAE+H,cAAe,UAA3B,UACE,cAAC,IAAD,CAAM/H,GAAI,CAAEO,MAAO,OAAQ+B,SAAU,YAArC,SACE,mBAAGH,MAAO,CAAE7B,QAAS,GAArB,SAA2BsH,MAE7B,cAAC,IAAD,CAAM5H,GAAI,CAAEY,eAAgB,YAA5B,SACE,cAAC,IAAD,CACEiB,QAAQ,YACRZ,QAAS,WACP6G,GAAQ,IAHZ,uBARU,M,mDC+CLE,EAhDH,SAAC,GAA4D,IACnElE,EADSmE,EAAyD,EAAzDA,WAAYC,EAA6C,EAA7CA,UAAWC,EAAkC,EAAlCA,eAAgBnI,EAAkB,EAAlBA,GAAOC,EAAW,iBAG9DmI,EADOC,qBAAW1E,GAClByE,OAmBR,OARAE,qBAAU,WATQ,IAACC,EAWjBzE,EAAM,IAAI0E,IAASR,IAAIC,GACvBG,EAAOtE,IAZUyE,EAcPL,IAZVpE,EAAI2E,GAAG,QAAQ,WACbF,EAAOhC,SAAQ,SAACmC,GACd5E,EAAI6E,SAASD,WAWhB,IAEEF,IAASI,YAcZ,cAAC,IAAD,2BACM3I,GADN,IAEED,GAAE,aAAIO,MAAO,QAASQ,OAAQ,SAAYf,GAC1CoB,IAAK,SAACyH,GAEJZ,EAAWa,UAAYD,GAEzBzI,UAAU,sBAnBV,cAAC,EAAD,CACEwH,QACEO,GAAc,uQ,QCQTY,EArCQ,SAACC,GACtB,IAAQ/D,EAA+C+D,EAA/C/D,KAAMgE,EAAyCD,EAAzCC,KAAMC,EAAmCF,EAAnCE,eAAgBC,EAAmBH,EAAnBG,eAEpC,OACE,eAAC,IAAD,yBACE/I,UAAU,uBACN4I,GAFN,IAGEhJ,GAAI,CAEFoJ,SAAU,OACVvI,YAAa,MACb,QAAS,CACPF,WAAY,QARlB,UAYE,cAAC,IAAD,CACEN,MAAM,UACN4E,KAAMA,EACNoE,GAAIJ,EAAKhE,KACTqE,MAAOL,EAAKK,MACZJ,eAAgBA,EAChBlJ,GAAI,CACF,oBAAqB,CACnBK,MAAO,WAET,kBAAmB,CACjBK,GAAI,cAGR6I,SAAU,SAACC,GAAD,OAAOL,EAAeK,EAAGP,MAErC,+BAAOA,EAAKQ,aCiBHC,EAvCI,SAACV,GAClB,IACEzJ,EAIEyJ,EAJFzJ,SACAoK,EAGEX,EAHFW,MACA1E,EAEE+D,EAFF/D,KACoB2E,EAClBZ,EADkBY,mBAEhBzH,EAAQ,CACZzB,GAAI,cACJL,MAAO,UACPwJ,QAAS,OACTvJ,QAAS,GAGX,OAAIhB,EAAcC,GAEd,cAAC,IAAD,2BAASyJ,GAAT,IAAgB5I,UAAU,iBAAiBJ,GAAImC,EAA/C,SACG5C,KAML,cAAC,IAAD,2BAASyJ,GAAT,IAAgB5I,UAAU,iBAAiBJ,GAAImC,EAA/C,SACGwH,EAAM7F,KAAI,SAACmF,GACV,OACE,cAAC,EAAD,CAEEhE,KAAMA,EACNgE,KAAMA,EACNC,eAAgBD,EAAKa,QACrBX,eAAgBS,GAJXX,EAAKK,c,8BCKPS,EA1CK,SAAC,GAAwC,IACvDC,EADiBC,EAAqC,EAArCA,QAASjK,EAA4B,EAA5BA,GAAIT,EAAwB,EAAxBA,SAAaU,EAAW,iBAO1D,OAJE+J,EADEC,GAGQ1K,EAGV,cAAC,IAAD,yBACE2K,WAAW,UACPjK,GAFN,IAGEG,UAAU,kBACVJ,GAAE,2BACGA,GADH,IAEA,WAAY,CACVe,OAAQ,OACRP,aAAc,EACd2J,YAAa,SACbC,YAAa,QACbC,YAAa,QACb,iBAAkB,CAChBC,oBAAqB,UACrBC,uBAAwB,UACxBJ,YAAa,QACbC,YAAa,QACbC,YAAa,SAEf,cAAe,CACbG,qBAAsB,UACtBC,wBAAyB,UACzBN,YAAa,QACbC,YAAa,QACbC,YAAa,YAxBrB,SA6BGL,M,gFC0GQU,EApIS,SAAC,GAQlB,IAPLC,EAOI,EAPJA,cACAC,EAMI,EANJA,SACAC,EAKI,EALJA,eACA/H,EAII,EAJJA,SACA3B,EAGI,EAHJA,cACAnB,EAEI,EAFJA,GACGC,EACC,iBACJ,EAAwCuB,mBACtCoJ,EAAWA,EAAS,GAAGtB,MAAQ,aADjC,mBAAOwB,EAAP,KAAqBC,EAArB,KAIQjH,EADOuE,qBAAW1E,GAClBG,IAEFkH,EAAc3J,kBAAO,GAErB4J,EAAe,SAACzB,EAAGR,GACvB+B,EAAgB/B,EAAMM,QAGxBhB,qBAAU,WACJ0C,EAAYE,QACdpH,EAAIqH,SAAJ,iCAAuCL,IAEvCE,EAAYE,SAAU,IAEvB,CAACJ,IAEJxC,qBAAU,WACJzE,EAAUC,IACZA,EAAI2E,GAAG,QAAQ,WACb3E,EAAIqH,SAAJ,iCAAuCL,IAEvChH,EAAI2E,GAAG,aAAa,YACF,SAAV2C,IACJ,GAAKtH,EAAIuH,gBAGP,IAAK,IAAIC,EAAI,EAAGA,GAAC,OAAGT,QAAH,IAAGA,OAAH,EAAGA,EAAgBjL,QAAQ0L,GAAK,EAAG,CAClD,IAAM9H,EAAIqH,EAAeS,GACpBxH,EAAIyH,UAAU/H,EAAEgI,MAAMC,UACzB3H,EAAI4H,UAAUlI,EAAEgI,MAAMC,OAAQjI,EAAEiI,QAChC3H,EAAI6E,SAASnF,EAAEgI,aANnBG,WAAWP,EAAS,KAWxBA,WAIL,CAACtH,IAEJ,IAuBI8H,EAvBEC,EAAiBjB,GAAY,CACjC,CACE3F,KAAM,QACN6G,IAAK,QACLrC,MAAO,QACPH,MAAO,YACPQ,SAAS,GAEX,CACE7E,KAAM,OACN6G,IAAK,OACLrC,MAAO,OACPH,MAAO,YAET,CACErE,KAAM,YACN6G,IAAK,YACLrC,MAAO,YACPH,MAAO,yBAOX,OAAQqB,GACN,IAAK,QACHiB,EACE,cAAC,EAAD,CACEjC,MAAOkC,EACP5G,KAAK,WACL2E,mBAAoBqB,IAGxB,MAEF,IAAK,UAEH,IAAMhB,EAAU4B,EAAe/H,KAAI,SAACmF,GAClC,OACE,cAAC,IAAD,CAAyBhI,QAAS,SAACuI,GAAD,OAAOyB,EAAazB,EAAGP,IAAzD,SACGA,EAAKQ,OADKR,EAAKQ,UAMtBmC,EAAW,cAAC,EAAD,CAAa3B,QAASA,IACjC,MACF,QACE2B,EACE,cAAC,EAAD,CACEjC,MAAOkC,EACP5G,KAAK,WACL2E,mBAAoBqB,IAM5B,OACE,cAAC,EAAD,yBACEnI,SAAUA,EACV3B,cAAa,aACXe,KAAM,cAAC,IAAD,IACNP,MAAO,mBACPC,OAAQ,kBACLT,IAEDlB,GARN,IAUED,GAAIA,EACJI,UAAU,sBAXZ,SAaGwL,MCnIQ3D,EARI,CACjBa,UAAW,MACX3G,MAAO,mCACP4J,OAAQ,CAAC,GAAI,IACbC,KAAM,EACNC,YCNa,kG,SCqCAC,EAjCU,SAAC,GAMnB,IALL3M,EAKI,EALJA,SACA4M,EAII,EAJJA,QACAjM,EAGI,EAHJA,MAEAkM,EACI,EADJA,YAEMC,EAAMF,GAAWxI,EACjB2I,EAAkBD,EAAIE,UAAYF,EACxC,EAAsB7K,mBAAS,MAA/B,mBAAOsC,EAAP,KAEMwF,EAAQ,CACZxF,IAAKsI,GAAetI,EACpBsE,OAJF,MAiBMoE,EACJ,cAAC,IAAD,CAAiBtM,MAAOA,GAAS,GAAjC,SAAsCX,IAGxC,OAAO,cAAC+M,EAAD,CAAiBhD,MAAOA,EAAxB,SAAgCkD,KCF1BC,EA5BE,SAACzD,GAChB,IAAQ1G,EAA6B0G,EAA7B1G,SAAUoK,EAAmB1D,EAAnB0D,SAAUC,EAAS3D,EAAT2D,KAC5B,EAA+BnL,mBAC7B,IAAIoL,eAAa,CACfF,SAAUA,GAAY,IACtBC,KAAMA,GAAQ,YAHXE,EAAP,oBAOQ/I,EADOuE,qBAAWyE,GAClBhJ,IAER,IAAKD,EAAUC,GACb,OAAO,KAGT,IAAMiJ,EAAezK,GAAY,cAUjC,OAJAwB,EAAI2E,GAAG,QAAQ,WACb3E,EAAIkJ,WAAWH,EAAOE,MAGjB,M,8CC9BM,SAAeE,GAA9B,qC,8CAAe,WAAqCC,EAASC,GAA9C,2BAAAC,EAAA,sEAGmB,8BAHnB,uBAGIC,EAHJ,EAGLC,QAHK,SAIqB,8BAJrB,mBAII1N,EAJJ,EAIL0N,QAEFC,EAAgC,IAAlB3N,EAAOsN,GACrBM,EAAYH,EAAKH,KAInBK,EAAcC,GAXL,sBAYHL,EAZG,OAaJ,MAbI,QAgBJ,OAhBI,QAmBJ,OAnBI,QAsBJ,OAtBI,gCAcPM,EAAcF,EAdP,oCAiBPE,EAA4B,QAAdF,EAjBP,oCAoBPE,EAAcF,EAAc,IApBrB,oCAuBPE,EAA4B,UAAdF,EAvBP,oCA0BPE,EAAcF,EA1BP,0DA8BHJ,EA9BG,OA+BJ,UA/BI,QAkCJ,WAlCI,QAqCJ,WArCI,QAwCJ,WAxCI,QA2CJ,OA3CI,gCAgCPM,EAAcD,EAhCP,oCAmCPC,EAA0B,QAAZD,EAnCP,oCAsCPC,EAAcD,EAAY,IAtCnB,oCAyCPC,EAAcD,EAAY,aAzCnB,oCA4CPC,EAA0B,UAAZD,EA5CP,oCA+CPC,EAAcD,EA/CP,sDAoDNC,GApDM,6C,8ECuPAC,GApOC,SAAC,GAA8C,IAA5C5K,EAA2C,EAA3CA,SAAU3B,EAAiC,EAAjCA,cAAenB,EAAkB,EAAlBA,GAAOC,EAAW,kBAEpD6D,EADOuE,qBAAWyE,GAClBhJ,IACR,EAA4CtC,mBAAS,MAArD,mBAAOmM,EAAP,KAAuBC,EAAvB,KACA,EAA0CpM,oBAAS,GAAnD,mBAAOqM,EAAP,KAAsBC,EAAtB,KACA,EAA0CtM,oBAAS,GAAnD,mBAAOuM,EAAP,KAAsBC,EAAtB,KACA,EAAsCxM,mBAAS,GAA/C,mBAAOiM,EAAP,KAAoBQ,EAApB,KACA,EAA0BzM,mBAAS,KAAnC,mBAAO2L,EAAP,KAAce,EAAd,KACA,EAAoC1M,oBAAS,GAA7C,mBAAO2M,EAAP,KAAmBC,EAAnB,KAEMC,EAAgB,CAAC,IAAK,KAAM,KAAM,MAClCC,EAAc,CAAC,QAAM,SAAO,SAAO,SAAO,MAXY,SAa7CC,IAb6C,2EAa5D,kCAAAnB,EAAA,0DACMO,EADN,qBAEyBA,EAAea,YAA5BC,EAFZ,EAEYA,WAEQA,EAAS7O,OAAS,GAJtC,uBAKYsN,EAAUuB,EAAS,GAL/B,SAOsCxB,GAAsBC,EAASC,GAPrE,OAOYuB,EAPZ,OASMT,EAAeS,GATrB,4CAb4D,sBAgC5D,GAJApG,qBAAU,WACRiG,MACC,CAACpB,KAECtJ,EAAUC,GACb,OAAO,KAGT,IAqDI6K,EArDEC,EAAc,SAACpF,GACnB0E,EAAS1E,EAAEqF,cAAcvF,QArCiC,SAwC7CwF,EAxC6C,8EAwC5D,WAAyBC,GAAzB,eAAA3B,EAAA,yDAEOvJ,EAAUC,GAFjB,oDAGMkL,EAAUrB,IAAkB,EAE3BA,EALP,gCAMoB,kCAAqDsB,MACnE,mBACE,IAAIC,EADN,EAAG5B,SACc,CACb6B,wBAAwB,OATlC,OAMIH,EANJ,OAcIpB,EAAkBoB,GAClBlL,EAAIkJ,WAAWgC,GAfnB,OAkBEA,EAAQI,WAAWL,GAEN,qBAATA,EACFb,EAAS,KACS,iBAATa,GACTb,EAAS,aAEXE,GAAc,GAzBhB,6CAxC4D,sBAqF5DtK,EAAI2E,GAAG,eAAe,WACpB8F,OAKEJ,IACFQ,EACE,aAAC,IAAD,CACEhN,MAAM,qBACNvB,UAAU,8BACVa,QAAS,WA3Bb0M,EAAe0B,YACfpB,EAAe,GACfN,EAAeyB,WAAW,iBAC1BhB,GAAc,GACdN,GAAiB,GACjBE,GAAiB,IAmBf,SAOE,aAAC,IAAD,OAKN,IACIsB,EADEzF,EAAUkE,GAAiBF,EAAgB,QAAU,OAsD3D,OAnDIE,IAAkBF,EACpByB,EACE,aAAC,IAAD,WACE,aAAC,IAAD,oBAASC,KAAQ9B,GAAa+B,OAAO,aACrC,aAAC,IAAD,CACEvK,KAAK,gBACLjF,GAAI,CACFsC,SAAU,WACV/B,MAAO,GACPkP,OAAQ,OACR9O,WAAY,GAEd4I,SAAUqF,EACVc,aAAcrB,EAAc,GAT9B,SAWGA,EAAcvK,KAAI,SAAC6L,GAAD,OACjB,uBAAqB3P,GAAI,CAAEK,MAAO,QAAlC,SACGsP,GADUA,YAOX5B,GAAiBF,IAC3ByB,EACE,aAAC,IAAD,WACE,aAAC,IAAD,CAAKtP,GAAI,CAAEK,MAAO,cAAlB,mBAAsCkP,KAAQ9B,GAAa+B,OACzD,aAEF,aAAC,IAAD,CACEvK,KAAK,gBACLjF,GAAI,CACFK,MAAO,aACPiC,SAAU,WACV/B,MAAO,GACPkP,OAAQ,OACR9O,WAAY,GAEd4I,SAAUqF,EACVc,aAAcpB,EAAY,GAV5B,SAYGA,EAAYxK,KAAI,SAAC6L,GAAD,OACf,uBAAqB3P,GAAI,CAAEK,MAAO,QAAlC,SACGsP,GADUA,YAUrB,aAAC,EAAD,yBACEvP,UAAU,mBACV0C,SAAUA,GAAY,OACtB9C,GAAIA,EACJmB,cAAa,aACXe,KAAM,aAAC,IAAD,IACNP,MAAO,UACPC,OAAQ,kBACLT,IAEDlB,GAVN,cAYE,aAAC,EAAD,WACE,aAAC,IAAD,CACEc,OAAQ,KAERX,UAAU,YACVa,QAAS,WACP0M,EAAeyB,WAAW,iBAC1BpB,GAAiB,GACjBF,GAAiB,IAPrB,SAUE,aAAC,IAAD,CAAM9N,GAAI,CAAEoJ,SAAU,QAAtB,uBAEF,aAAC,IAAD,CACEzH,MAAM,eACNvB,UAAU,4BACVa,QAAS,WACP6N,EAAU,oBACVd,GAAiB,GACjBF,GAAiB,IANrB,SASE,aAAC,IAAD,MAEF,aAAC,IAAD,CACEnM,MAAM,eACNvB,UAAU,+BACVa,QAAS,WACP6N,EAAU,gBACVhB,GAAiB,GACjBE,GAAiB,IANrB,SASE,aAAC,IAAD,MAEDW,KAEH,aAAC,IAAD,CACEjO,GAAG,UACH8C,EAAG,EACHnD,MAAM,aACNU,OAAO,OACPR,MAAO,IACPP,GAAI,CACF6J,UACAO,YAAa,QACbD,YAAa,EACbE,YAAa,SAVjB,SAaGiF,S,+BCFMM,GA/NI,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,EAAGC,EAAuB,EAAvBA,EAAGzJ,EAAoB,EAApBA,OAAQnG,EAAY,EAAZA,MAClCmG,EAAOlE,MAAM7B,QAAU,MACvB+F,EAAOlE,MAAM4N,WAAa,OAE1B,MAA4BvO,oBAAS,GAArC,mBAAOwO,EAAP,KAAeC,EAAf,KAEA,EAAkCzO,mBAAS6E,EAAOlE,MAAM9B,OAAS,SAAjE,mBAAO6P,EAAP,KAAkBC,EAAlB,KACA,EAA8C3O,mBAC5C6E,EAAOlE,MAAMiO,iBAAmB,SADlC,mBAAOA,EAAP,KAAwBC,EAAxB,KAIA,EAAkD7O,oBAAS,GAA3D,mBAAO8O,EAAP,KAA0BC,EAA1B,KACA,EAAoD/O,oBAAS,GAA7D,mBAAOgP,EAAP,KAA2BC,EAA3B,KA6BA,OACE,aAAC,KAAD,CAAWC,OAAO,UAAlB,SACE,aAAC,IAAD,CACE1Q,GAAI,CACFsC,SAAU,WACVG,IAAI,GAAD,OAAKqN,EAAL,MACHvN,KAAK,GAAD,OAAKsN,EAAL,MACJzN,OAAQ,GACRgO,gBAAiB,QACjB7P,MAAO,QACPC,aAAc,MACdqJ,QAASmG,EAAS,OAAS,IAT/B,UAYE,aAAC,IAAD,CACE5P,UAAU,SACVJ,GAAI,CACF2Q,UAAW,SACX3P,OAAQ,UACRoP,gBAAiBlQ,EAAM0Q,OAAOC,QAC9BvG,oBAAqB,MACrBE,qBAAsB,MACtBlK,QAAS,OARb,UAWE,aAAC,IAAD,CAAMN,GAAI,CAAEK,MAAO,QAASuC,WAAY1C,EAAM4Q,MAAMC,MAApD,0BAGA,aAAC,IAAD,CACE/Q,GAAI,CACFsC,SAAU,WACVG,IAAK,EACLD,MAAO,EACPnC,MAAO,QACPW,OAAQ,WAEVC,QAAS,WACPgP,GAAU,SAKhB,aAAC,IAAD,UACE,aAAC,IAAD,CAAKjQ,GAAI,CAAEgR,OAAQ,SAAnB,UACE,aAAC,IAAD,CAAOhR,GAAI,CAAE4C,WAAY1C,EAAM4Q,MAAMC,MAAQE,QAAQ,aAArD,mBAGA,aAAC,IAAD,CACEC,YAAa7K,EAAO8K,UACpBlM,KAAK,aACLoE,GAAG,aACHE,SA9EO,SAACC,GAClBnD,EAAO8K,UAAY3H,EAAEnD,OAAOiD,MAAM8H,eA8ExBpR,GAAI,CAAEM,QAAS,OACf+Q,GAAI,IAGN,aAAC,IAAD,CACErR,GAAI,CAAE4C,WAAY1C,EAAM4Q,MAAMC,MAC9BE,QAAQ,iBAFV,uBAMA,aAAC,IAAD,CACEC,YAAa7K,EAAOlE,MAAMiH,SAASkI,QAAQ,KAAM,KAAO,KACxDrM,KAAK,iBACLoE,GAAG,iBACHE,SAzFW,SAACC,GACtBnD,EAAOlE,MAAMiH,SAAb,UAA2BI,EAAEnD,OAAOiD,MAApC,OAyFUtJ,GAAI,CAAEM,QAAS,OACf+Q,GAAI,IAGN,aAAC,IAAD,CACErR,GAAI,CAAE4C,WAAY1C,EAAM4Q,MAAMC,MAC9BE,QAAQ,mBAFV,yBAMA,aAAC,IAAD,CACEhM,KAAK,mBACLoE,GAAG,mBACHgI,GAAI,EACJ9H,SApGa,SAACC,GACxBnD,EAAOlE,MAAMS,WAAa4G,EAAEnD,OAAOiD,OAoGzBtJ,GAAI,CAAEM,QAAS,OALjB,UAOE,uBAAQgJ,MAAM,QAAd,mBACA,uBAAQA,MAAM,aAAd,wBACA,uBAAQA,MAAM,UAAd,qBACA,uBAAQA,MAAM,YAAd,uBACA,uBAAQA,MAAM,UAAd,wBAGF,aAAC,IAAD,CACEtJ,GAAI,CAAE4C,WAAY1C,EAAM4Q,MAAMC,MAC9BE,QAAQ,mBAFV,yBAMA,aAAC,IAAD,CACEC,YAAa7K,EAAOlE,MAAMoP,YAAc,IACxCtM,KAAK,mBACLoE,GAAG,mBACHE,SApHa,SAACC,GACxBnD,EAAOlE,MAAMoP,WAAa/H,EAAEnD,OAAOiD,OAoHzBtJ,GAAI,CAAEM,QAAS,OACf+Q,GAAI,IAGN,aAAC,IAAD,CACErR,GAAI,CAAE2Q,UAAkC,OAAvBH,EAA8B,OAAS,SACxDa,GAAI,EAFN,SAIGf,EACC,aAAC,KAAD,CAAe/G,SA1HR,SAAClJ,GACpB,IAAQmR,EAAQnR,EAARmR,IACmB,OAAvBhB,GACFnK,EAAOlE,MAAM9B,MAAQmR,EACrBrB,EAAaqB,IACmB,OAAvBhB,IACTnK,EAAOlE,MAAMiO,gBAAkBoB,EAC/BnB,EAAmBmB,OAqHT,KAIJ,aAAC,IAAD,CAAMC,IAAK,EAAGJ,GAAI,EAAGK,QAAS,CAAC,EAAG,WAAlC,UACE,aAAC,IAAD,CACEhR,GAAIwP,EACJjP,QAAS,WACoB,OAAvBuP,GACFD,GAAqB,GACrBE,GAAsB,KAEtBF,GAAqB,GACrBE,EAAsB,QAG1BzQ,GAAI,CACFK,MAAO,QACPW,OAAQ,UACRyO,OACyB,OAAvBe,EAA8B,wBAA0B,IAf9D,gBAoBA,aAAC,IAAD,CACE9P,GAAI0P,EACJnP,QAAS,WACoB,OAAvBuP,GACFD,GAAqB,GACrBE,GAAsB,KAEtBF,GAAqB,GACrBE,EAAsB,QAG1BzQ,GAAI,CACFgB,OAAQ,UACRyO,OACyB,OAAvBe,EAA8B,wBAA0B,IAd9D,mBAqBF,aAAC,IAAD,CAAKhN,EAAG,EAAGxD,GAAI,CAAE2Q,UAAW,UAA5B,SACE,aAAC,IAAD,CACE3Q,GAAI,CAAEK,MAAO,UAAWuC,WAAY1C,EAAM4Q,MAAMC,MAChDY,KAAK,KACL1Q,QAAS,SAACuI,GACRA,EAAEoI,iBACalP,OAAOmP,QAAQ,kBAE5BxL,EAAOyL,WAAWC,YAAY1L,GAC9B4J,GAAU,KARhB,uCCvHC+B,GA5FK,SAAC9R,GACnB,IAAM+R,EAAW,GAMjB,SAASC,EAAcC,GACrB,IAAMC,EAAWC,SAASC,cAAc,YAExC,OADAF,EAASjB,UAAYgB,EAAKzL,OACnB0L,EAASpI,QAAQuI,WA+E1B,OAzEAN,EAASO,QAAU,WAGjB,MAFc,IAMhBP,EAAShR,QAAU,SAAUwR,EAAOjJ,GAElC,IAAMkJ,EAAQxO,KAAKyO,WAAW,CAC5B5D,KAAM,UAIN6D,SAAU,CACR7D,KAAM,QACN8D,YAAa,CAACrJ,EAAEsJ,OAAOC,IAAKvJ,EAAEsJ,OAAOE,QAKnCC,EAAS,IAAIzK,IAAS0K,OAAO,CACjCC,QAASjB,EAAa,wMAKtBkB,WAAW,IAGbH,EAAOI,aAAaC,iBAAiB,eAAe,SAACC,GACnD,IAAMC,EAASnB,SAASoB,eAAe,eACnCD,GACFA,EAAO1B,WAAWC,YAAYyB,GAEhC,IAAM1K,EAAYuJ,SAASC,cAAc,OACzCxJ,EAAUO,GAAK,cACfgJ,SAAStB,KAAK2C,YAAY5K,GAC1B6K,IAASC,OACP,cAAC,GAAD,CACE/D,EAAG0D,EAAWM,QAAU,GACxB/D,EAAGyD,EAAWO,QAAU,GACxBzN,OAAQkN,EAAWlN,OACnBnG,MAAOA,IAET4I,MAIJmK,EAAOc,UAAUvK,EAAEsJ,QACnBG,EAAOe,MAAM9P,KAAKJ,KAElBI,KAAKJ,IAAImQ,KAAK,cAAe,CAC3BxF,SAAU,CAACiE,EAAMwB,eAGnBhQ,KAAKkL,WAAW,kBAIlB6C,EAASkC,QAAU,SAAU1B,EAAOjJ,GAClC,OAAkB,KAAdA,EAAE4K,SAAuBlQ,KAAKkL,WAAW,kBAQ/C6C,EAASoC,kBAAoB,SAAU5B,EAAOvL,EAAS2C,GACrDA,EAAQ3C,IAGH+K,GC/FM,SAASqC,GAAqBxQ,EAAKyQ,GAE5CA,GACFzQ,EAAI0Q,QAAQC,SACZ3Q,EAAI4Q,WAAWD,SACf3Q,EAAI6Q,QAAQF,SACZ3Q,EAAI8Q,WAAWH,SACf3Q,EAAI+Q,SAASJ,SACb3Q,EAAIgR,gBAAgBL,SACpB3Q,EAAIiR,gBAAgBN,WAEpB3Q,EAAI0Q,QAAQQ,UACZlR,EAAI4Q,WAAWM,UACflR,EAAI6Q,QAAQK,UACZlR,EAAI8Q,WAAWI,UACflR,EAAI+Q,SAASG,UACblR,EAAIgR,gBAAgBE,UACpBlR,EAAIiR,gBAAgBC,WCfxB,IAAMC,GAAa,CAEnBA,QAAqB,WAGnB,OAFA/Q,KAAKgR,qBACLZ,GAAqBpQ,KAAKJ,KAAK,GACxB,IAGTmR,kBAA+B,SAASxC,EAAOvL,EAAS2C,GACtDA,EAAQ3C,KAGK+N,M,qCCgLAE,GAvKF,SAAC,GAA8C,IAA5CrS,EAA2C,EAA3CA,SAAU3B,EAAiC,EAAjCA,cAAenB,EAAkB,EAAlBA,GAAOC,EAAW,kBAClDC,EAASC,cAATD,MAGC4D,EADOuE,qBAAWyE,GAClBhJ,IACR,EAAsCtC,mBAAS,MAA/C,mBAAO4T,EAAP,KAAoBC,EAApB,KACA,EAAgC7T,mBAAS,MAAzC,mBAAO8T,EAAP,KAAiBC,EAAjB,KAEA,IAAK1R,EAAUC,GACb,OAAO,KATgD,SAY1CgL,EAZ0C,8EAYzD,WAAyB0G,GAAzB,iBAAApI,EAAA,8DAIIgI,EAJJ,qCAKW,kCAAiCnG,MACtC,gBAAYC,EAAZ,EAAG5B,QAAH,OACE,IAAI4B,EAAW,CACbC,wBAAwB,EAExBsG,MAAO1R,OAAO2R,OACZ,CACEC,UAAW3D,GAAY9R,GACvB0V,OAAQX,IAEV/F,EAAWuG,YAfvB,0BAGQI,EAHR,KAoBOT,IACHC,EAAeQ,GACf/R,EAAIkJ,WAAW6I,IAIjBN,EADMO,EAAKN,GAAY,iBAEvBK,EAAKzG,WAAW0G,GA3BlB,6CAZyD,sBAoDzD,SAASC,EAAaC,GACpBA,EAAO1C,iBAAiB,SAAS,WAC/BgB,GAAqBxQ,GAAK,MAE5BkS,EAAO7T,MAAMiO,gBAAkB,mBAC/B4F,EAAO7T,MAAMkI,YAAc,OAC3B2L,EAAO7T,MAAMiH,SAAW,OACxB4M,EAAO7T,MAAM4N,WAAa,kBAC1BiG,EAAO7T,MAAM8T,WAAa,gBAC1BD,EAAO7T,MAAM+T,iBAAmB,gBAChCF,EAAO7T,MAAMgU,OAAS,OA+CxB,OArCArS,EAAI2E,GAAG,eAAe,WAEH,cAAb6M,GAA2B,WAK7B,IAHA,IAAMzM,EAAKwJ,SAAS+D,uBAAuB,gBAFf,WAKnB9K,GACPzC,EAAGyC,GAAG+K,QACNxN,EAAGyC,GAAGgI,iBAAiB,SAAS,WAhBtC,IAAsB0C,EAkBdZ,EAAYhG,WAAW,WAlBT4G,EAmBDnN,EAAGyC,IAlBfnJ,MAAMiO,gBAAkB,UAC/B4F,EAAO7T,MAAMkI,YAAc,QAE3B2L,EAAOK,YAUI/K,EAAI,EAAGA,EAAIzC,EAAGjJ,OAAQ0L,GAAK,EAAI,EAA/BA,GAUTgI,iBAAiB,SAAS,SAAC9J,GACP,KAAdA,EAAE4K,UAC0B,WAA1BgB,EAAYkB,YACdlB,EAAYhG,WAAW,iBACvBkF,GAAqBxQ,GAAK,IAE5BiS,EAAalN,EAAGA,EAAGjJ,OAAS,QAIhC0T,iBAAiB,YAAY,WACG,WAA1B8B,EAAYkB,YACdlB,EAAYhG,WAAW,iBACvBkF,GAAqBxQ,GAAK,IAE5BiS,EAAalN,EAAGA,EAAGjJ,OAAS,OA9BD,MAoC/B,cAAC,EAAD,yBACEQ,UAAU,aACV0C,SAAUA,GAAY,OACtB3B,cAAa,aACXe,KAAM,cAAC,IAAD,IACNP,MAAO,OACPC,OAAQ,eACLT,GAELnB,GAAIA,GACAC,GAVN,aAYE,eAAC,EAAD,WACE,cAAC,IAAD,CACE0B,MAAM,aACNvB,UAAU,6BACVa,QAAS,kBAAM6N,EAAU,eAH3B,SAKE,cAAC,IAAD,MAEF,cAAC,IAAD,CACEnN,MAAM,YACNvB,UAAU,4BACVa,QAAS,kBAAM6N,EAAU,qBAH3B,SAKE,cAAC,IAAD,MAEF,cAAC,IAAD,CACEnN,MAAM,eACNvB,UAAU,+BACVa,QAAS,kBAAM6N,EAAU,iBAH3B,SAKE,cAAC,IAAD,MAEF,cAAC,IAAD,CACEnN,MAAM,YACNvB,UAAU,4BACVa,QAAS,WACP6N,EAAU,cAJd,SAOE,cAAC,IAAD,MAEF,cAAC,IAAD,CACEnN,MAAM,iBACNvB,UAAU,8BACVa,QAAS,YAlHjB,WACE,GAAImU,EAAa,CACfA,EAAY/F,YAEZ,IADA,IAAMxG,EAAKwJ,SAAS+D,uBAAuB,gBACpCvN,EAAGjJ,OAAS,GACjBiJ,EAAG,GAAG0N,UA8GFC,IAJJ,SAOE,cAAC,IAAD,a,iBC5JKC,G,4JAdb,WACE,OACE,cAAC,EAAD,UACA,eAAC,EAAD,CAAKxO,WAAYA,EAAjB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,GAAD,IAEA,cAAC,GAAD,a,GATUyO,aCNlB/C,IAASC,OAET,cAAC,GAAD,IACAvB,SAASoB,eAAe,W","file":"static/js/main.6bf01b63.chunk.js","sourcesContent":["/**\n * Tests if children exist in React.\n * @param {Object} children The children prop of a component.\n * @returns {Boolean}\n */\n\nconst childrenExist = (children) => {\n  if (children === null || children === undefined) return false;\n  // eslint-disable-next-line no-restricted-globals\n  if (typeof children === 'number') return !isNaN(children);\n\n  if (Array.isArray(children)) return children.length > 0;\n\n  return !!children;\n};\n\nexport default childrenExist;\n","import React from 'react';\nimport { Card, Close, Flex, useThemeUI } from 'theme-ui';\n\nconst PanelComponent = ({ closable, onClose, sx, children, ...rest }) => {\n  const { theme } = useThemeUI();\n\n  return (\n    <Card\n      className=\"cl-panel-component\"\n      color=\"text\"\n      sx={{\n        padding: 3,\n        width: '300px',\n        borderRadius: '4px',\n        boxShadow: '0 0 4px rgba(0, 0, 0, .6)',\n        bg: 'background',\n        ...sx,\n        paddingTop: closable ? 0 : 3\n        // paddingRight: closable ? 0 : 3\n      }}\n      {...rest}\n    >\n      {closable && (\n        <Flex\n          sx={{\n            justifyContent: 'flex-end',\n            marginRight: `-${theme.space ? theme.space[3] : 16}px`\n          }}\n        >\n          <Close\n            sx={{\n              color: 'text',\n              height: '24px',\n              width: '24px',\n              ':hover': { cursor: 'pointer' }\n            }}\n            onClick={onClose}\n          />\n        </Flex>\n      )}\n      {children}\n    </Card>\n  );\n};\n\nexport default PanelComponent;\n","import Popover from '@reach/popover';\nimport { useRect } from '@reach/rect';\nimport React, { useRef, useState } from 'react';\nimport { Button } from 'theme-ui';\nimport Panel from './PanelComponent';\n\nconst ButtonComponent = ({ children, buttonOptions, sx, ...rest }) => {\n  const ref = useRef(null);\n  const triggerRect = useRect(ref);\n  const [showPanel, setShowPanel] = useState(false);\n  return (\n    <>\n      <Button\n        ref={ref}\n        title={buttonOptions?.title}\n        className={rest?.className ?? 'cl-btn'}\n        data-testid={buttonOptions?.testId ?? 'cl-btn'}\n        variant={buttonOptions?.variant ?? 'primary'}\n        onClick={() => {\n          if (buttonOptions?.intercept) {\n            try {\n              buttonOptions.intercept();\n            } catch (err) {\n              // eslint-disable-next-line no-console\n              console.error(err);\n            }\n          } else {\n            setShowPanel(!showPanel);\n          }\n        }}\n        sx={{\n          ...sx\n        }}\n      >\n        {buttonOptions?.icon}\n      </Button>\n\n      {showPanel && (\n        <Popover\n        style={{zIndex: sx.zIndex || 2}}\n          targetRef={ref}\n          position={() => ({\n            left: triggerRect?.right + 10,\n            top: triggerRect?.top + window.scrollY\n          })}\n        >\n          <Panel\n            closable\n            onClose={() => setShowPanel(false)}\n            sx={{\n              fontFamily: 'body',\n\n              // bg: 'transparent'\n            }}\n          >\n            {children}\n          </Panel>\n        </Popover>\n      )}\n    </>\n  );\n};\n\nexport default ButtonComponent;\n","// Base Component to give structure to all other major components\n\nimport React from 'react';\nimport { Box } from 'theme-ui';\nimport ButtonComponent from './ButtonComponent';\nimport Panel from './PanelComponent';\n\nconst BaseComponent = ({\n  baseType, // 'none', 'panel', 'button'\n  buttonOptions, // optional\n  children,\n  open,\n  sx,\n  ...rest\n}) => {\n  let topPos = sx?.top ?? '1rem';\n  let leftPos = sx?.left ?? '1rem';\n\n  if (sx?.bottom) {\n    topPos = null;\n  }\n\n  if (sx?.right) {\n    leftPos = null;\n  }\n\n  const baseStyle = {\n    fontFamily: 'body',\n    bg: 'transparent',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    ...sx\n  };\n\n  const panelStyle = {\n    fontFamily: 'body',\n    bg: 'background',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    ...sx\n  };\n\n  const buttonStyle = {\n    fontFamily: 'body',\n    bg: sx?.bg || 'primary',\n    position: sx?.position || 'absolute',\n    top: topPos,\n    left: leftPos,\n    bottom: sx?.bottom,\n    right: sx?.right,\n    zIndex: sx?.zIndex ?? 2,\n    width: '32px',\n    height: '32px',\n    minWidth: '25px',\n    minHeight: '25px',\n    p: 0,\n    m: 1,\n    boxShadow: '0 0 4px rgba(0, 0, 0, .6)',\n    ...sx\n  };\n\n  const defaultType = (\n    <Box {...rest} sx={baseStyle}>\n      {children}\n    </Box>\n  );\n\n  switch (baseType) {\n    case 'none':\n      return defaultType;\n    case 'panel':\n      return (\n        <Panel {...rest} sx={panelStyle}>\n          {children}\n        </Panel>\n      );\n    case 'button':\n      return (\n        <ButtonComponent\n          // eslint-disable-next-line react/no-children-prop\n          children={children}\n          buttonOptions={buttonOptions}\n          sx={buttonStyle}\n          {...rest}\n        />\n      );\n    default:\n      return defaultType;\n  }\n};\n\nexport default BaseComponent;\n","import { createContext } from 'react';\n\nconst DefaultContext = createContext({});\n\nexport default DefaultContext;\n","function mapExists(map) {\n  if (map && Object.keys(map).length > 0) {\n    if (map.style && Object.keys(map.style).length > 0) {\n      return true;\n    } \n      return false;\n    \n  } \n    return false;\n  \n}\n\nexport default mapExists;\n","// @description Load various file format\n// returns GeoJSON\nimport csv2geojson from 'csv2geojson'; // csv\nimport togeojson from '@mapbox/togeojson'; // kml, gpx\nimport shpjs from 'shpjs'; // zipped shapefile\n\nconst config = {\n  maxFileSize: 10e7 // in bytes, 100 mb\n};\n\nclass Importer {\n  constructor() {\n    this.reader = new FileReader();\n    this.reader.onload = this.handleFile.bind(this);\n  }\n\n  load(file, cb) {\n    if (!file) throw new Error('File Required');\n    if (!cb) throw new Error('Callback Required');\n    this.cb = cb;\n    this.file = file;\n    this.fileExt = this.getExtension();\n    this.fileDetails = {\n      fileSize: this.file.size,\n      fileName: this.file.name,\n      fileExt: this.fileExt\n    };\n    if (this.file.size >= config.maxFileSize) {\n      cb({\n        error: 'File must be less than 20mb',\n        fileDetails: this.fileDetails\n      });\n    } else if (this.fileExt.toLowerCase() === 'zip') {\n      this.reader.readAsArrayBuffer(this.file);\n    } else {\n      this.reader.readAsText(this.file, 'UTF-8');\n    }\n  }\n\n  getExtension() {\n    const fArr = this.file.name.split('.');\n    return fArr[fArr.length - 1];\n  }\n\n  handleFile(evt) {\n    switch (this.fileExt.toLowerCase()) {\n      case 'csv':\n        this.handleCSV(evt);\n        break;\n      case 'kml':\n        this.handleKML(evt);\n        break;\n      // case 'topojson':\n      case 'geojson':\n      case 'json':\n        this.handleJSON(evt);\n        break;\n      case 'gpx':\n        this.handleGPX(evt);\n        break;\n      // case 'igc':\n      //   this.handleIGC(evt);\n      //   break;\n      case 'zip':\n        this.handleSHP(evt);\n        break;\n      default:\n        this.notRecognized();\n        break;\n    }\n  }\n\n  handleJSON(evt) {\n    try {\n      /* const res = JSON.parse(evt.target.result);\n             if (res.type && res.type.toLowerCase() === 'topology') {\n        this.handleTopoJSON(evt);\n      } else {\n        this.handleGeoJSON(evt);\n      } */\n      this.handleGeoJSON(evt);\n    } catch (err) {\n      this.cb({\n        error: `Problem parsing JSON (${err.toString()})`,\n        fileDetails: this.fileDetails\n      });\n    }\n  }\n\n  handleCSV(evt) {\n    const latitudes = ['y', 'lat', 'latitude'];\n    const longitudes = ['x', 'lng', 'lon', 'long', 'longitude'];\n    let latitude;\n    let longitude;\n    const csv = evt.target.result;\n    const header = csv.split('\\n')[0].split(',');\n    header.forEach((column) => {\n      if (latitudes.indexOf(column.toLowerCase().trim()) !== -1) {\n        latitude = column.trim();\n      }\n      if (longitudes.indexOf(column.toLowerCase().trim()) !== -1) {\n        longitude = column.trim();\n      }\n    });\n    if (!longitude || !latitude) {\n      throw new Error(\n        'no latitude (y, lat, latitude) or longitude (x, lng, long, longitude) field found'\n      );\n    }\n    csv2geojson.csv2geojson(\n      csv,\n      {\n        latfield: latitude,\n        lonfield: longitude\n      },\n      (err, data) => {\n        if (err) throw err;\n        this.cb(this.fileDetails, data);\n      }\n    );\n  }\n\n  handleKML(evt) {\n    const xml = new window.DOMParser().parseFromString(\n      evt.target.result,\n      'application/xml'\n    );\n    const geojson = togeojson.kml(xml, { style: true });\n    this.cb(this.fileDetails, geojson);\n  }\n\n  handleGeoJSON(evt) {\n    this.cb(this.fileDetails, JSON.parse(evt.target.result));\n  }\n\n  // handleTopoJSON(evt) {\n  //   console.log('handle as topojson');\n  // }\n\n  handleGPX(evt) {\n    const xml = new window.DOMParser().parseFromString(\n      evt.target.result,\n      'application/xml'\n    );\n    const geojson = togeojson.gpx(xml);\n    this.cb(this.fileDetails, geojson);\n  }\n\n  // handleIGC(evt) {\n  //   console.log('handle as igc');\n  // }\n\n  handleSHP(evt) {\n    const geojson = shpjs.parseZip(evt.target.result);\n    this.cb(this.fileDetails, geojson);\n  }\n\n  notRecognized() {\n    // eslint-disable-next-line no-console\n    console.log('sorry, i didnt recognize this format');\n    this.cb({\n      error: `File format ${this.fileExt} not recognized.`,\n      fileDetails: this.fileDetails\n    });\n  }\n}\n\nexport default Importer;\n","import React, { useContext, useState } from 'react';\nimport {\n  Button,\n  Flex,\n  Box,\n  // Link,\n  Text,\n  Input,\n  Checkbox,\n  Label\n} from 'theme-ui';\nimport bbox from '@turf/bbox';\nimport { MdLibraryAdd } from 'react-icons/md';\nimport List from '../_primitives/List';\nimport ListItem from '../_primitives/ListItem';\nimport BaseComponent from '../_common/BaseComponent';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport Importer from './importer/index';\n\nconst importer = new Importer();\n\nconst AddData = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const config = useContext(Context);\n  const { map } = config;\n\n  // state\n  const [tab, setTab] = useState('file'); // file, url, layers\n  const [tmpLayers, setTmpLayers] = useState([]); // added layers\n  // const [file, setFile] = useState(null); // file to upload\n\n  const addLayer = (sourceId, geojson) => {\n    // add multiple layers based on source geometry\n    // Point, MultiPoint\n    // LineString, MultiLineString\n    // Polygon, MultiPolygon\n\n    function setType(geomType) {\n      let type;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          type = 'circle';\n          break;\n        case 'LineString':\n        case 'MultiLineString':\n          type = 'line';\n          break;\n        case 'Polygon':\n        case 'MultiPolygon':\n          type = 'fill';\n          break;\n        default:\n          return '';\n      }\n      return type;\n    }\n\n    function setPaint(geomType) {\n      let paint;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          paint = {\n            'circle-radius': 6,\n            'circle-color': '#B42222',\n            'circle-opacity': 0.6\n          };\n          break;\n\n        case 'LineString':\n        case 'MultiLineString':\n          paint = {\n            'line-color': '#888',\n            'line-width': 8\n          };\n          break;\n\n        case 'Polygon':\n        case 'MultiPolygon':\n          paint = {\n            'fill-color': '#088',\n            'fill-opacity': 0.8\n          };\n          break;\n        default:\n          return null;\n      }\n      return paint;\n    }\n\n    function setFilter(geomType) {\n      let filter;\n      switch (geomType) {\n        case 'Point':\n        case 'MultiPoint':\n          filter = ['==', '$type', 'Point'];\n          break;\n        case 'LineString':\n        case 'MultiLineString':\n          filter = ['==', '$type', 'LineString'];\n          break;\n        case 'Polygon':\n        case 'MultiPolygon':\n          filter = ['==', '$type', 'Polygon'];\n          break;\n        default:\n          return null;\n      }\n      return filter;\n    }\n    const geomTypes = [];\n    /* eslint-disable array-callback-return */\n    geojson.features.map((feature) => {\n      if (geomTypes.indexOf(feature.geometry.type) === -1)\n        geomTypes.push(feature.geometry.type);\n    });\n    /* eslint-enable array-callback-return */\n\n    geomTypes.forEach((type) => {\n      const layerId = `${sourceId}-${type}`;\n      map.addLayer({\n        id: layerId,\n        type: setType(type),\n        source: sourceId,\n        paint: setPaint(type),\n        filter: setFilter(type),\n        layout: {\n          visibility: 'visible'\n        }\n      });\n      setTmpLayers([...tmpLayers, layerId]);\n    });\n  };\n\n  const zoomToLayer = (geojson) => {\n    const bounds = bbox(geojson);\n    map.fitBounds(bounds);\n  };\n\n  const addMapSource = (fileDetails, geojson) => {\n    if (!geojson || !fileDetails) return;\n    const sourceId = fileDetails.fileName;\n    map.addSource(sourceId, {\n      type: 'geojson',\n      data: geojson\n    });\n    addLayer(sourceId, geojson);\n    zoomToLayer(geojson);\n  };\n\n  const loadFile = (e) => {\n    try {\n      importer.load(e.target.files[0], addMapSource);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.warn(err);\n    }\n  };\n\n  const Tabs = () => {\n    return (\n      <Flex\n        sx={{\n          justifyContent: 'center',\n          paddingBottom: '0.5rem'\n        }}\n      >\n        <Button\n          sx={{\n            width: '50%',\n            bg: 'transparent',\n            color: 'text',\n            borderStyle: 'solid',\n            borderRadius: 0,\n            borderTopWidth: 0,\n            borderLeftWidth: 0,\n            borderRightWidth: '.5px',\n            borderBottomWidth: '0.5px',\n            boxShadow: 'none',\n            ':hover': {\n              bg: 'primary',\n              color: 'background'\n            }\n          }}\n          onClick={() => {\n            setTab('file');\n          }}\n        >\n          File\n        </Button>\n\n        <Button\n          sx={{\n            width: '50%',\n            bg: 'transparent',\n            color: 'text',\n            borderStyle: 'solid',\n            borderRadius: 0,\n            borderTopWidth: 0,\n            borderRightWidth: 0,\n            borderBottomWidth: '0.5px',\n            boxShadow: 'none',\n            ':hover': {\n              bg: 'primary',\n              color: 'background'\n            }\n          }}\n          onClick={() => {\n            setTab('url');\n          }}\n        >\n          URL\n        </Button>\n      </Flex>\n    );\n  };\n\n  const ManageLayers = () => {\n    const content = () => {\n      return (\n        <Flex sx={{ justifyContent: 'flex-end' }}>\n          <Button\n            sx={{\n              fontSize: 0,\n              textDecoration: 'underline',\n              color: 'primary',\n              backgroundColor: 'background',\n              ':hover': {\n                backgroundColor: 'background'\n              }\n            }}\n            onClick={(e) => {\n              e.preventDefault();\n              setTab('layers');\n            }}\n          >\n            Manage Layers\n          </Button>\n        </Flex>\n      );\n    };\n    return (\n      <Box\n        sx={{\n          textAlign: 'center',\n          marginTop: '0.5rem'\n        }}\n      >\n        {content()}\n      </Box>\n    );\n  };\n\n  const FileBody = () => {\n    const supportedFileExt = ['.geojson', '.kml', '.gpx', '.csv', '.zip (shp)'];\n    const supported = () => {\n      const title = 'Supported File Extensions:';\n      const subtitle = supportedFileExt.join(', ');\n      return (\n        <Box>\n          <Text sx={{ fontSize: 0 }}>{title}</Text>\n          <Text sx={{ fontSize: 0 }}>{subtitle}</Text>\n          <Input\n            sx={{\n              textAlign: 'center',\n              paddingTop: 1,\n              marginTop: 2,\n              border: 'none',\n              '>button': {\n                boxShadow: 'none'\n              }\n            }}\n            type=\"file\"\n            className=\"file-upload\"\n            onChange={(e) => {\n              loadFile(e);\n            }}\n          />\n          {/* <Flex sx={{ justifyContent: 'flex-end' }}>\n            <Button\n              onClick={e => {\n                loadFile(file);\n              }}\n              variant=\"outline\"\n            >\n              Add Data\n            </Button>\n          </Flex> */}\n        </Box>\n      );\n    };\n    return (\n      <div>\n        <Box\n          sx={{\n            textAlign: 'center'\n          }}\n        >\n          {supported()}\n        </Box>\n        <ManageLayers />\n      </div>\n    );\n  };\n\n  const UrlBody = () => {\n    return (\n      <div>\n        <Input /* fluid */ placeholder=\"Paste URL Here\" />\n        <Button\n          // mt={1}\n          /* fluid */\n          css={{ marginTop: '0.5rem' }}\n          /*           icon=\"files-upload\" */\n        >\n          Add Layer\n        </Button>\n        <ManageLayers />\n      </div>\n    );\n  };\n\n  const TabBody = () => {\n    return (\n      <div styles={{ width: '100%' }}>\n        <Tabs />\n        {tab === 'file' ? <FileBody /> : <UrlBody />}\n      </div>\n    );\n  };\n\n  const LayerBody = () => {\n    const items = () => {\n      const isVisible = (layerId) => {\n        const layerVisibility = map.getLayoutProperty(layerId, 'visibility');\n        const checked = layerVisibility !== 'none';\n        return checked;\n      };\n\n      const handleChange = (layerId) => {\n        const checked = isVisible(layerId);\n        if (checked) {\n          map.setLayoutProperty(layerId, 'visibility', 'none');\n        } else {\n          map.setLayoutProperty(layerId, 'visibility', 'visible');\n        }\n      };\n      return tmpLayers.map((layerId, i) => {\n        return (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${layerId}-${i}`}\n          >\n            {' '}\n            <Label>\n              <Checkbox\n                onChange={() => {\n                  handleChange(layerId);\n                }}\n                defaultChecked={isVisible(layerId)}\n              />\n              <Text pt={1}>{layerId}</Text>\n            </Label>\n          </ListItem>\n        );\n      });\n    };\n\n    return (\n      <div style={{ width: '100%' }}>\n        <Button\n          sx={{\n            fontSize: 0,\n            textDecoration: 'underline',\n            color: 'primary',\n            backgroundColor: 'background',\n            ':hover': {\n              backgroundColor: 'background'\n            }\n          }}\n          onClick={(e) => {\n            e.preventDefault();\n            setTab('file');\n          }}\n        >\n          &lt;&lt; Back\n        </Button>\n        <Box sx={{ marginTop: '0.5rem' }} content={<List>{items()}</List>} />\n      </div>\n    );\n  };\n\n  const Body = () => {\n    return (\n      <div style={{ width: '100%' }}>\n        {tab === 'layers' ? <LayerBody /> : <TabBody />}\n      </div>\n    );\n  };\n\n  if (!mapExists(map)) return null;\n\n  return (\n    <BaseComponent\n      baseType={baseType}\n      buttonOptions={{\n        icon: <MdLibraryAdd />,\n        title: 'Add Data',\n        testId: 'add-data-btn',\n        ...buttonOptions\n      }}\n      sx={sx}\n      {...rest}\n    >\n      <Body />\n    </BaseComponent>\n  );\n};\n\nexport default AddData;\n","import React, { useState } from 'react';\n\nimport { Alert, Button, Flex } from 'theme-ui';\n\nconst AlertModal = ({ message }) => {\n  const [show, setShow] = useState(true);\n\n  if (!show) return null;\n  return (\n    <Alert variant=\"modal\">\n      <Flex sx={{ flexDirection: 'column' }}>\n        <Flex sx={{ width: '100%', position: 'relative' }}>\n          <p style={{ padding: 1 }}>{message}</p>\n        </Flex>\n        <Flex sx={{ justifyContent: 'flex-end' }}>\n          <Button\n            variant=\"secondary\"\n            onClick={() => {\n              setShow(false);\n            }}\n          >\n            OK\n          </Button>\n        </Flex>\n      </Flex>\n    </Alert>\n  );\n};\n\nexport default AlertModal;\n","import React, { useEffect, useContext } from 'react';\nimport { Box } from 'theme-ui';\nimport mapboxgl from 'mapbox-gl';\nimport DefaultContext from '../../DefaultContext';\nimport AlertModal from '../_common/AlertModal';\n\nconst Map = ({ mapOptions, mapLayers, supportMessage, sx, ...rest }) => {\n  let map;\n  const config = useContext(DefaultContext);\n  const { setMap } = config;\n\n  const addLayers = (layers) => {\n    if (!layers) return;\n    map.on('load', () => {\n      layers.forEach((l) => {\n        map.addLayer(l);\n      });\n    });\n  };\n\n  useEffect(() => {\n    // init the map\n    map = new mapboxgl.Map(mapOptions);\n    setMap(map);\n\n    addLayers(mapLayers);\n  }, []);\n\n  if (!mapboxgl.supported()) {\n    return (\n      <AlertModal\n        message={\n          supportMessage ||\n          `WARNING! Your browser does not currently support this application, which requires MapboxGL. \n    Please ensure you are using the latest version of Chrome, Firefox, or Edge.\n    Additionally, check https://get.webgl.org/ for compatibility with your system.`\n        }\n      />\n    );\n  }\n\n  return (\n    <Box\n      {...rest}\n      sx={{ width: '100vw', height: '100vh', ...sx }}\n      ref={(el) => {\n        // eslint-disable-next-line no-param-reassign\n        mapOptions.container = el;\n      }}\n      className=\"cl-map-container\"\n    />\n  );\n};\n\nexport default Map;\n","import React from 'react';\nimport { Label, Radio } from 'theme-ui';\n\nconst RadioGroupItem = (props) => {\n  const { name, item, defaultChecked, checkedChanged } = props;\n\n  return (\n    <Label\n      className=\"cl-radio-group-item\"\n      {...props}\n      sx={{\n        // color: 'text',\n        fontSize: '12px',\n        marginRight: '2px',\n        '>span': {\n          paddingTop: '3px'\n        }\n      }}\n    >\n      <Radio\n        color=\"primary\"\n        name={name}\n        id={item.name}\n        value={item.value}\n        defaultChecked={defaultChecked}\n        sx={{\n          'input:checked ~ &': {\n            color: 'primary'\n          },\n          'input:focus ~ &': {\n            bg: 'highlight'\n          }\n        }}\n        onChange={(e) => checkedChanged(e, item)}\n      />\n      <span>{item.label}</span>\n    </Label>\n  );\n};\n\nexport default RadioGroupItem;\n","import React from 'react';\nimport { Box } from 'theme-ui';\nimport RadioGroupItem from './RadioGroupItem';\nimport childrenExist from '../../util/childrenExist';\n\n/**\n * @class RadioGroup\n * @param {Array} items\n * @param {String} name\n * @param {String} checkedValue\n * @param {Func} checkedValueChange\n */\n\nconst RadioGroup = (props) => {\n  const {\n    children,\n    items,\n    name,\n    /* checkedValue, */ checkedValueChange\n  } = props;\n  const style = {\n    bg: 'transparent',\n    color: 'primary',\n    display: 'flex',\n    padding: 0\n  };\n\n  if (childrenExist(children)) {\n    return (\n      <Box {...props} className=\"cl-radio-group\" sx={style}>\n        {children}\n      </Box>\n    );\n  }\n\n  return (\n    <Box {...props} className=\"cl-radio-group\" sx={style}>\n      {items.map((item) => {\n        return (\n          <RadioGroupItem\n            key={item.value}\n            name={name}\n            item={item}\n            defaultChecked={item.checked}\n            checkedChanged={checkedValueChange}\n          />\n        );\n      })}\n    </Box>\n  );\n};\n\nexport default RadioGroup;\n","import React from 'react';\nimport { Flex } from 'theme-ui';\n\nconst ButtonGroup = ({ buttons, sx, children, ...rest }) => {\n  let content;\n  if (buttons) {\n    content = buttons;\n  } else {\n    content = children;\n  }\n  return (\n    <Flex\n      alignItems=\"center\"\n      {...rest}\n      className=\"cl-button-group\"\n      sx={{\n        ...sx,\n        '> button': {\n          height: '32px',\n          borderRadius: 0,\n          borderWidth: '0.25px',\n          borderColor: 'muted',\n          borderStyle: 'solid',\n          ':first-of-type': {\n            borderTopLeftRadius: 'default',\n            borderBottomLeftRadius: 'default',\n            borderWidth: '0.5px',\n            borderColor: 'muted',\n            borderStyle: 'solid'\n          },\n          ':last-child': {\n            borderTopRightRadius: 'default',\n            borderBottomRightRadius: 'default',\n            borderWidth: '0.5px',\n            borderColor: 'muted',\n            borderStyle: 'solid'\n          }\n        }\n      }}\n    >\n      {content}\n    </Flex>\n  );\n};\n\nexport default ButtonGroup;\n","// BasemapSwitcher  Component for changing basemaps\n\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport { Button } from 'theme-ui';\nimport { FaMap } from 'react-icons/fa';\nimport DefaultContext from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport RadioGroup from '../_primitives/RadioGroup';\nimport ButtonGroup from '../_primitives/ButtonGroup';\nimport BaseComponent from '../_common/BaseComponent';\n/**\n * @class BasemapSwitcher\n */\n\nconst BasemapSwitcher = ({\n  switcherStyle,\n  basemaps,\n  preserveLayers, // array of objects, each with 'source' and 'layer' properties. see https://bl.ocks.org/ryanbaumann/7f9a353d0a1ae898ce4e30f336200483/96bea34be408290c161589dcebe26e8ccfa132d7\n  baseType,\n  buttonOptions,\n  sx,\n  ...rest\n}) => {\n  const [basemapValue, setBasemapValue] = useState(\n    basemaps ? basemaps[0].value : 'light-v10'\n  );\n  const config = useContext(DefaultContext);\n  const { map } = config;\n\n  const didMountRef = useRef(false);\n\n  const handleChange = (e, props) => {\n    setBasemapValue(props.value);\n  };\n\n  useEffect(() => {\n    if (didMountRef.current) {\n      map.setStyle(`mapbox://styles/mapbox/${basemapValue}`);\n    } else {\n      didMountRef.current = true;\n    }\n  }, [basemapValue]);\n\n  useEffect(() => {\n    if (mapExists(map)) {\n      map.on('load', () => {\n        map.setStyle(`mapbox://styles/mapbox/${basemapValue}`);\n\n        map.on('styledata', () => {\n          const waiting = () => {\n            if (!map.isStyleLoaded()) {\n              setTimeout(waiting, 200);\n            } else {\n              for (let i = 0; i < preserveLayers?.length; i += 1) {\n                const p = preserveLayers[i];\n                if (!map.getSource(p.layer.source)) {\n                  map.addSource(p.layer.source, p.source);\n                  map.addLayer(p.layer);\n                }\n              }\n            }\n          };\n          waiting();\n        });\n      });\n    }\n  }, [map]);\n\n  const basemapOptions = basemaps || [\n    {\n      name: 'Light',\n      key: 'Light',\n      label: 'Light',\n      value: 'light-v10',\n      checked: true\n    },\n    {\n      name: 'Dark',\n      key: 'Dark',\n      label: 'Dark',\n      value: 'dark-v10'\n    },\n    {\n      name: 'satellite',\n      key: 'satellite',\n      label: 'Satellite',\n      value: 'satellite-streets-v9',\n\n    }\n  ];\n\n  let switcher;\n\n  switch (switcherStyle) {\n    case 'radio':\n      switcher = (\n        <RadioGroup\n          items={basemapOptions}\n          name=\"basemaps\"\n          checkedValueChange={handleChange}\n        />\n      );\n      break;\n\n    case 'buttons':\n      // eslint-disable-next-line no-case-declarations\n      const buttons = basemapOptions.map((item) => {\n        return (\n          <Button key={item.label} onClick={(e) => handleChange(e, item)}>\n            {item.label}\n          </Button>\n        );\n      });\n\n      switcher = <ButtonGroup buttons={buttons} />;\n      break;\n    default:\n      switcher = (\n        <RadioGroup\n          items={basemapOptions}\n          name=\"basemaps\"\n          checkedValueChange={handleChange}\n        />\n      );\n      break;\n  }\n\n  return (\n    <BaseComponent\n      baseType={baseType}\n      buttonOptions={{\n        icon: <FaMap />,\n        title: 'Basemap Switcher',\n        testId: 'cl-basemap-btn',\n        ...buttonOptions\n      }}\n      {...rest}\n      // type={switcherStyle === 'buttons' ? 'none' : 'panel'}\n      sx={sx}\n      className=\"cl-basemap-switcher\"\n    >\n      {switcher}\n    </BaseComponent>\n  );\n};\n\nexport default BasemapSwitcher;\n","import config from '../config';\n\nconst mapOptions = {\n  container: 'map',\n  style: 'mapbox://styles/mapbox/light-v10',\n  center: [12, 50],\n  zoom: 3,\n  accessToken: config.mapboxToken\n};\n\nexport default mapOptions;\n","export default {\n  mapboxToken: 'pk.eyJ1IjoiZWxrYWxvbmFyaXMiLCJhIjoiY2twbXExOHcwMDg3ZzJvbnc0dXhyOWszOSJ9.AetSK7t4L_aaFVsCuNQmHg'\n};\n","import React, { useState } from 'react';\n// import { ThemeProvider as EmotionProvider } from 'emotion-theming';\nimport { ThemeProvider as ThemeUIProvider } from 'theme-ui';\nimport DefaultContext from '../../DefaultContext';\n\nconst ElementsProvider = ({\n  children,\n  context,\n  theme,\n  // themeUI,\n  mapOverride\n}) => {\n  const ctx = context || DefaultContext;\n  const ContextProvider = ctx.Provider || ctx;\n  const [map, setMap] = useState(null);\n\n  const value = {\n    map: mapOverride || map,\n    setMap\n  };\n\n  // let provider = (\n  //   <EmotionProvider theme={theme || {}}>{children}</EmotionProvider>\n  // );\n\n  // if (themeUI === true) {\n  //   provider = (\n  //     <ThemeUIProvider theme={theme || {}}>{children}</ThemeUIProvider>\n  //   );\n  // }\n\n  const provider = (\n    <ThemeUIProvider theme={theme || {}}>{children}</ThemeUIProvider>\n  );\n\n  return <ContextProvider value={value}>{provider}</ContextProvider>;\n};\n\nexport default ElementsProvider;\n","import { /* React, */ useContext, useState } from 'react';\nimport { ScaleControl } from 'mapbox-gl';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\n\nconst ScaleBar = (props) => {\n  const { position, maxWidth, unit } = props;\n  const [scale /* setScale */] = useState(\n    new ScaleControl({\n      maxWidth: maxWidth || 100,\n      unit: unit || 'metric'\n    })\n  );\n  const config = useContext(Context);\n  const { map } = config;\n\n  if (!mapExists(map)) {\n    return null;\n  }\n\n  const ctrlPosition = position || 'bottom-left';\n\n  // if we don't limit the addition to the map load event, we can\n  // end up adding a lot of controls. For example, without this, the knobs\n  // in Storybook added multiple versions of the component. I've tinkered with\n  // trying to remove controls after comparing state, but so far no luck\n  map.on('load', () => {\n    map.addControl(scale, ctrlPosition);\n  });\n\n  return null; // no component returned for mapbox controls\n};\n\nexport default ScaleBar;\n","export default async function calculateMeasurements(feature, units) {\n  // lazy load these deps\n\n  const { default: area } = await import('@turf/area');\n  const { default: length } = await import('@turf/length');\n\n  const drawnLength = length(feature) * 1000; // meters\n  const drawnArea = area(feature); // square meters\n\n  let measurement;\n\n  if (drawnLength > drawnArea) {\n    switch (units) {\n      case 'm':\n        measurement = drawnLength;\n        break;\n      case 'ft':\n        measurement = drawnLength * 3.28084;\n        break;\n      case 'km':\n        measurement = drawnLength / 1000;\n        break;\n      case 'mi':\n        measurement = drawnLength * 0.000621371;\n        break;\n      default:\n        measurement = drawnLength;\n        break;\n    }\n  } else {\n    switch (units) {\n      case 'm':\n        measurement = drawnArea;\n        break;\n      case 'ft':\n        measurement = drawnArea * 10.7639;\n        break;\n      case 'km':\n        measurement = drawnArea / 1000000;\n        break;\n      case 'mi':\n        measurement = drawnArea / 2589988.1103;\n        break;\n      case 'ac':\n        measurement = drawnArea * 0.000247105;\n        break;\n      default:\n        measurement = drawnArea;\n        break;\n    }\n  }\n\n  return measurement;\n}\n","/** @jsxImportSource theme-ui */\nimport { /* React, */ useState, useEffect, useContext } from 'react';\nimport { Flex, Button, Box, Text, Select } from 'theme-ui';\nimport { MdTimeline as LineIcon } from 'react-icons/md';\nimport {\n  FaDrawPolygon as PolygonIcon,\n  FaRuler,\n  FaTrash as TrashIcon\n} from 'react-icons/fa';\nimport numeral from 'numeral';\n\nimport ButtonGroup from '../_primitives/ButtonGroup';\nimport Context from '../../DefaultContext';\nimport mapExists from '../../util/mapExists';\nimport calculateMeasurements from './calculateMeasurements';\nimport BaseComponent from '../_common/BaseComponent';\n\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\n\nconst Measure = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const config = useContext(Context);\n  const { map } = config;\n  const [measureControl, setMeasureControl] = useState(null);\n  const [areaPopupOpen, setAreaPopupOpen] = useState(false);\n  const [linePopupOpen, setLinePopupOpen] = useState(false);\n  const [measurement, setMeasurement] = useState(0);\n  const [units, setUnits] = useState('m');\n  const [showDelete, setShowDelete] = useState(false);\n\n  const lengthOptions = ['m', 'ft', 'km', 'mi'];\n  const areaOptions = ['m', 'ft', 'km', 'mi', 'ac'];\n\n  async function handleMeasurement() {\n    if (measureControl) {\n      const { features } = measureControl.getAll();\n\n      if (features && features.length > 0) {\n        const feature = features[0];\n\n        const drawnMeasurements = await calculateMeasurements(feature, units); //eslint-disable-line\n\n        setMeasurement(drawnMeasurements);\n        // setLinePopupOpen(true);\n      }\n    }\n  }\n\n  useEffect(() => {\n    handleMeasurement();\n  }, [units]);\n\n  if (!mapExists(map)) {\n    return null;\n  }\n\n  const changeUnits = (e) => {\n    setUnits(e.currentTarget.value);\n  };\n\n  async function startDraw(type) {\n    // console.log(`start measure ${type}`);\n    if (!mapExists(map)) return;\n    let measure = measureControl || false;\n\n    if (!measureControl) {\n      measure = await import('@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw').then(\n        ({ default: MapboxDraw }) =>\n          new MapboxDraw({\n            displayControlsDefault: false\n            // modes: MapboxDraw.modes\n          })\n      );\n\n      setMeasureControl(measure);\n      map.addControl(measure);\n    }\n\n    measure.changeMode(type);\n\n    if (type === 'draw_line_string') {\n      setUnits('m');\n    } else if (type === 'draw_polygon') {\n      setUnits('m');\n    }\n    setShowDelete(true);\n  }\n\n  function reset() {\n    measureControl.deleteAll();\n    setMeasurement(0);\n    measureControl.changeMode('simple_select');\n    setShowDelete(false);\n    setAreaPopupOpen(false);\n    setLinePopupOpen(false);\n  }\n\n  // map.on('draw.create', (e) => {\n  //   // if (measureControl) {\n  //   //   setTimeout(function() {\n  //   //     measureControl.deleteAll();\n  //   //   }, 2000);\n  //   // }\n  // });\n\n  map.on('draw.render', (/* e */) => {\n    handleMeasurement();\n  });\n\n  let deleteButton;\n\n  if (showDelete) {\n    deleteButton = (\n      <Button\n        title=\"Delete Measurement\"\n        className=\"draw-tool draw-tool--delete\"\n        onClick={() => {\n          reset();\n        }}\n      >\n        <TrashIcon />\n      </Button>\n    );\n  }\n\n  const display = linePopupOpen || areaPopupOpen ? 'block' : 'none';\n  let displayContent;\n\n  if (linePopupOpen && !areaPopupOpen) {\n    displayContent = (\n      <Flex>\n        <Box>{`${numeral(measurement).format('0,0.00')}`}</Box>\n        <Select\n          name=\"measure-units\"\n          sx={{\n            position: 'relative',\n            width: 55,\n            border: 'none',\n            paddingTop: 0\n          }}\n          onChange={changeUnits}\n          defaultValue={lengthOptions[0]}\n        >\n          {lengthOptions.map((option) => (\n            <option key={option} sx={{ color: 'text' }}>\n              {option}\n            </option>\n          ))}\n        </Select>\n      </Flex>\n    );\n  } else if (!linePopupOpen && areaPopupOpen) {\n    displayContent = (\n      <Flex>\n        <Box sx={{ color: 'background' }}>{`${numeral(measurement).format(\n          '0,0.00'\n        )}`}</Box>\n        <Select\n          name=\"measure-units\"\n          sx={{\n            color: 'background',\n            position: 'relative',\n            width: 55,\n            border: 'none',\n            paddingTop: 0\n          }}\n          onChange={changeUnits}\n          defaultValue={areaOptions[0]}\n        >\n          {areaOptions.map((option) => (\n            <option key={option} sx={{ color: 'text' }}>\n              {option}\n            </option>\n          ))}\n        </Select>\n      </Flex>\n    );\n  }\n\n  return (\n    <BaseComponent\n      className=\"cl-measure-tools\"\n      baseType={baseType || 'none'}\n      sx={sx}\n      buttonOptions={{\n        icon: <FaRuler />,\n        title: 'Measure',\n        testId: 'cl-measure-btn',\n        ...buttonOptions\n      }}\n      {...rest}\n    >\n      <ButtonGroup>\n        <Button\n          height={33.5}\n          // sx={{ height: '33.5px' }}\n          className=\"draw-tool\"\n          onClick={() => {\n            measureControl.changeMode('simple_select');\n            setLinePopupOpen(false);\n            setAreaPopupOpen(false);\n          }}\n        >\n          <Text sx={{ fontSize: '12px' }}>Measure</Text>\n        </Button>\n        <Button\n          title=\"Measure Line\"\n          className=\"draw-tool draw-tool--line\"\n          onClick={() => {\n            startDraw('draw_line_string');\n            setLinePopupOpen(true);\n            setAreaPopupOpen(false);\n          }}\n        >\n          <LineIcon />\n        </Button>\n        <Button\n          title=\"Measure Area\"\n          className=\"draw-tool draw-tool--polygon\"\n          onClick={() => {\n            startDraw('draw_polygon');\n            setAreaPopupOpen(true);\n            setLinePopupOpen(false);\n          }}\n        >\n          <PolygonIcon />\n        </Button>\n        {deleteButton}\n      </ButtonGroup>\n      <Box\n        bg=\"primary\"\n        p={2}\n        color=\"background\"\n        height=\"32px\"\n        width={135}\n        sx={{\n          display,\n          borderColor: 'white',\n          borderWidth: 1,\n          borderStyle: 'solid'\n        }}\n      >\n        {displayContent}\n      </Box>\n    </BaseComponent>\n  );\n};\n\nexport default Measure;\n","/** @jsxImportSource theme-ui */\nimport {\n  Container,\n  Label,\n  Select,\n  Input,\n  Grid,\n  Box,\n  Text,\n  Close,\n  Link\n} from 'theme-ui';\nimport { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport { CompactPicker } from 'react-color';\n\nconst LabelMaker = ({ x, y, target, theme }) => {\n  target.style.padding = '4px';\n  target.style.textShadow = 'none';\n\n  const [hidden, setHidden] = useState(false);\n\n  const [textColor, setTextColor] = useState(target.style.color || 'black');\n  const [backgroundColor, setBackgroundColor] = useState(\n    target.style.backgroundColor || 'white'\n  );\n\n  const [colorPickerActive, setColorPickerActive] = useState(false);\n  const [currentColorPicker, setCurrentColorPicker] = useState(false);\n\n  const updateText = (e) => {\n    target.innerHTML = e.target.value.toUpperCase();\n  };\n\n  const updateFontSize = (e) => {\n    target.style.fontSize = `${e.target.value}px`;\n  };\n\n  const updateFontFamily = (e) => {\n    target.style.fontFamily = e.target.value;\n  };\n\n  const updateFontWeight = (e) => {\n    target.style.fontWeight = e.target.value;\n  };\n\n  const updateColors = (color) => {\n    const { hex } = color;\n    if (currentColorPicker === 'fg') {\n      target.style.color = hex;\n      setTextColor(hex);\n    } else if (currentColorPicker === 'bg') {\n      target.style.backgroundColor = hex;\n      setBackgroundColor(hex);\n    }\n  };\n\n  return (\n    <Draggable handle=\".handle\">\n      <Box\n        sx={{\n          position: 'absolute',\n          top: `${y}px`,\n          left: `${x}px`,\n          zIndex: 99,\n          backgroundColor: 'white',\n          width: '280px',\n          borderRadius: '9px',\n          display: hidden ? 'none' : ''\n        }}\n      >\n        <Container\n          className=\"handle\"\n          sx={{\n            textAlign: 'center',\n            cursor: 'pointer',\n            backgroundColor: theme.colors.primary,\n            borderTopLeftRadius: '9px',\n            borderTopRightRadius: '9px',\n            padding: '5px'\n          }}\n        >\n          <Text sx={{ color: 'white', fontFamily: theme.fonts.body }}>\n            Label Editor\n          </Text>\n          <Close\n            sx={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              color: 'white',\n              cursor: 'pointer'\n            }}\n            onClick={() => {\n              setHidden(true);\n            }}\n          />\n        </Container>\n\n        <Container>\n          <Box sx={{ margin: '2.5px' }}>\n            <Label sx={{ fontFamily: theme.fonts.body }} htmlFor=\"label-edit\">\n              Label\n            </Label>\n            <Input\n              placeholder={target.innerHTML}\n              name=\"label-edit\"\n              id=\"label-edit\"\n              onChange={updateText}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-size-edit\"\n            >\n              Font Size\n            </Label>\n            <Input\n              placeholder={target.style.fontSize.replace('px', '') || '12'}\n              name=\"font-size-edit\"\n              id=\"font-size-edit\"\n              onChange={updateFontSize}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-family-edit\"\n            >\n              Font Family\n            </Label>\n            <Select\n              name=\"font-family-edit\"\n              id=\"font-family-edit\"\n              mb={1}\n              onChange={updateFontFamily}\n              sx={{ padding: '2px' }}\n            >\n              <option value=\"serif\">Serif</option>\n              <option value=\"sans-serif\">Sans-Serif</option>\n              <option value=\"cursive\">Cursive</option>\n              <option value=\"monospace\">Monospace</option>\n              <option value=\"fantasy\">Fantasy</option>\n            </Select>\n\n            <Label\n              sx={{ fontFamily: theme.fonts.body }}\n              htmlFor=\"font-weight-edit\"\n            >\n              Font Weight\n            </Label>\n            <Input\n              placeholder={target.style.fontWeight || 200}\n              name=\"font-weight-edit\"\n              id=\"font-weight-edit\"\n              onChange={updateFontWeight}\n              sx={{ padding: '2px' }}\n              mb={1}\n            />\n\n            <Box\n              sx={{ textAlign: currentColorPicker === 'fg' ? 'left' : 'right' }}\n              mb={1}\n            >\n              {colorPickerActive ? (\n                <CompactPicker onChange={updateColors} />\n              ) : (\n                ''\n              )}\n            </Box>\n\n            <Grid gap={2} mb={1} columns={[2, '1fr 1fr']}>\n              <Box\n                bg={textColor}\n                onClick={() => {\n                  if (currentColorPicker === 'fg') {\n                    setColorPickerActive(false);\n                    setCurrentColorPicker(false);\n                  } else {\n                    setColorPickerActive(true);\n                    setCurrentColorPicker('fg');\n                  }\n                }}\n                sx={{\n                  color: 'white',\n                  cursor: 'pointer',\n                  border:\n                    currentColorPicker === 'fg' ? 'solid greenyellow 3px' : ''\n                }}\n              >\n                FG\n              </Box>\n              <Box\n                bg={backgroundColor}\n                onClick={() => {\n                  if (currentColorPicker === 'bg') {\n                    setColorPickerActive(false);\n                    setCurrentColorPicker(false);\n                  } else {\n                    setColorPickerActive(true);\n                    setCurrentColorPicker('bg');\n                  }\n                }}\n                sx={{\n                  cursor: 'pointer',\n                  border:\n                    currentColorPicker === 'bg' ? 'solid greenyellow 3px' : ''\n                }}\n              >\n                BG\n              </Box>\n            </Grid>\n\n            <Box p={2} sx={{ textAlign: 'center' }}>\n              <Link\n                sx={{ color: '#a70000', fontFamily: theme.fonts.body }}\n                href=\"#!\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  const choice = window.confirm('are you sure');\n                  if (choice) {\n                    target.parentNode.removeChild(target);\n                    setHidden(true);\n                  }\n                }}\n              >\n                Delete Label\n              </Link>\n            </Box>\n          </Box>\n        </Container>\n      </Box>\n    </Draggable>\n  );\n};\n\nexport default LabelMaker;\n","// custom text mode for mapbox draw\nimport mapboxgl from 'mapbox-gl';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport LabelMaker from './LabelMaker';\n\nconst GetTextMode = (theme) => {\n  const TextMode = {};\n\n  // /**\n  //  * @param {String} HTML representing a single element\n  //  * @return {Element}\n  //  */\n  function htmlToElement(html) {\n    const template = document.createElement('template');\n    template.innerHTML = html.trim(); // Never return a text node of whitespace as the result\n    return template.content.firstChild;\n  }\n\n  // When the mode starts this function will be called.\n  // The `opts` argument comes from `draw.changeMode('lotsofpoints', {count:7})`.\n  // The value returned should be an object and will be passed to all other lifecycle functions\n  TextMode.onSetup = function (/* opts */) {\n    const state = {};\n    // state.count = opts.count || 0;\n    return state;\n  };\n\n  // Whenever a user clicks on the map, Draw will call `onClick`\n  TextMode.onClick = function (state, e) {\n    // `this.newFeature` takes geojson and makes a DrawFeature\n    const point = this.newFeature({\n      type: 'Feature',\n      // properties: {\n      //   count: state.count\n      // },\n      geometry: {\n        type: 'Point',\n        coordinates: [e.lngLat.lng, e.lngLat.lat]\n      }\n    });\n    // this.addFeature(point); // puts the point on the map\n\n    const marker = new mapboxgl.Marker({\n      element: htmlToElement(\n        // `<input class='cc-draw-text' style='text-align: center;' onkeypress=\"this.style.width = ((this.value.length + 1) * 8) + 'px';\" />`\n        `<p class=\"cl-draw-text\" style=\"text-shadow:0 0 4px #FFFFFF;text-stroke: .1em #FFFFFF; webkit-text-stroke = .1em #FFFFFF; cursor: context-menu\" title=\"Right click to edit label style\">New Label</p>`\n      ),\n      // element: document.createElement('input'),\n      draggable: true\n    });\n\n    marker.getElement().addEventListener('contextmenu', (clickEvent) => {\n      const exists = document.getElementById('label-maker');\n      if (exists) {\n        exists.parentNode.removeChild(exists);\n      }\n      const container = document.createElement('div');\n      container.id = 'label-maker';\n      document.body.appendChild(container);\n      ReactDOM.render(\n        <LabelMaker\n          x={clickEvent.clientX + 50}\n          y={clickEvent.clientY + 25}\n          target={clickEvent.target}\n          theme={theme}\n        />,\n        container\n      );\n    });\n\n    marker.setLngLat(e.lngLat);\n    marker.addTo(this.map);\n\n    this.map.fire('draw.create', {\n      features: [point.toGeoJSON()]\n    });\n\n    this.changeMode('simple_select');\n  };\n\n  // Whenever a user clicks on a key while focused on the map, it will be sent here\n  TextMode.onKeyUp = function (state, e) {\n    if (e.keyCode === 27) return this.changeMode('simple_select');\n    return false;\n  };\n\n  // This is the only required function for a mode.\n  // It decides which features currently in Draw's data store will be rendered on the map.\n  // All features passed to `display` will be rendered, so you can pass multiple display features per internal feature.\n  // See `styling-draw` in `API.md` for advice on making display features\n  TextMode.toDisplayFeatures = function (state, geojson, display) {\n    display(geojson);\n  };\n\n  return TextMode;\n};\n\nexport default GetTextMode;\n","export default function allowMapInteractions(map, allow) {\n  // console.log(map, allow);\n  if (allow) {\n    map.boxZoom.enable();\n    map.scrollZoom.enable();\n    map.dragPan.enable();\n    map.dragRotate.enable();\n    map.keyboard.enable();\n    map.doubleClickZoom.enable();\n    map.touchZoomRotate.enable();\n  } else {\n    map.boxZoom.disable();\n    map.scrollZoom.disable();\n    map.dragPan.disable();\n    map.dragRotate.disable();\n    map.keyboard.disable();\n    map.doubleClickZoom.disable();\n    map.touchZoomRotate.disable();\n  }\n  // console.log(map.dragPan);\n}\n","import allowMapInteractions from './allowMapInteractions';\n\nconst StaticMode = {};\n\nStaticMode.onSetup = function() {\n  this.setActionableState(); // default actionable state is false for all actions\n  allowMapInteractions(this.map, false);\n  return {};\n};\n\nStaticMode.toDisplayFeatures = function(state, geojson, display) {\n  display(geojson);\n};\n\nexport default StaticMode;\n","/* eslint-disable no-param-reassign */\n\nimport React, { useState, useContext } from 'react';\nimport { Button, useThemeUI } from 'theme-ui';\nimport {\n  MdDelete as DeleteIcon,\n  MdPlace as PointIcon,\n  MdTimeline as LineIcon,\n  MdTextFormat as TextIcon\n} from 'react-icons/md';\nimport { FaDrawPolygon as PolygonIcon, FaPencilAlt } from 'react-icons/fa';\n\n// import { useTheme } from 'emotion-theming';\nimport ButtonGroup from '../_primitives/ButtonGroup';\nimport Context from '../../DefaultContext';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css';\nimport mapExists from '../../util/mapExists';\n\nimport GetTextMode from './textDrawMode';\nimport StaticMode from './staticDrawMode';\nimport allowMapInteractions from './allowMapInteractions';\nimport BaseComponent from '../_common/BaseComponent';\n\nconst Draw = ({ baseType, buttonOptions, sx, ...rest }) => {\n  const {theme} = useThemeUI();\n\n  const config = useContext(Context);\n  const { map } = config;\n  const [drawControl, setDrawControl] = useState(null);\n  const [nextMode, setNextMode] = useState(null);\n\n  if (!mapExists(map)) {\n    return null;\n  }\n\n  async function startDraw(drawType) {\n    // console.log(`start drawing ${drawType}`);\n\n    const draw =\n      drawControl ||\n      (await import('@mapbox/mapbox-gl-draw').then(\n        ({ default: MapboxDraw }) =>\n          new MapboxDraw({\n            displayControlsDefault: false,\n            // eslint-disable-next-line prefer-object-spread\n            modes: Object.assign(\n              {\n                draw_text: GetTextMode(theme),\n                static: StaticMode\n              },\n              MapboxDraw.modes\n            )\n          })\n      ));\n\n    if (!drawControl) {\n      setDrawControl(draw);\n      map.addControl(draw);\n    }\n\n    const nm = drawType || 'simple_select';\n    setNextMode(nm);\n    draw.changeMode(nm);\n  }\n\n  function clearDrawings() {\n    if (drawControl) {\n      drawControl.deleteAll();\n      const el = document.getElementsByClassName('cl-draw-text');\n      while (el.length > 0) {\n        el[0].remove();\n      }\n    }\n  }\n\n  function hideTextArea(textEl) {\n    textEl.addEventListener('click', (/* e */) => {\n      allowMapInteractions(map, false);\n    });\n    textEl.style.backgroundColor = 'rgba(0, 0, 0, 0)';\n    textEl.style.borderStyle = 'none';\n    textEl.style.fontSize = '14px';\n    textEl.style.textShadow = '0 0 2px #FFFFFF';\n    textEl.style.textStroke = '.02em #FFFFFF';\n    textEl.style.webkitTextStroke = '.02em #FFFFFF';\n    textEl.style.resize = 'none';\n  }\n\n  function showTextArea(textEl) {\n    textEl.style.backgroundColor = '#FFFFFF';\n    textEl.style.borderStyle = 'inset';\n    // textEl.style.resize = 'both';\n    textEl.focus();\n  }\n\n  map.on('draw.create', (/* e */) => {\n    // console.log(nextMode);\n    if (nextMode === 'draw_text') {\n      // console.log('show text!');\n      const el = document.getElementsByClassName('cc-draw-text');\n      // console.log(el);\n\n      for (let i = 0; i < el.length; i += 1) {\n        el[i].focus();\n        el[i].addEventListener('click', () => {\n          // console.log('click');\n          drawControl.changeMode('static');\n          showTextArea(el[i]);\n        });\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      addEventListener('keyup', (e) => {\n        if (e.keyCode === 13) {\n          if (drawControl.getMode() === 'static') {\n            drawControl.changeMode('simple_select');\n            allowMapInteractions(map, true);\n          }\n          hideTextArea(el[el.length - 1]);\n        }\n      });\n      // eslint-disable-next-line no-restricted-globals\n      addEventListener('dblclick', () => {\n        if (drawControl.getMode() === 'static') {\n          drawControl.changeMode('simple_select');\n          allowMapInteractions(map, true);\n        }\n        hideTextArea(el[el.length - 1]);\n      });\n    }\n  });\n\n  return (\n    <BaseComponent\n      className=\"draw-tools\"\n      baseType={baseType || 'none'}\n      buttonOptions={{\n        icon: <FaPencilAlt />,\n        title: 'Draw',\n        testId: 'cl-draw-btn',\n        ...buttonOptions\n      }}\n      sx={sx}\n      {...rest}\n    >\n      <ButtonGroup>\n        <Button\n          title=\"Draw Point\"\n          className=\"draw-tool draw-tool--point\"\n          onClick={() => startDraw('draw_point')}\n        >\n          <PointIcon />\n        </Button>\n        <Button\n          title=\"Draw Line\"\n          className=\"draw-tool draw-tool--line\"\n          onClick={() => startDraw('draw_line_string')}\n        >\n          <LineIcon />\n        </Button>\n        <Button\n          title=\"Draw Polygon\"\n          className=\"draw-tool draw-tool--polygon\"\n          onClick={() => startDraw('draw_polygon')}\n        >\n          <PolygonIcon />\n        </Button>\n        <Button\n          title=\"Draw Text\"\n          className=\"draw-tool draw-tool--text\"\n          onClick={() => {\n            startDraw('draw_text');\n          }}\n        >\n          <TextIcon />\n        </Button>\n        <Button\n          title=\"Delete Drawing\"\n          className=\"draw-tool draw-tool--delete\"\n          onClick={() => {\n            clearDrawings();\n          }}\n        >\n          <DeleteIcon />\n        </Button>\n      </ButtonGroup>\n    </BaseComponent>\n  );\n};\n\nexport default Draw;\n","import React, { Component } from 'react';\nimport AddData from './components/AddData/AddData';\nimport Map from './components/Map/Map';\nimport BasemapSwitcher from './components/BasemapSwitcher/BasemapSwitcher';\nimport mapOptions from './util/mockMapOptions';\nimport ElementsProvider from './components/_common/ElementsProvider';\nimport ScaleBar from './components/ScaleBar/ScaleBar'\nimport Measure from './components/Measure/Measure'\nimport Draw from './components/Draw/Draw'\nimport Legend from './components/LayerList/Legend'\nimport LayerList from './components/LayerList/LayerList'\n\nclass App extends Component {\n  render(){\n    return (\n      <ElementsProvider>\n      <Map mapOptions={mapOptions}>\n        <BasemapSwitcher/>\n        <ScaleBar/>\n        <Measure />\n        {/* <AddData/> */}\n        <Draw />\n      </Map>\n      </ElementsProvider>\n    );\n  }\n}\nexport default App;\n\n// export default function App() {\n// const mapContainer = useRef(null);\n// const map = useRef(null);\n// const [lng, setLng] = useState(-70.9);\n// const [lat, setLat] = useState(42.35);\n// const [zoom, setZoom] = useState(9);\n \n// useEffect(() => {\n// if (map.current) return; // initialize map only once\n// map.current = new mapboxgl.Map({\n// container: mapContainer.current,\n// style: 'mapbox://styles/mapbox/streets-v11',\n// center: [lng, lat],\n// zoom: zoom\n// });\n// });\n \n// useEffect(() => {\n// if (!map.current) return; // wait for map to initialize\n// map.current.on('move', () => {\n// setLng(map.current.getCenter().lng.toFixed(4));\n// setLat(map.current.getCenter().lat.toFixed(4));\n// setZoom(map.current.getZoom().toFixed(2));\n// });\n// });\n\n\n// return (\n// <div>\n// <div className=\"sidebar\">\n// Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\n// </div>\n// <div ref={mapContainer} className=\"map-container\" />\n// </div>\n// );\n// }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport App from './App';\n \nReactDOM.render(\n\n<App />,\ndocument.getElementById('root')\n);"],"sourceRoot":""}