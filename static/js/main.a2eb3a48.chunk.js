(this["webpackJsonpespon-playground"]=this["webpackJsonpespon-playground"]||[]).push([[1],{176:function(e,t,n){},184:function(e,t){},218:function(e,t){},351:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(32),o=n.n(i),c=(n(175),n(176),n(69)),s=n(70),l=n(169),d=n(168),u=n(3),b=n(16),h=n(8),p=n(7),j=n(354),f=(n(158),n(29)),x=n(2),O=function(e){var t=e.children,n=e.selectable,a=e.sx,r=n?Object(u.a)({padding:2,":hover":{cursor:"pointer",bg:"primary",color:"background"}},a):Object(u.a)({padding:2},a);return Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},e),{},{as:"li",sx:r,children:t}))},m=function(e){return null!==e&&void 0!==e&&("number"===typeof e?!isNaN(e):Array.isArray(e)?e.length>0:!!e)},g=["items","children","sx"],y=function(e){var t=e.items,n=e.children,a=e.sx,r=Object(p.a)(e,g),i=Object(u.a)({listStyleType:"none",padding:1},a);return m(n)?Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},r),{},{as:"ul",className:"cl-list",sx:i,children:n})):!!(t&&t.length>0)&&Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},r),{},{as:"ul",className:"cl-list",sx:i,children:t.map((function(e){return Object(x.jsx)(O,{children:e})}))}))},v=n(76),k=n(53),w=n(11),S=["closable","onClose","sx","children"],C=function(e){var t=e.closable,n=e.onClose,a=e.sx,r=e.children,i=Object(p.a)(e,S),o=Object(w.d)().theme;return Object(x.jsxs)(j.d,Object(u.a)(Object(u.a)({className:"cl-panel-component",color:"text",sx:Object(u.a)(Object(u.a)({padding:3,width:"300px",borderRadius:"4px",boxShadow:"0 0 4px rgba(0, 0, 0, .6)",bg:"background"},a),{},{paddingTop:t?0:3})},i),{},{children:[t&&Object(x.jsx)(j.h,{sx:{justifyContent:"flex-end",marginRight:"-".concat(o.space?o.space[3]:16,"px")},children:Object(x.jsx)(j.f,{sx:{color:"text",height:"24px",width:"24px",":hover":{cursor:"pointer"}},onClick:n})}),r]}))},F=["children","buttonOptions","sx"],_=function(e){var t,n,r,i=e.children,o=e.buttonOptions,c=e.sx,s=Object(p.a)(e,F),l=Object(a.useRef)(null),d=Object(k.a)(l),b=Object(a.useState)(!1),f=Object(h.a)(b,2),O=f[0],m=f[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(j.c,{ref:l,title:null===o||void 0===o?void 0:o.title,className:null!==(t=null===s||void 0===s?void 0:s.className)&&void 0!==t?t:"cl-btn","data-testid":null!==(n=null===o||void 0===o?void 0:o.testId)&&void 0!==n?n:"cl-btn",variant:null!==(r=null===o||void 0===o?void 0:o.variant)&&void 0!==r?r:"primary",onClick:function(){if(null===o||void 0===o?void 0:o.intercept)try{o.intercept()}catch(e){console.error(e)}else m(!O)},sx:Object(u.a)({},c),children:null===o||void 0===o?void 0:o.icon}),O&&Object(x.jsx)(v.b,{style:{zIndex:c.zIndex||2},targetRef:l,position:function(){return{left:(null===d||void 0===d?void 0:d.right)+10,top:(null===d||void 0===d?void 0:d.top)+window.scrollY}},children:Object(x.jsx)(C,{closable:!0,onClose:function(){return m(!1)},sx:{fontFamily:"body"},children:i})})]})},N=["baseType","buttonOptions","children","open","sx"],E=function(e){var t,n,a,r,i,o=e.baseType,c=e.buttonOptions,s=e.children,l=(e.open,e.sx),d=Object(p.a)(e,N),b=null!==(t=null===l||void 0===l?void 0:l.top)&&void 0!==t?t:"1rem",h=null!==(n=null===l||void 0===l?void 0:l.left)&&void 0!==n?n:"1rem";(null===l||void 0===l?void 0:l.bottom)&&(b=null),(null===l||void 0===l?void 0:l.right)&&(h=null);var f=Object(u.a)({fontFamily:"body",bg:"transparent",position:(null===l||void 0===l?void 0:l.position)||"absolute",top:b,left:h,bottom:null===l||void 0===l?void 0:l.bottom,right:null===l||void 0===l?void 0:l.right,zIndex:null!==(a=null===l||void 0===l?void 0:l.zIndex)&&void 0!==a?a:2},l),O=Object(u.a)({fontFamily:"body",bg:"background",position:(null===l||void 0===l?void 0:l.position)||"absolute",top:b,left:h,bottom:null===l||void 0===l?void 0:l.bottom,right:null===l||void 0===l?void 0:l.right,zIndex:null!==(r=null===l||void 0===l?void 0:l.zIndex)&&void 0!==r?r:2},l),m=Object(u.a)({fontFamily:"body",bg:(null===l||void 0===l?void 0:l.bg)||"primary",position:(null===l||void 0===l?void 0:l.position)||"absolute",top:b,left:h,bottom:null===l||void 0===l?void 0:l.bottom,right:null===l||void 0===l?void 0:l.right,zIndex:null!==(i=null===l||void 0===l?void 0:l.zIndex)&&void 0!==i?i:2,width:"32px",height:"32px",minWidth:"25px",minHeight:"25px",p:0,m:1,boxShadow:"0 0 4px rgba(0, 0, 0, .6)"},l),g=Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},d),{},{sx:f,children:s}));switch(o){case"none":return g;case"panel":return Object(x.jsx)(C,Object(u.a)(Object(u.a)({},d),{},{sx:O,children:s}));case"button":return Object(x.jsx)(_,Object(u.a)({children:s,buttonOptions:c,sx:m},d));default:return g}},L=Object(a.createContext)({});var I=function(e){return!!(e&&Object.keys(e).length>0)&&!!(e.style&&Object.keys(e.style).length>0)},T=n(160),D=n.n(T),z=n(104),M=n.n(z),A=n(161),R=n.n(A),P=1e8,W=(new(function(){function e(){Object(c.a)(this,e),this.reader=new FileReader,this.reader.onload=this.handleFile.bind(this)}return Object(s.a)(e,[{key:"load",value:function(e,t){if(!e)throw new Error("File Required");if(!t)throw new Error("Callback Required");this.cb=t,this.file=e,this.fileExt=this.getExtension(),this.fileDetails={fileSize:this.file.size,fileName:this.file.name,fileExt:this.fileExt},this.file.size>=P?t({error:"File must be less than 20mb",fileDetails:this.fileDetails}):"zip"===this.fileExt.toLowerCase()?this.reader.readAsArrayBuffer(this.file):this.reader.readAsText(this.file,"UTF-8")}},{key:"getExtension",value:function(){var e=this.file.name.split(".");return e[e.length-1]}},{key:"handleFile",value:function(e){switch(this.fileExt.toLowerCase()){case"csv":this.handleCSV(e);break;case"kml":this.handleKML(e);break;case"geojson":case"json":this.handleJSON(e);break;case"gpx":this.handleGPX(e);break;case"zip":this.handleSHP(e);break;default:this.notRecognized()}}},{key:"handleJSON",value:function(e){try{this.handleGeoJSON(e)}catch(t){this.cb({error:"Problem parsing JSON (".concat(t.toString(),")"),fileDetails:this.fileDetails})}}},{key:"handleCSV",value:function(e){var t,n,a=this,r=["y","lat","latitude"],i=["x","lng","lon","long","longitude"],o=e.target.result;if(o.split("\n")[0].split(",").forEach((function(e){-1!==r.indexOf(e.toLowerCase().trim())&&(t=e.trim()),-1!==i.indexOf(e.toLowerCase().trim())&&(n=e.trim())})),!n||!t)throw new Error("no latitude (y, lat, latitude) or longitude (x, lng, long, longitude) field found");D.a.csv2geojson(o,{latfield:t,lonfield:n},(function(e,t){if(e)throw e;a.cb(a.fileDetails,t)}))}},{key:"handleKML",value:function(e){var t=(new window.DOMParser).parseFromString(e.target.result,"application/xml"),n=M.a.kml(t,{style:!0});this.cb(this.fileDetails,n)}},{key:"handleGeoJSON",value:function(e){this.cb(this.fileDetails,JSON.parse(e.target.result))}},{key:"handleGPX",value:function(e){var t=(new window.DOMParser).parseFromString(e.target.result,"application/xml"),n=M.a.gpx(t);this.cb(this.fileDetails,n)}},{key:"handleSHP",value:function(e){var t=R.a.parseZip(e.target.result);this.cb(this.fileDetails,t)}},{key:"notRecognized",value:function(){console.log("sorry, i didnt recognize this format"),this.cb({error:"File format ".concat(this.fileExt," not recognized."),fileDetails:this.fileDetails})}}]),e}()),n(37)),J=n.n(W),G=function(e){var t=e.message,n=Object(a.useState)(!0),r=Object(h.a)(n,2),i=r[0],o=r[1];return i?Object(x.jsx)(j.a,{variant:"modal",children:Object(x.jsxs)(j.h,{sx:{flexDirection:"column"},children:[Object(x.jsx)(j.h,{sx:{width:"100%",position:"relative"},children:Object(x.jsx)("p",{style:{padding:1},children:t})}),Object(x.jsx)(j.h,{sx:{justifyContent:"flex-end"},children:Object(x.jsx)(j.c,{variant:"secondary",onClick:function(){o(!1)},children:"OK"})})]})}):null},Z=["mapOptions","mapLayers","supportMessage","sx"],B=function(e){var t,n=e.mapOptions,r=e.mapLayers,i=e.supportMessage,o=e.sx,c=Object(p.a)(e,Z),s=Object(a.useContext)(L).setMap;return Object(a.useEffect)((function(){var e;t=new J.a.Map(n),s(t),(e=r)&&t.on("load",(function(){e.forEach((function(e){t.addLayer(e)}))}))}),[]),J.a.supported()?Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},c),{},{sx:Object(u.a)({width:"100vw",height:"100vh"},o),ref:function(e){n.container=e},className:"cl-map-container"})):Object(x.jsx)(G,{message:i||"WARNING! Your browser does not currently support this application, which requires MapboxGL. \n    Please ensure you are using the latest version of Chrome, Firefox, or Edge.\n    Additionally, check https://get.webgl.org/ for compatibility with your system."})},H=n(17),V=function(e){var t=e.name,n=e.item,a=e.defaultChecked,r=e.checkedChanged;return Object(x.jsxs)(j.l,Object(u.a)(Object(u.a)({className:"cl-radio-group-item"},e),{},{sx:{fontSize:"12px",marginRight:"2px",">span":{paddingTop:"3px"}},children:[Object(x.jsx)(j.n,{color:"primary",name:t,id:n.name,value:n.value,defaultChecked:a,sx:{"input:checked ~ &":{color:"primary"},"input:focus ~ &":{bg:"highlight"}},onChange:function(e){return r(e,n)}}),Object(x.jsx)("span",{children:n.label})]}))},X=function(e){var t=e.children,n=e.items,a=e.name,r=e.checkedValueChange,i={bg:"transparent",color:"primary",display:"flex",padding:0};return m(t)?Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},e),{},{className:"cl-radio-group",sx:i,children:t})):Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({},e),{},{className:"cl-radio-group",sx:i,children:n.map((function(e){return Object(x.jsx)(V,{name:a,item:e,defaultChecked:e.checked,checkedChanged:r},e.value)}))}))},K=["buttons","sx","children"],Y=function(e){var t,n=e.buttons,a=e.sx,r=e.children,i=Object(p.a)(e,K);return t=n||r,Object(x.jsx)(j.h,Object(u.a)(Object(u.a)({alignItems:"center"},i),{},{className:"cl-button-group",sx:Object(u.a)(Object(u.a)({},a),{},{"> button":{height:"32px",borderRadius:0,borderWidth:"0.25px",borderColor:"muted",borderStyle:"solid",":first-of-type":{borderTopLeftRadius:"default",borderBottomLeftRadius:"default",borderWidth:"0.5px",borderColor:"muted",borderStyle:"solid"},":last-child":{borderTopRightRadius:"default",borderBottomRightRadius:"default",borderWidth:"0.5px",borderColor:"muted",borderStyle:"solid"}}}),children:t}))},q=["switcherStyle","basemaps","preserveLayers","baseType","buttonOptions","sx"],U=function(e){var t=e.switcherStyle,n=e.basemaps,r=e.preserveLayers,i=e.baseType,o=e.buttonOptions,c=e.sx,s=Object(p.a)(e,q),l=Object(a.useState)(n?n[0].value:"light-v10"),d=Object(h.a)(l,2),b=d[0],f=d[1],O=Object(a.useContext)(L).map,m=Object(a.useRef)(!1),g=function(e,t){f(t.value)};Object(a.useEffect)((function(){m.current?O.setStyle("mapbox://styles/mapbox/".concat(b)):m.current=!0}),[b]),Object(a.useEffect)((function(){I(O)&&O.on("load",(function(){O.setStyle("mapbox://styles/mapbox/".concat(b)),O.on("styledata",(function(){!function e(){if(O.isStyleLoaded())for(var t=0;t<(null===r||void 0===r?void 0:r.length);t+=1){var n=r[t];O.getSource(n.layer.source)||(O.addSource(n.layer.source,n.source),O.addLayer(n.layer))}else setTimeout(e,200)}()}))}))}),[O]);var y,v=n||[{name:"Light",key:"Light",label:"Light",value:"light-v10",checked:!0},{name:"Dark",key:"Dark",label:"Dark",value:"dark-v10"},{name:"satellite",key:"satellite",label:"Satellite",value:"satellite-streets-v9"}];switch(t){case"radio":y=Object(x.jsx)(X,{items:v,name:"basemaps",checkedValueChange:g});break;case"buttons":var k=v.map((function(e){return Object(x.jsx)(j.c,{onClick:function(t){return g(0,e)},children:e.label},e.label)}));y=Object(x.jsx)(Y,{buttons:k});break;default:y=Object(x.jsx)(X,{items:v,name:"basemaps",checkedValueChange:g})}return Object(x.jsx)(E,Object(u.a)(Object(u.a)({baseType:i,buttonOptions:Object(u.a)({icon:Object(x.jsx)(H.e,{}),title:"Basemap Switcher",testId:"cl-basemap-btn"},o)},s),{},{sx:c,className:"cl-basemap-switcher",children:y}))},Q={container:"map",style:"mapbox://styles/mapbox/light-v10",center:[12,50],zoom:3,accessToken:"pk.eyJ1IjoiZWxrYWxvbmFyaXMiLCJhIjoiY2twbXExOHcwMDg3ZzJvbnc0dXhyOWszOSJ9.AetSK7t4L_aaFVsCuNQmHg"},$=n(355),ee=function(e){var t=e.children,n=e.context,r=e.theme,i=e.mapOverride,o=n||L,c=o.Provider||o,s=Object(a.useState)(null),l=Object(h.a)(s,2),d=l[0],u={map:i||d,setMap:l[1]},b=Object(x.jsx)($.a,{theme:r||{},children:t});return Object(x.jsx)(c,{value:u,children:b})},te=function(e){var t=e.position,n=e.maxWidth,r=e.unit,i=Object(a.useState)(new W.ScaleControl({maxWidth:n||100,unit:r||"metric"})),o=Object(h.a)(i,1)[0],c=Object(a.useContext)(L).map;if(!I(c))return null;var s=t||"bottom-left";return c.on("load",(function(){c.addControl(o,s)})),null},ne=n(19),ae=n.n(ne),re=n(38),ie=n(105),oe=n.n(ie);function ce(e,t){return se.apply(this,arguments)}function se(){return(se=Object(re.a)(ae.a.mark((function e(t,a){var r,i,o,c,s,l,d;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,357));case 2:return r=e.sent,i=r.default,e.next=6,n.e(5).then(n.bind(null,358));case 6:if(o=e.sent,c=o.default,s=1e3*c(t),l=i(t),!(s>l)){e.next=26;break}e.t0=a,e.next="m"===e.t0?14:"ft"===e.t0?16:"km"===e.t0?18:"mi"===e.t0?20:22;break;case 14:return d=s,e.abrupt("break",24);case 16:return d=3.28084*s,e.abrupt("break",24);case 18:return d=s/1e3,e.abrupt("break",24);case 20:return d=621371e-9*s,e.abrupt("break",24);case 22:return d=s,e.abrupt("break",24);case 24:e.next=41;break;case 26:e.t1=a,e.next="m\xb2"===e.t1?29:"ft\xb2"===e.t1?31:"km\xb2"===e.t1?33:"mi\xb2"===e.t1?35:"ac"===e.t1?37:39;break;case 29:return d=l,e.abrupt("break",41);case 31:return d=10.7639*l,e.abrupt("break",41);case 33:return d=l/1e6,e.abrupt("break",41);case 35:return d=l/2589988.1103,e.abrupt("break",41);case 37:return d=247105e-9*l,e.abrupt("break",41);case 39:return d=l,e.abrupt("break",41);case 41:return e.abrupt("return",d);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(130);var le=n(6),de=["baseType","buttonOptions","sx"],ue=function(e){var t=e.baseType,r=e.buttonOptions,i=e.sx,o=Object(p.a)(e,de),c=Object(a.useContext)(L).map,s=Object(a.useState)(null),l=Object(h.a)(s,2),d=l[0],b=l[1],x=Object(a.useState)(!1),O=Object(h.a)(x,2),m=O[0],g=O[1],y=Object(a.useState)(!1),v=Object(h.a)(y,2),k=v[0],w=v[1],S=Object(a.useState)(0),C=Object(h.a)(S,2),F=C[0],_=C[1],N=Object(a.useState)("m"),T=Object(h.a)(N,2),D=T[0],z=T[1],M=Object(a.useState)(!1),A=Object(h.a)(M,2),R=A[0],P=A[1],W=["m","ft","km","mi"],J=["m\xb2","ft\xb2","km\xb2","mi\xb2","ac"];function G(){return Z.apply(this,arguments)}function Z(){return(Z=Object(re.a)(ae.a.mark((function e(){var t,n,a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=8;break}if(t=d.getAll(),!((n=t.features)&&n.length>0)){e.next=8;break}return a=n[0],e.next=6,ce(a,D);case 6:r=e.sent,_(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(a.useEffect)((function(){G()}),[D]),!I(c))return null;var B,V=function(e){z(e.currentTarget.value)};function X(e){return K.apply(this,arguments)}function K(){return(K=Object(re.a)(ae.a.mark((function e(t){var a;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(c)){e.next=2;break}return e.abrupt("return");case 2:if(a=d||!1,d){e.next=9;break}return e.next=6,n.e(0).then(n.t.bind(null,356,7)).then((function(e){return new(0,e.default)({displayControlsDefault:!1})}));case 6:a=e.sent,b(a),c.addControl(a);case 9:a.changeMode(t),"draw_line_string"===t?z("m"):"draw_polygon"===t&&z("m\xc2\xb2"),P(!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.on("draw.render",(function(){G()})),R&&(B=Object(le.a)(j.c,{title:"Delete Measurement",className:"draw-tool draw-tool--delete",onClick:function(){d.deleteAll(),_(0),d.changeMode("simple_select"),P(!1),g(!1),w(!1)},children:Object(le.a)(H.h,{})}));var q,U=k||m?"block":"none";return k&&!m?q=Object(le.b)(j.h,{children:[Object(le.a)(j.b,{children:"".concat(oe()(F).format("0,0.00"))}),Object(le.a)(j.o,{name:"measure-units",sx:{position:"relative",width:55,border:"none",paddingTop:0},onChange:V,defaultValue:W[0],children:W.map((function(e){return Object(le.a)("option",{sx:{color:"text"},children:e},e)}))})]}):!k&&m&&(q=Object(le.b)(j.h,{children:[Object(le.a)(j.b,{sx:{color:"background"},children:"".concat(oe()(F).format("0,0.00"))}),Object(le.a)(j.o,{name:"measure-units",sx:{color:"background",position:"relative",width:55,border:"none",paddingTop:0},onChange:V,defaultValue:J[0],children:J.map((function(e){return Object(le.a)("option",{sx:{color:"text"},children:e},e)}))})]})),Object(le.b)(E,Object(u.a)(Object(u.a)({className:"cl-measure-tools",baseType:t||"none",sx:i,buttonOptions:Object(u.a)({icon:Object(le.a)(H.g,{}),title:"Measure",testId:"cl-measure-btn"},r)},o),{},{children:[Object(le.b)(Y,{children:[Object(le.a)(j.c,{height:33.5,className:"draw-tool",onClick:function(){d.changeMode("simple_select"),w(!1),g(!1)},children:Object(le.a)(j.p,{sx:{fontSize:"12px"},children:"Measure"})}),Object(le.a)(j.c,{title:"Measure Line",className:"draw-tool draw-tool--line",onClick:function(){X("draw_line_string"),w(!0),g(!1)},children:Object(le.a)(f.e,{})}),Object(le.a)(j.c,{title:"Measure Area",className:"draw-tool draw-tool--polygon",onClick:function(){X("draw_polygon"),g(!0),w(!1)},children:Object(le.a)(H.a,{})}),B]}),Object(le.a)(j.b,{bg:"primary",p:2,color:"background",height:"32px",width:135,sx:{display:U,borderColor:"white",borderWidth:1,borderStyle:"solid"},children:q})]}))},be=n(162),he=n.n(be),pe=n(167),je=function(e){var t=e.x,n=e.y,r=e.target,i=e.theme;r.style.padding="4px",r.style.textShadow="none";var o=Object(a.useState)(!1),c=Object(h.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(r.style.color||"black"),u=Object(h.a)(d,2),b=u[0],p=u[1],f=Object(a.useState)(r.style.backgroundColor||"white"),x=Object(h.a)(f,2),O=x[0],m=x[1],g=Object(a.useState)(!1),y=Object(h.a)(g,2),v=y[0],k=y[1],w=Object(a.useState)(!1),S=Object(h.a)(w,2),C=S[0],F=S[1];return Object(le.a)(he.a,{handle:".handle",children:Object(le.b)(j.b,{sx:{position:"absolute",top:"".concat(n,"px"),left:"".concat(t,"px"),zIndex:99,backgroundColor:"white",width:"280px",borderRadius:"9px",display:s?"none":""},children:[Object(le.b)(j.g,{className:"handle",sx:{textAlign:"center",cursor:"pointer",backgroundColor:i.colors.primary,borderTopLeftRadius:"9px",borderTopRightRadius:"9px",padding:"5px"},children:[Object(le.a)(j.p,{sx:{color:"white",fontFamily:i.fonts.body},children:"Label Editor"}),Object(le.a)(j.f,{sx:{position:"absolute",top:0,right:0,color:"white",cursor:"pointer"},onClick:function(){l(!0)}})]}),Object(le.a)(j.g,{children:Object(le.b)(j.b,{sx:{margin:"2.5px"},children:[Object(le.a)(j.l,{sx:{fontFamily:i.fonts.body},htmlFor:"label-edit",children:"Label"}),Object(le.a)(j.k,{placeholder:r.innerHTML,name:"label-edit",id:"label-edit",onChange:function(e){r.innerHTML=e.target.value.toUpperCase()},sx:{padding:"2px"},mb:1}),Object(le.a)(j.l,{sx:{fontFamily:i.fonts.body},htmlFor:"font-size-edit",children:"Font Size"}),Object(le.a)(j.k,{placeholder:r.style.fontSize.replace("px","")||"12",name:"font-size-edit",id:"font-size-edit",onChange:function(e){r.style.fontSize="".concat(e.target.value,"px")},sx:{padding:"2px"},mb:1}),Object(le.a)(j.l,{sx:{fontFamily:i.fonts.body},htmlFor:"font-family-edit",children:"Font Family"}),Object(le.b)(j.o,{name:"font-family-edit",id:"font-family-edit",mb:1,onChange:function(e){r.style.fontFamily=e.target.value},sx:{padding:"2px"},children:[Object(le.a)("option",{value:"serif",children:"Serif"}),Object(le.a)("option",{value:"sans-serif",children:"Sans-Serif"}),Object(le.a)("option",{value:"cursive",children:"Cursive"}),Object(le.a)("option",{value:"monospace",children:"Monospace"}),Object(le.a)("option",{value:"fantasy",children:"Fantasy"})]}),Object(le.a)(j.l,{sx:{fontFamily:i.fonts.body},htmlFor:"font-weight-edit",children:"Font Weight"}),Object(le.a)(j.k,{placeholder:r.style.fontWeight||200,name:"font-weight-edit",id:"font-weight-edit",onChange:function(e){r.style.fontWeight=e.target.value},sx:{padding:"2px"},mb:1}),Object(le.a)(j.b,{sx:{textAlign:"fg"===C?"left":"right"},mb:1,children:v?Object(le.a)(pe.a,{onChange:function(e){var t=e.hex;"fg"===C?(r.style.color=t,p(t)):"bg"===C&&(r.style.backgroundColor=t,m(t))}}):""}),Object(le.b)(j.i,{gap:2,mb:1,columns:[2,"1fr 1fr"],children:[Object(le.a)(j.b,{bg:b,onClick:function(){"fg"===C?(k(!1),F(!1)):(k(!0),F("fg"))},sx:{color:"white",cursor:"pointer",border:"fg"===C?"solid greenyellow 3px":""},children:"FG"}),Object(le.a)(j.b,{bg:O,onClick:function(){"bg"===C?(k(!1),F(!1)):(k(!0),F("bg"))},sx:{cursor:"pointer",border:"bg"===C?"solid greenyellow 3px":""},children:"BG"})]}),Object(le.a)(j.b,{p:2,sx:{textAlign:"center"},children:Object(le.a)(j.m,{sx:{color:"#a70000",fontFamily:i.fonts.body},href:"#!",onClick:function(e){e.preventDefault(),window.confirm("are you sure")&&(r.parentNode.removeChild(r),l(!0))},children:"Delete Label"})})]})})]})})},fe=function(e){var t={};function n(e){var t=document.createElement("template");return t.innerHTML=e.trim(),t.content.firstChild}return t.onSetup=function(){return{}},t.onClick=function(t,a){var r=this.newFeature({type:"Feature",geometry:{type:"Point",coordinates:[a.lngLat.lng,a.lngLat.lat]}}),i=new J.a.Marker({element:n('<p class="cl-draw-text" style="text-shadow:0 0 4px #FFFFFF;text-stroke: .1em #FFFFFF; webkit-text-stroke = .1em #FFFFFF; cursor: context-menu" title="Right click to edit label style">New Label</p>'),draggable:!0});i.getElement().addEventListener("contextmenu",(function(t){var n=document.getElementById("label-maker");n&&n.parentNode.removeChild(n);var a=document.createElement("div");a.id="label-maker",document.body.appendChild(a),o.a.render(Object(x.jsx)(je,{x:t.clientX+50,y:t.clientY+25,target:t.target,theme:e}),a)})),i.setLngLat(a.lngLat),i.addTo(this.map),this.map.fire("draw.create",{features:[r.toGeoJSON()]}),this.changeMode("simple_select")},t.onKeyUp=function(e,t){return 27===t.keyCode&&this.changeMode("simple_select")},t.toDisplayFeatures=function(e,t,n){n(t)},t};function xe(e,t){t?(e.boxZoom.enable(),e.scrollZoom.enable(),e.dragPan.enable(),e.dragRotate.enable(),e.keyboard.enable(),e.doubleClickZoom.enable(),e.touchZoomRotate.enable()):(e.boxZoom.disable(),e.scrollZoom.disable(),e.dragPan.disable(),e.dragRotate.disable(),e.keyboard.disable(),e.doubleClickZoom.disable(),e.touchZoomRotate.disable())}var Oe={onSetup:function(){return this.setActionableState(),xe(this.map,!1),{}},toDisplayFeatures:function(e,t,n){n(t)}},me=Oe,ge=["baseType","buttonOptions","sx"],ye=function(e){var t=e.baseType,r=e.buttonOptions,i=e.sx,o=Object(p.a)(e,ge),c=Object(w.d)().theme,s=Object(a.useContext)(L).map,l=Object(a.useState)(null),d=Object(h.a)(l,2),b=d[0],O=d[1],m=Object(a.useState)(null),g=Object(h.a)(m,2),y=g[0],v=g[1];if(!I(s))return null;function k(e){return S.apply(this,arguments)}function S(){return(S=Object(re.a)(ae.a.mark((function e(t){var a,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=b,e.t0){e.next=5;break}return e.next=4,n.e(0).then(n.t.bind(null,356,7)).then((function(e){var t=e.default;return new t({displayControlsDefault:!1,modes:Object.assign({draw_text:fe(c),static:me},t.modes)})}));case 4:e.t0=e.sent;case 5:a=e.t0,b||(O(a),s.addControl(a)),v(r=t||"simple_select"),a.changeMode(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){e.addEventListener("click",(function(){xe(s,!1)})),e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.borderStyle="none",e.style.fontSize="14px",e.style.textShadow="0 0 2px #FFFFFF",e.style.textStroke=".02em #FFFFFF",e.style.webkitTextStroke=".02em #FFFFFF",e.style.resize="none"}return s.on("draw.create",(function(){"draw_text"===y&&function(){for(var e=document.getElementsByClassName("cc-draw-text"),t=function(t){e[t].focus(),e[t].addEventListener("click",(function(){var n;b.changeMode("static"),(n=e[t]).style.backgroundColor="#FFFFFF",n.style.borderStyle="inset",n.focus()}))},n=0;n<e.length;n+=1)t(n);addEventListener("keyup",(function(t){13===t.keyCode&&("static"===b.getMode()&&(b.changeMode("simple_select"),xe(s,!0)),C(e[e.length-1]))})),addEventListener("dblclick",(function(){"static"===b.getMode()&&(b.changeMode("simple_select"),xe(s,!0)),C(e[e.length-1])}))}()})),Object(x.jsx)(E,Object(u.a)(Object(u.a)({className:"draw-tools",baseType:t||"none",buttonOptions:Object(u.a)({icon:Object(x.jsx)(H.f,{}),title:"Draw",testId:"cl-draw-btn"},r),sx:i},o),{},{children:Object(x.jsxs)(Y,{children:[Object(x.jsx)(j.c,{title:"Draw Point",className:"draw-tool draw-tool--point",onClick:function(){return k("draw_point")},children:Object(x.jsx)(f.c,{})}),Object(x.jsx)(j.c,{title:"Draw Line",className:"draw-tool draw-tool--line",onClick:function(){return k("draw_line_string")},children:Object(x.jsx)(f.e,{})}),Object(x.jsx)(j.c,{title:"Draw Polygon",className:"draw-tool draw-tool--polygon",onClick:function(){return k("draw_polygon")},children:Object(x.jsx)(H.a,{})}),Object(x.jsx)(j.c,{title:"Draw Text",className:"draw-tool draw-tool--text",onClick:function(){k("draw_text")},children:Object(x.jsx)(f.d,{})}),Object(x.jsx)(j.c,{title:"Delete Drawing",className:"draw-tool draw-tool--delete",onClick:function(){!function(){if(b){b.deleteAll();for(var e=document.getElementsByClassName("cl-draw-text");e.length>0;)e[0].remove()}}()},children:Object(x.jsx)(f.a,{})})]})}))},ve=function(e){var t=e.type;try{switch(t){case"fill":return function(e){var t,n,a,r=e.get("fill-color").value,i=e.get("fill-outline-color").value,o=(null===(t=e.get("fill-opacity").value)||void 0===t?void 0:t.value)||1;if(r._parameters&&Object.prototype.hasOwnProperty.call(r._parameters,"stops"))n=r._parameters.stops,r._parameters.default&&(n=[].concat(Object(b.a)(n),[["",r._parameters.default]]));else if(r._styleExpression){var c=[];Object.keys(r._styleExpression.expression.cases).forEach((function(e){var t=[e,r._styleExpression.expression.outputs[+r._styleExpression.expression.cases[e]].value.toString()];c.push(t)})),r._styleExpression.expression.otherwise&&c.push(["",r._styleExpression.expression.otherwise.value.toString()]),n=c}else n=[r.value.toString()];if(i._parameters&&Object.prototype.hasOwnProperty.call(i._parameters,"stops"))a=i._parameters.stops,i._parameters.default&&(a=[].concat(Object(b.a)(n),[["",i._parameters.default]]));else if(i._styleExpression){var s=[];Object.keys(i._styleExpression.expression.cases).forEach((function(e){var t=[e,i._styleExpression.expression.outputs[+i._styleExpression.expression.cases[e]].value.toString()];s.push(t)})),i._styleExpression.expression.otherwise&&s.push(["",i._styleExpression.expression.otherwise.value.toString()]),a=s}else a=[i.value.toString()];return Object(le.a)(y,{sx:{margin:0,padding:0},children:Object(le.a)((function(){var e=(n.length>1?n.map((function(e){return[].concat(Object(b.a)(e),[a[0]])})):a.length>1?a.map((function(e){return e.splice(1,0,n[0]),e})):[[null,n[0],a[0]]]).map((function(e,t){return Object(le.b)(O,{sx:{margin:0,marginLeft:4,padding:0,display:"flex"},children:[Object(le.a)(j.b,{children:Object(le.a)("svg",{width:"25",height:"25",children:Object(le.a)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"25",height:"25",sx:{fill:e[1],stroke:e[2],strokeWidth:3,fillOpacity:o,strokeOpacity:o}})})}),Object(le.a)(j.b,{children:Object(le.a)(j.p,{sx:{padding:"3px"},children:e[0]})})]},t)}));return Object(le.a)(j.b,{children:e})}),{})})}(e.paint);case"circle":return function(e){var t,n,a,r=e.get("circle-color").value.value.toString(),i=e.get("circle-radius").value;return i._parameters&&Object.prototype.hasOwnProperty.call(i._parameters,"stops")&&"source"===i.kind?(n=6,a="center",t=i._parameters.stops,i._parameters.default&&(t=[].concat(Object(b.a)(t),[["",i._parameters.default]]))):(n=1,a="left",+(t=[i.value.toString()])[0]<8&&(t=["8"])),Object(le.a)(y,{sx:{margin:0,padding:0},children:Object(le.a)((function(){var e=(t.length>1?t.map((function(e){return Object(b.a)(e)})):[[null,t[0]]]).map((function(e,t){var i=+e[1]+.75*+e[1];return Object(le.b)(O,{sx:{margin:0,marginLeft:4,padding:0,display:"flex"},children:[Object(le.a)(j.b,{sx:{flexGrow:n,textAlign:a},children:Object(le.a)("svg",{width:i,height:i,children:Object(le.a)("circle",{cx:i/2,cy:i/2,r:i/2-.5,sx:{fill:r}})})}),Object(le.a)(j.b,{sx:{flexGrow:1,lineHeight:e[1]>=10?"".concat(1.8388*+e[1]-7.5,"px"):"15px"},children:Object(le.a)(j.p,{sx:{padding:"3px"},children:e[0]})})]},t)}));return Object(le.a)(j.b,{children:e})}),{})})}(e.paint);case"line":return function(e){var t,n=e.get("line-color").value,a=n.kind;if("source"===a||"constant"===a){if(n._parameters&&Object.prototype.hasOwnProperty.call(n._parameters,"stops"))t=n._parameters.stops,n._parameters.default&&(t=[].concat(Object(b.a)(t),[["",n._parameters.default]]));else if(n._styleExpression){var r=[];Object.keys(n._styleExpression.expression.cases).forEach((function(e){var t=[e,n._styleExpression.expression.outputs[+n._styleExpression.expression.cases[e]].value.toString()];r.push(t)})),n._styleExpression.expression.otherwise&&r.push(["",n._styleExpression.expression.otherwise.value.toString()]),t=r}else t=[n.value.toString()];return Object(le.a)(y,{sx:{margin:0,padding:0},children:Object(le.a)((function(){var e=(t.length>1?t.map((function(e){return Object(b.a)(e)})):[[null,t[0]]]).map((function(e,t){return Object(le.b)(O,{sx:{margin:0,marginLeft:4,padding:0,display:"flex",alignItems:"flex-start",justifyContent:"flex-start"},children:[Object(le.a)(j.b,{children:Object(le.a)("svg",{width:"25",height:"25",children:Object(le.a)("rect",{x:"0",y:"3.75",rx:"0",ry:"0",width:"25",height:"7.5",sx:{fill:e,strokeWidth:2}})})}),Object(le.a)(j.b,{px:1,children:Object(le.a)(j.p,{children:e[0]})})]},t)}));return Object(le.a)(j.b,{children:e})}),{})})}if("composite"!==e.get("line-color").value.kind)return!1;try{return t=e.get("line-color").value._styleExpression.expression.outputs[0].outputs[0].value.toString(),Object(le.a)(y,{sx:{margin:0,marginLeft:4,padding:0},children:Object(le.a)(O,{sx:{margin:0,marginLeft:4,padding:0},children:Object(le.a)("svg",{width:"25",height:"25",children:Object(le.a)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"25",height:"7.5",sx:{fill:t,strokeWidth:2}})})})})}catch(i){return console.error(i),!1}}(e.paint);case"symbol":return e.paint,console.log("legend cannot render symbol yet"),!1;case"heatmap":return e.paint,console.log("legend cannot render heatmap yet"),!1;case"fill-extrusion":return e.paint,console.log("legend cannot render fill-extrusion yet"),!1;case"raster":return e.paint,console.log("legend cannot render raster yet"),!1;case"hillshade":return e.paint,console.log("legend cannot render hillshade yet"),!1;case"background":return e.paint,console.log("legend cannot render background yet"),!1;default:return!1}}catch(n){return console.warn(n),!1}},ke=["className","sx","variant"],we=r.a.forwardRef((function(e,t){var n=e.className,a=e.sx,r=e.variant,i=void 0===r?"switch":r,o=Object(p.a)(e,ke);return Object(x.jsxs)(j.b,{children:[Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({ref:t,as:"input",type:"checkbox",__themeKey:"forms"},o),{},{sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),Object(x.jsx)(j.b,Object(u.a)(Object(u.a)({css:{padding:2},__themeKey:"forms",variant:i,className:n,sx:a,__css:{position:"relative",bg:"gray",borderRadius:18,height:22,width:40,mr:2,cursor:"pointer","input:disabled ~ &":{opacity:.5,cursor:"not-allowed"},"& > div":{display:"flex",alignItems:"center",borderRadius:"50%",height:18,width:18,bg:"white",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)",position:"relative",transform:"translateX(0%)",transition:"transform 240ms cubic-bezier(0.165, 0.840, 0.440, 1.000)"},"input:checked ~ &":{bg:"primary","> div":{transform:"translateX(100%)"}}}},o),{},{children:Object(x.jsx)(j.b,{})}))]})}));function Se(e,t,n){return!!I(e)&&(n?e.setLayoutProperty(t,"visibility","visible"):e.setLayoutProperty(t,"visibility","none"),!0)}var Ce=n(46),Fe=(n(349),function(e){var t=e.layerActions;return t&&t.length>0?Object(le.b)(Ce.a,{className:"cl-layer-list-action-menu",children:[Object(le.a)(Ce.b,{sx:{color:"text",bg:"background",borderStyle:"none",fontSize:1,":hover":{cursor:"pointer"}},children:"..."}),Object(le.a)(Ce.e,{sx:{zIndex:3,fontFamily:"body"},children:Object(le.a)(Ce.d,{children:t.map((function(e){return Object(le.a)(Ce.c,{onSelect:function(){e.action()},children:e.title},e.title)}))})})]}):null}),_e=function(e){var t,n=e.layerInfo,r=e.map,i=e.legend,o=e.showActions,c=e.itemActions,s=e.checkboxStyle,l=e.baseType,d=Object(a.useState)(!1),u=Object(h.a)(d,2),b=u[0],p=u[1],f=Object(a.useState)(null),m=Object(h.a)(f,2),g=m[0],y=m[1],v=Object(a.useState)(),k=Object(h.a)(v,2),w=k[0],S=k[1],C=Object(a.useState)(!!i),F=Object(h.a)(C,2),_=F[0],N=F[1],E=n.layerIds,L=function(e){var t=e.currentTarget.checked;E.map((function(e){return t||!b?(p(!0),Se(r,e,!0)):(p(!1),Se(r,e,!1)),!0}))};Object(a.useEffect)((function(){switch(s){case"check":y(Object(x.jsx)(j.e,{onChange:L,checked:b}));break;case"switch":y(Object(x.jsx)(we,{checked:b,onChange:L}));break;case"eye":y(b?Object(x.jsx)(j.j,{onClick:L,sx:{alignItems:"baseline"},children:Object(x.jsx)(H.b,{})}):Object(x.jsx)(j.j,{onClick:L,sx:{alignItems:"baseline"},children:Object(x.jsx)(H.c,{})}));break;default:y(Object(x.jsx)(j.e,{checked:b,onChange:L}))}}),[s,b]),Object(a.useEffect)((function(){var e;if(I(r)){var t=function(){e=r.getLayoutProperty(E[0],"visibility"),p("none"!==e),i&&S(n.legendStyle?n.legendStyle():ve(r.getLayer(E[0])))};if(Object.keys(r).length>0)if(l&&"button"===l)try{t()}catch(a){a instanceof TypeError&&r.once("idle",(function(){t()}))}else r.once("idle",(function(){t()}))}}),[r,n]),t=o?Object(x.jsx)(Fe,{layerActions:c}):null;var T=function(){return Object(x.jsx)(j.b,{sx:{display:_?"":"none"},children:Object(x.jsx)(O,{css:{display:i&&w?"":"none"},children:w},"".concat(n.layerName,"-legend"))})};return Object(x.jsxs)(j.b,{className:"listItem",children:[Object(x.jsx)(O,{children:Object(x.jsxs)(j.h,{children:[Object(x.jsxs)(j.l,{children:[g,Object(x.jsx)(j.p,{pt:1,sx:{fontWeight:"bold",cursor:"pointer",":hover":{textDecoration:"underline"}},onClick:function(e){i&&(e.preventDefault(),N(!_))},children:n.layerName})]}),t]})},n.layerName),i?Object(x.jsx)(T,{}):null]})},Ne=function(e){var t,n=e.layerInfo,r=e.map,i=e.legend,o=e.showActions,c=e.itemActions,s=e.group,l=e.callback,d=e.activeOnLoad,u=Object(a.useState)(),b=Object(h.a)(u,2),p=b[0],f=b[1],m=n.layerIds;Object(a.useEffect)((function(){I(r)&&Object.keys(r).length>0&&r.once("idle",(function(){i&&f(n.legendStyle?n.legendStyle():ve(r.getLayer(m[0])))}))}),[r,n]),t=o?Object(x.jsx)(Fe,{layerActions:c}):null;var g=function(){return Object(x.jsx)(j.b,{children:Object(x.jsx)(O,{css:{display:i&&p?"":"none"},children:p},"".concat(n.layerName,"-legend"))})};return Object(x.jsxs)(j.b,{className:"listItem",children:[Object(x.jsx)(O,{children:Object(x.jsxs)(j.h,{children:[Object(x.jsxs)(j.l,{children:[Object(x.jsx)(j.n,{name:s,onChange:function(e){!function(e){var t=e.currentTarget.value.split(",");l(t)}(e)},value:n.layerIds,defaultChecked:d}),Object(x.jsx)(j.p,{pt:1,children:n.layerName})]}),t]})},n.layerName),i?Object(x.jsx)(g,{}):null]})},Ee=function(e){var t=e.group,n=e.map,r=e.legend,i=e.showOnLoad,o=void 0===i||i,c=Object(a.useState)(o),s=Object(h.a)(c,2),l=s[0],d=s[1],u=t.layers.map((function(e){return e.layerIds.map((function(e){return e}))}));u=u.flat();var b=function(e){var t=u.filter((function(t){return e.includes(t)})),a=u.filter((function(t){return!e.includes(t)}));l?(t.map((function(e){return Se(n,e,!0),!0})),a.map((function(e){return Se(n,e,!1),!0}))):u.map((function(e){return Se(n,e,!1),!0}))},p=t.layers.map((function(e,a){return Object(x.jsx)(Ne,{layerInfo:e,map:n,legend:r,itemActions:e.actions,group:t.groupName,callback:b,activeOnLoad:0===a},e.layerName)}));return Object(x.jsx)(O,{children:Object(x.jsx)(j.b,{children:Object(x.jsxs)(j.h,{sx:{flexDirection:"column"},children:[Object(x.jsxs)(j.l,{children:[Object(x.jsx)(j.e,{checked:l,onChange:function(e){e.currentTarget.checked?(d(!0),u.map((function(e){return Se(n,e,!0),!0}))):(d(!1),u.map((function(e){return Se(n,e,!1),!0})))}}),Object(x.jsx)(j.p,{pt:1,sx:{fontWeight:"bold"},children:t.groupName})]}),Object(x.jsx)(y,{children:p})]})})})},Le=["layers","groupLayers","legend","showActions","checkboxStyle","baseType","buttonOptions","sx"],Ie=function(e){var t=e.layers,n=e.groupLayers,r=e.legend,i=void 0!==r&&r,o=e.showActions,c=e.checkboxStyle,s=e.baseType,l=e.buttonOptions,d=e.sx,b=Object(p.a)(e,Le),h=Object(a.useContext)(L).map;if(!I(h))return null;var j,f=t.map((function(e){return Object(x.jsx)(_e,{layerInfo:e,map:h,legend:i,itemActions:e.actions,showActions:o,checkboxStyle:c,baseType:s},e.layerName)}));return n&&n.length>0&&(j=n.map((function(e){return Object(x.jsx)(Ee,{group:e,map:h,legend:i})}))),Object(x.jsxs)(E,Object(u.a)(Object(u.a)({baseType:s,buttonOptions:Object(u.a)({icon:Object(x.jsx)(H.d,{}),title:"Layer List",testId:"cl-layerlist-btn"},l),sx:d},b),{},{children:[Object(x.jsx)(y,{children:f}),Object(x.jsxs)(y,{children:[" ",j]})]}))},Te=[{layerIds:["national-park"],layerName:"National Parks",actions:[{title:"Custom Action",action:function(){alert("insert custom functions here")}}]},{layerIds:["water","water-shadow"],layerName:"Water",actions:[{title:"Custom Action",action:function(){alert("insert custom functions here")}}]},{layerIds:["road-motorway-trunk"],layerName:"Motorway",actions:[{title:"Custom Action",action:function(){alert("insert custom functions here")}}]},{layerIds:["road-number-shield"],layerName:"Road Shield",actions:[{title:"Custom Action",action:function(){alert("insert custom functions here")}}],legendStyle:function(){return Object(x.jsx)("svg",{width:"25",height:"25",children:Object(x.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"25",height:"7.5",style:{fill:"red",borderWidth:3}})})}}],De=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(x.jsx)(ee,{children:Object(x.jsxs)(B,{mapOptions:Q,children:[Object(x.jsx)(Ie,{layers:Te,legend:!0}),Object(x.jsx)(U,{}),Object(x.jsx)(te,{}),Object(x.jsx)(ue,{}),Object(x.jsx)(ye,{})]})})}}]),n}(a.Component);o.a.render(Object(x.jsx)(De,{}),document.getElementById("root"))}},[[351,2,3]]]);
//# sourceMappingURL=main.a2eb3a48.chunk.js.map